(()=>{var __webpack_modules__={7749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.addAdminServicesToServer=t.registerAdminService=void 0;const r=[];function registerAdminService(e,t){r.push({getServiceDefinition:e,getHandlers:t})}t.registerAdminService=registerAdminService;function addAdminServicesToServer(e){for(const{getServiceDefinition:t,getHandlers:n}of r){e.addService(t(),n())}}t.addAdminServicesToServer=addAdminServicesToServer},9017:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BackoffTimeout=void 0;const r=1e3;const n=1.6;const i=12e4;const s=.2;function uniformRandom(e,t){return Math.random()*(t-e)+e}class BackoffTimeout{constructor(e,t){this.callback=e;this.initialDelay=r;this.multiplier=n;this.maxDelay=i;this.jitter=s;this.running=false;this.hasRef=true;this.startTime=new Date;if(t){if(t.initialDelay){this.initialDelay=t.initialDelay}if(t.multiplier){this.multiplier=t.multiplier}if(t.jitter){this.jitter=t.jitter}if(t.maxDelay){this.maxDelay=t.maxDelay}}this.nextDelay=this.initialDelay;this.timerId=setTimeout((()=>{}),0);clearTimeout(this.timerId)}runTimer(e){var t,r;clearTimeout(this.timerId);this.timerId=setTimeout((()=>{this.callback();this.running=false}),e);if(!this.hasRef){(r=(t=this.timerId).unref)===null||r===void 0?void 0:r.call(t)}}runOnce(){this.running=true;this.startTime=new Date;this.runTimer(this.nextDelay);const e=Math.min(this.nextDelay*this.multiplier,this.maxDelay);const t=e*this.jitter;this.nextDelay=e+uniformRandom(-t,t)}stop(){clearTimeout(this.timerId);this.running=false}reset(){this.nextDelay=this.initialDelay;if(this.running){const e=new Date;const t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay);clearTimeout(this.timerId);if(e<t){this.runTimer(t.getTime()-e.getTime())}else{this.running=false}}}isRunning(){return this.running}ref(){var e,t;this.hasRef=true;(t=(e=this.timerId).ref)===null||t===void 0?void 0:t.call(e)}unref(){var e,t;this.hasRef=false;(t=(e=this.timerId).unref)===null||t===void 0?void 0:t.call(e)}}t.BackoffTimeout=BackoffTimeout},1636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CallCredentialsFilterFactory=t.CallCredentialsFilter=void 0;const n=r(6273);const i=r(6130);const s=r(3641);class CallCredentialsFilter extends n.BaseFilter{constructor(e,t){var r,n;super();this.channel=e;this.stream=t;this.channel=e;this.stream=t;const i=t.getMethod().split("/");let o="";if(i.length>=2){o=i[1]}const a=(n=(r=s.splitHostPort(t.getHost()))===null||r===void 0?void 0:r.host)!==null&&n!==void 0?n:"localhost";this.serviceUrl=`https://${a}/${o}`}async sendMetadata(e){const t=this.stream.getCredentials();const r=t.generateMetadata({service_url:this.serviceUrl});const n=await e;try{n.merge(await r)}catch(e){this.stream.cancelWithStatus(i.Status.UNAUTHENTICATED,`Failed to retrieve auth metadata with error: ${e.message}`);return Promise.reject("Failed to retrieve auth metadata")}if(n.get("authorization").length>1){this.stream.cancelWithStatus(i.Status.INTERNAL,'"authorization" metadata cannot have multiple values');return Promise.reject('"authorization" metadata cannot have multiple values')}return n}}t.CallCredentialsFilter=CallCredentialsFilter;class CallCredentialsFilterFactory{constructor(e){this.channel=e;this.channel=e}createFilter(e){return new CallCredentialsFilter(this.channel,e)}}t.CallCredentialsFilterFactory=CallCredentialsFilterFactory},3334:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CallCredentials=void 0;const n=r(8940);function isCurrentOauth2Client(e){return"getRequestHeaders"in e&&typeof e.getRequestHeaders==="function"}class CallCredentials{static createFromMetadataGenerator(e){return new SingleCallCredentials(e)}static createFromGoogleCredential(e){return CallCredentials.createFromMetadataGenerator(((t,r)=>{let i;if(isCurrentOauth2Client(e)){i=e.getRequestHeaders(t.service_url)}else{i=new Promise(((r,n)=>{e.getRequestMetadata(t.service_url,((e,t)=>{if(e){n(e);return}r(t)}))}))}i.then((e=>{const t=new n.Metadata;for(const r of Object.keys(e)){t.add(r,e[r])}r(null,t)}),(e=>{r(e)}))}))}static createEmpty(){return new EmptyCallCredentials}}t.CallCredentials=CallCredentials;class ComposedCallCredentials extends CallCredentials{constructor(e){super();this.creds=e}async generateMetadata(e){const t=new n.Metadata;const r=await Promise.all(this.creds.map((t=>t.generateMetadata(e))));for(const e of r){t.merge(e)}return t}compose(e){return new ComposedCallCredentials(this.creds.concat([e]))}_equals(e){if(this===e){return true}if(e instanceof ComposedCallCredentials){return this.creds.every(((t,r)=>t._equals(e.creds[r])))}else{return false}}}class SingleCallCredentials extends CallCredentials{constructor(e){super();this.metadataGenerator=e}generateMetadata(e){return new Promise(((t,r)=>{this.metadataGenerator(e,((e,n)=>{if(n!==undefined){t(n)}else{r(e)}}))}))}compose(e){return new ComposedCallCredentials([this,e])}_equals(e){if(this===e){return true}if(e instanceof SingleCallCredentials){return this.metadataGenerator===e.metadataGenerator}else{return false}}}class EmptyCallCredentials extends CallCredentials{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof EmptyCallCredentials}}},807:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Http2CallStream=t.InterceptingListenerImpl=t.isInterceptingListener=void 0;const n=r(5158);const i=r(2037);const s=r(6130);const o=r(8940);const a=r(4099);const l=r(9768);const c=r(6130);const u="call_stream";const{HTTP2_HEADER_STATUS:d,HTTP2_HEADER_CONTENT_TYPE:f,NGHTTP2_CANCEL:h}=n.constants;function getSystemErrorName(e){for(const[t,r]of Object.entries(i.constants.errno)){if(r===e){return t}}return"Unknown system error "+e}function getMinDeadline(e){let t=Infinity;for(const r of e){const e=r instanceof Date?r.getTime():r;if(e<t){t=e}}return t}function isInterceptingListener(e){return e.onReceiveMetadata!==undefined&&e.onReceiveMetadata.length===1}t.isInterceptingListener=isInterceptingListener;class InterceptingListenerImpl{constructor(e,t){this.listener=e;this.nextListener=t;this.processingMetadata=false;this.hasPendingMessage=false;this.processingMessage=false;this.pendingStatus=null}processPendingMessage(){if(this.hasPendingMessage){this.nextListener.onReceiveMessage(this.pendingMessage);this.pendingMessage=null;this.hasPendingMessage=false}}processPendingStatus(){if(this.pendingStatus){this.nextListener.onReceiveStatus(this.pendingStatus)}}onReceiveMetadata(e){this.processingMetadata=true;this.listener.onReceiveMetadata(e,(e=>{this.processingMetadata=false;this.nextListener.onReceiveMetadata(e);this.processPendingMessage();this.processPendingStatus()}))}onReceiveMessage(e){this.processingMessage=true;this.listener.onReceiveMessage(e,(e=>{this.processingMessage=false;if(this.processingMetadata){this.pendingMessage=e;this.hasPendingMessage=true}else{this.nextListener.onReceiveMessage(e);this.processPendingStatus()}}))}onReceiveStatus(e){this.listener.onReceiveStatus(e,(e=>{if(this.processingMetadata||this.processingMessage){this.pendingStatus=e}else{this.nextListener.onReceiveStatus(e)}}))}}t.InterceptingListenerImpl=InterceptingListenerImpl;class Http2CallStream{constructor(e,t,r,n,i,l){this.methodName=e;this.channel=t;this.options=r;this.channelCallCredentials=i;this.callNumber=l;this.http2Stream=null;this.pendingRead=false;this.isWriteFilterPending=false;this.pendingWrite=null;this.pendingWriteCallback=null;this.writesClosed=false;this.decoder=new a.StreamDecoder;this.isReadFilterPending=false;this.canPush=false;this.readsClosed=false;this.statusOutput=false;this.unpushedReadMessages=[];this.unfilteredReadMessages=[];this.mappedStatusCode=s.Status.UNKNOWN;this.finalStatus=null;this.subchannel=null;this.listener=null;this.internalError=null;this.configDeadline=Infinity;this.statusWatchers=[];this.streamEndWatchers=[];this.callStatsTracker=null;this.filterStack=n.createFilter(this);this.credentials=i;this.disconnectListener=()=>{this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new o.Metadata})};if(this.options.parentCall&&this.options.flags&s.Propagate.CANCELLATION){this.options.parentCall.on("cancelled",(()=>{this.cancelWithStatus(s.Status.CANCELLED,"Cancelled by parent call")}))}}outputStatus(){var e;if(this.listener&&!this.statusOutput){this.statusOutput=true;const t=this.filterStack.receiveTrailers(this.finalStatus);this.trace("ended with status: code="+t.code+' details="'+t.details+'"');this.statusWatchers.forEach((e=>e(t)));process.nextTick((()=>{var e;(e=this.listener)===null||e===void 0?void 0:e.onReceiveStatus(t)}));(e=this.http2Stream)===null||e===void 0?void 0:e.resume();if(this.subchannel){this.subchannel.callUnref();this.subchannel.removeDisconnectListener(this.disconnectListener)}}}trace(e){l.trace(c.LogVerbosity.DEBUG,u,"["+this.callNumber+"] "+e)}endCall(e){if(this.finalStatus===null||this.finalStatus.code===s.Status.OK){this.finalStatus=e;this.maybeOutputStatus()}this.destroyHttp2Stream()}maybeOutputStatus(){if(this.finalStatus!==null){if(this.finalStatus.code!==s.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&this.unfilteredReadMessages.length===0&&!this.isReadFilterPending){this.outputStatus()}}}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null));this.canPush=false;process.nextTick((()=>{var t;if(this.statusOutput){return}(t=this.listener)===null||t===void 0?void 0:t.onReceiveMessage(e);this.maybeOutputStatus()}))}handleFilterError(e){this.cancelWithStatus(s.Status.INTERNAL,e.message)}handleFilteredRead(e){if(this.finalStatus!==null&&this.finalStatus.code!==s.Status.OK){this.maybeOutputStatus();return}this.isReadFilterPending=false;if(this.canPush){this.http2Stream.pause();this.push(e)}else{this.trace("unpushedReadMessages.push message of length "+e.length);this.unpushedReadMessages.push(e)}if(this.unfilteredReadMessages.length>0){const e=this.unfilteredReadMessages.shift();this.filterReceivedMessage(e)}}filterReceivedMessage(e){if(this.finalStatus!==null&&this.finalStatus.code!==s.Status.OK){this.maybeOutputStatus();return}this.trace("filterReceivedMessage of length "+e.length);this.isReadFilterPending=true;this.filterStack.receiveMessage(Promise.resolve(e)).then(this.handleFilteredRead.bind(this),this.handleFilterError.bind(this))}tryPush(e){if(this.isReadFilterPending){this.trace("unfilteredReadMessages.push message of length "+(e&&e.length));this.unfilteredReadMessages.push(e)}else{this.filterReceivedMessage(e)}}handleTrailers(e){this.streamEndWatchers.forEach((e=>e(true)));let t="";for(const r of Object.keys(e)){t+="\t\t"+r+": "+e[r]+"\n"}this.trace("Received server trailers:\n"+t);let r;try{r=o.Metadata.fromHttp2Headers(e)}catch(e){r=new o.Metadata}const n=r.getMap();let i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&typeof n["grpc-status"]==="string"){const e=Number(n["grpc-status"]);if(e in s.Status){i=e;this.trace("received status code "+e+" from server")}r.remove("grpc-status")}let a="";if(typeof n["grpc-message"]==="string"){try{a=decodeURI(n["grpc-message"])}catch(e){a=n["grpc-message"]}r.remove("grpc-message");this.trace('received status details string "'+a+'" from server')}const l={code:i,details:a,metadata:r};this.endCall(l)}writeMessageToStream(e,t){var r;(r=this.callStatsTracker)===null||r===void 0?void 0:r.addMessageSent();this.http2Stream.write(e,t)}attachHttp2Stream(e,t,r,i){this.filterStack.push(r);if(this.finalStatus!==null){e.close(h)}else{this.trace("attachHttp2Stream from subchannel "+t.getAddress());this.http2Stream=e;this.subchannel=t;this.callStatsTracker=i;t.addDisconnectListener(this.disconnectListener);t.callRef();e.on("response",((e,t)=>{var r;let i="";for(const t of Object.keys(e)){i+="\t\t"+t+": "+e[t]+"\n"}this.trace("Received server headers:\n"+i);switch(e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM){this.handleTrailers(e)}else{let t;try{t=o.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new o.Metadata});return}try{const e=this.filterStack.receiveMetadata(t);(r=this.listener)===null||r===void 0?void 0:r.onReceiveMetadata(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new o.Metadata})}}}));e.on("trailers",(e=>{this.handleTrailers(e)}));e.on("data",(e=>{if(this.statusOutput){return}this.trace("receive HTTP/2 data frame of length "+e.length);const t=this.decoder.write(e);for(const e of t){this.trace("parsed message of length "+e.length);this.callStatsTracker.addMessageReceived();this.tryPush(e)}}));e.on("end",(()=>{this.readsClosed=true;this.maybeOutputStatus()}));e.on("close",(()=>{process.nextTick((()=>{var t;this.trace("HTTP/2 stream closed with code "+e.rstCode);if(((t=this.finalStatus)===null||t===void 0?void 0:t.code)===s.Status.OK){return}let r;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null){return}r=s.Status.INTERNAL;i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE;i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED;i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED;i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED;i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL;if(this.internalError===null){i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`}else{if(this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"){r=s.Status.UNAVAILABLE;i=this.internalError.message}else{i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`}}break;default:r=s.Status.INTERNAL;i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new o.Metadata})}))}));e.on("error",(e=>{if(e.code!=="ERR_HTTP2_STREAM_ERROR"){this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+getSystemErrorName(e.errno)+" syscall="+e.syscall);this.internalError=e}this.streamEndWatchers.forEach((e=>e(false)))}));if(this.pendingWrite){if(!this.pendingWriteCallback){throw new Error("Invalid state in write handling code")}this.trace("sending data chunk of length "+this.pendingWrite.length+" (deferred)");try{this.writeMessageToStream(this.pendingWrite,this.pendingWriteCallback)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}}this.maybeCloseWrites()}}start(e,t){this.trace("Sending metadata");this.listener=t;this.channel._startCallStream(this,e);this.maybeOutputStatus()}destroyHttp2Stream(){var e;if(this.http2Stream!==null&&!this.http2Stream.destroyed){let t;if(((e=this.finalStatus)===null||e===void 0?void 0:e.code)===s.Status.OK){t=n.constants.NGHTTP2_NO_ERROR}else{t=n.constants.NGHTTP2_CANCEL}this.trace("close http2 stream with code "+t);this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"');this.endCall({code:e,details:t,metadata:new o.Metadata})}getDeadline(){const e=[this.options.deadline];if(this.options.parentCall&&this.options.flags&s.Propagate.DEADLINE){e.push(this.options.parentCall.getDeadline())}if(this.configDeadline){e.push(this.configDeadline)}return getMinDeadline(e)}getCredentials(){return this.credentials}setCredentials(e){this.credentials=this.channelCallCredentials.compose(e)}getStatus(){return this.finalStatus}getPeer(){var e,t;return(t=(e=this.subchannel)===null||e===void 0?void 0:e.getAddress())!==null&&t!==void 0?t:this.channel.getTarget()}getMethod(){return this.methodName}getHost(){return this.options.host}setConfigDeadline(e){this.configDeadline=e}addStatusWatcher(e){this.statusWatchers.push(e)}addStreamEndWatcher(e){this.streamEndWatchers.push(e)}addFilters(e){this.filterStack.push(e)}getCallNumber(){return this.callNumber}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==s.Status.OK){this.readsClosed=true;this.maybeOutputStatus();return}this.canPush=true;if(this.http2Stream===null){this.pendingRead=true}else{if(this.unpushedReadMessages.length>0){const e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}}maybeCloseWrites(){if(this.writesClosed&&!this.isWriteFilterPending&&this.http2Stream!==null){this.trace("calling end() on HTTP/2 stream");this.http2Stream.end()}}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);const r={message:t,flags:e.flags};const cb=t=>{var r,n;let i=s.Status.UNAVAILABLE;if(((r=t)===null||r===void 0?void 0:r.code)==="ERR_STREAM_WRITE_AFTER_END"){i=s.Status.INTERNAL}if(t){this.cancelWithStatus(i,`Write error: ${t.message}`)}(n=e.callback)===null||n===void 0?void 0:n.call(e)};this.isWriteFilterPending=true;this.filterStack.sendMessage(Promise.resolve(r)).then((e=>{this.isWriteFilterPending=false;if(this.http2Stream===null){this.trace("deferring writing data chunk of length "+e.message.length);this.pendingWrite=e.message;this.pendingWriteCallback=cb}else{this.trace("sending data chunk of length "+e.message.length);try{this.writeMessageToStream(e.message,cb)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new o.Metadata})}this.maybeCloseWrites()}}),this.handleFilterError.bind(this))}halfClose(){this.trace("end() called");this.writesClosed=true;this.maybeCloseWrites()}}t.Http2CallStream=Http2CallStream},4700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;const n=r(2361);const i=r(2781);const s=r(6130);function callErrorFromStatus(e,t){const r=`${e.code} ${s.Status[e.code]}: ${e.details}`;const n=new Error(r);const i=`${n.stack}\nfor call at\n${t}`;return Object.assign(new Error(r),e,{stack:i})}t.callErrorFromStatus=callErrorFromStatus;class ClientUnaryCallImpl extends n.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}}t.ClientUnaryCallImpl=ClientUnaryCallImpl;class ClientReadableStreamImpl extends i.Readable{constructor(e){super({objectMode:true});this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0?void 0:t.startRead()}}t.ClientReadableStreamImpl=ClientReadableStreamImpl;class ClientWritableStreamImpl extends i.Writable{constructor(e){super({objectMode:true});this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_write(e,t,r){var n;const i={callback:r};const s=Number(t);if(!Number.isNaN(s)){i.flags=s}(n=this.call)===null||n===void 0?void 0:n.sendMessageWithContext(i,e)}_final(e){var t;(t=this.call)===null||t===void 0?void 0:t.halfClose();e()}}t.ClientWritableStreamImpl=ClientWritableStreamImpl;class ClientDuplexStreamImpl extends i.Duplex{constructor(e,t){super({objectMode:true});this.serialize=e;this.deserialize=t}cancel(){var e;(e=this.call)===null||e===void 0?void 0:e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0?void 0:t.startRead()}_write(e,t,r){var n;const i={callback:r};const s=Number(t);if(!Number.isNaN(s)){i.flags=s}(n=this.call)===null||n===void 0?void 0:n.sendMessageWithContext(i,e)}_final(e){var t;(t=this.call)===null||t===void 0?void 0:t.halfClose();e()}}t.ClientDuplexStreamImpl=ClientDuplexStreamImpl},7275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChannelCredentials=void 0;const n=r(4404);const i=r(3334);const s=r(1589);function verifyIsBufferOrNull(e,t){if(e&&!(e instanceof Buffer)){throw new TypeError(`${t}, if provided, must be a Buffer.`)}}function bufferOrNullEqual(e,t){if(e===null&&t===null){return true}else{return e!==null&&t!==null&&e.equals(t)}}class ChannelCredentials{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var o;verifyIsBufferOrNull(e,"Root certificate");verifyIsBufferOrNull(t,"Private key");verifyIsBufferOrNull(r,"Certificate chain");if(t&&!r){throw new Error("Private key must be given with accompanying certificate chain")}if(!t&&r){throw new Error("Certificate chain must be given with accompanying private key")}const a=n.createSecureContext({ca:(o=e!==null&&e!==void 0?e:s.getDefaultRootsData())!==null&&o!==void 0?o:undefined,key:t!==null&&t!==void 0?t:undefined,cert:r!==null&&r!==void 0?r:undefined,ciphers:s.CIPHER_SUITES});return new SecureChannelCredentialsImpl(a,i!==null&&i!==void 0?i:{})}static createFromSecureContext(e,t){return new SecureChannelCredentialsImpl(e,t!==null&&t!==void 0?t:{})}static createInsecure(){return new InsecureChannelCredentialsImpl}}t.ChannelCredentials=ChannelCredentials;class InsecureChannelCredentialsImpl extends ChannelCredentials{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return false}_equals(e){return e instanceof InsecureChannelCredentialsImpl}}class SecureChannelCredentialsImpl extends ChannelCredentials{constructor(e,t){super();this.secureContext=e;this.verifyOptions=t;this.connectionOptions={secureContext:e};if(t===null||t===void 0?void 0:t.checkServerIdentity){this.connectionOptions.checkServerIdentity=t.checkServerIdentity}}compose(e){const t=this.callCredentials.compose(e);return new ComposedChannelCredentialsImpl(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return true}_equals(e){if(this===e){return true}if(e instanceof SecureChannelCredentialsImpl){return this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}else{return false}}}class ComposedChannelCredentialsImpl extends ChannelCredentials{constructor(e,t){super(t);this.channelCredentials=e}compose(e){const t=this.callCredentials.compose(e);return new ComposedChannelCredentialsImpl(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return true}_equals(e){if(this===e){return true}if(e instanceof ComposedChannelCredentialsImpl){return this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}else{return false}}}},5292:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.channelOptionsEqual=t.recognizedOptions=void 0;t.recognizedOptions={"grpc.ssl_target_name_override":true,"grpc.primary_user_agent":true,"grpc.secondary_user_agent":true,"grpc.default_authority":true,"grpc.keepalive_time_ms":true,"grpc.keepalive_timeout_ms":true,"grpc.keepalive_permit_without_calls":true,"grpc.service_config":true,"grpc.max_concurrent_streams":true,"grpc.initial_reconnect_backoff_ms":true,"grpc.max_reconnect_backoff_ms":true,"grpc.use_local_subchannel_pool":true,"grpc.max_send_message_length":true,"grpc.max_receive_message_length":true,"grpc.enable_http_proxy":true,"grpc.enable_channelz":true,"grpc.dns_min_time_between_resolutions_ms":true,"grpc-node.max_session_memory":true};function channelOptionsEqual(e,t){const r=Object.keys(e).sort();const n=Object.keys(t).sort();if(r.length!==n.length){return false}for(let i=0;i<r.length;i+=1){if(r[i]!==n[i]){return false}if(e[r[i]]!==t[n[i]]){return false}}return true}t.channelOptionsEqual=channelOptionsEqual},3380:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChannelImplementation=void 0;const n=r(807);const i=r(7275);const s=r(8794);const o=r(3095);const a=r(2233);const l=r(6130);const c=r(108);const u=r(1636);const d=r(5855);const f=r(9503);const h=r(6280);const p=r(9768);const m=r(682);const g=r(8837);const y=r(3641);const v=r(4822);const b=r(859);const S=2147483647;let _=0;function getNewCallNumber(){const e=_;_+=1;if(_>=Number.MAX_SAFE_INTEGER){_=0}return e}class ChannelImplementation{constructor(e,t,r){var n,_,T,E;this.credentials=t;this.options=r;this.connectivityState=v.ConnectivityState.IDLE;this.currentPicker=new a.UnavailablePicker;this.configSelectionQueue=[];this.pickQueue=[];this.connectivityStateWatchers=[];this.configSelector=null;this.currentResolutionError=null;this.channelzEnabled=true;this.callTracker=new b.ChannelzCallTracker;this.childrenTracker=new b.ChannelzChildrenTracker;if(typeof e!=="string"){throw new TypeError("Channel target must be a string")}if(!(t instanceof i.ChannelCredentials)){throw new TypeError("Channel credentials must be a ChannelCredentials object")}if(r){if(typeof r!=="object"){throw new TypeError("Channel options must be an object")}}this.originalTarget=e;const O=y.parseUri(e);if(O===null){throw new Error(`Could not parse target name "${e}"`)}const C=h.mapUriDefaultScheme(O);if(C===null){throw new Error(`Could not find a default scheme for target name "${e}"`)}this.callRefTimer=setInterval((()=>{}),S);(_=(n=this.callRefTimer).unref)===null||_===void 0?void 0:_.call(n);if(this.options["grpc.enable_channelz"]===0){this.channelzEnabled=false}this.channelzTrace=new b.ChannelzTrace;this.channelzRef=b.registerChannelzChannel(e,(()=>this.getChannelzInfo()),this.channelzEnabled);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Channel created")}if(this.options["grpc.default_authority"]){this.defaultAuthority=this.options["grpc.default_authority"]}else{this.defaultAuthority=h.getDefaultAuthority(C)}const R=g.mapProxyName(C,r);this.target=R.target;this.options=Object.assign({},this.options,R.extraOptions);this.subchannelPool=o.getSubchannelPool(((T=r["grpc.use_local_subchannel_pool"])!==null&&T!==void 0?T:0)===0);const A={createSubchannel:(e,t)=>{const r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef())}return r},updateState:(e,t)=>{this.currentPicker=t;const r=this.pickQueue.slice();this.pickQueue=[];this.callRefTimerUnref();for(const{callStream:e,callMetadata:t,callConfig:n,dynamicFilters:i}of r){this.tryPick(e,t,n,i)}this.updateState(e)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{if(this.channelzEnabled){this.childrenTracker.refChild(e)}},removeChannelzChild:e=>{if(this.channelzEnabled){this.childrenTracker.unrefChild(e)}}};this.resolvingLoadBalancer=new s.ResolvingLoadBalancer(this.target,A,r,(e=>{if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded")}this.configSelector=e;this.currentResolutionError=null;process.nextTick((()=>{const e=this.configSelectionQueue;this.configSelectionQueue=[];this.callRefTimerUnref();for(const{callStream:t,callMetadata:r}of e){this.tryGetConfig(t,r)}this.configSelectionQueue=[]}))}),(e=>{if(this.channelzEnabled){this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"')}if(this.configSelectionQueue.length>0){this.trace("Name resolution failed with calls queued for config selection")}if(this.configSelector===null){this.currentResolutionError=e}const t=this.configSelectionQueue;this.configSelectionQueue=[];this.callRefTimerUnref();for(const{callStream:r,callMetadata:n}of t){if(n.getOptions().waitForReady){this.callRefTimerRef();this.configSelectionQueue.push({callStream:r,callMetadata:n})}else{r.cancelWithStatus(e.code,e.details)}}}));this.filterStackFactory=new c.FilterStackFactory([new u.CallCredentialsFilterFactory(this),new d.DeadlineFilterFactory(this),new m.MaxMessageSizeFilterFactory(this.options),new f.CompressionFilterFactory(this,this.options)]);this.trace("Channel constructed with options "+JSON.stringify(r,undefined,2));const w=new Error;p.trace(l.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") "+"Channel constructed \n"+((E=w.stack)===null||E===void 0?void 0:E.substring(w.stack.indexOf("\n")+1)))}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){p.trace(t!==null&&t!==void 0?t:l.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+y.uriToString(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;if(!((t=(e=this.callRefTimer).hasRef)===null||t===void 0?void 0:t.call(e))){this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length);(n=(r=this.callRefTimer).ref)===null||n===void 0?void 0:n.call(r)}}callRefTimerUnref(){var e,t;if(!this.callRefTimer.hasRef||this.callRefTimer.hasRef()){this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length);(t=(e=this.callRefTimer).unref)===null||t===void 0?void 0:t.call(e)}}pushPick(e,t,r,n){this.pickQueue.push({callStream:e,callMetadata:t,callConfig:r,dynamicFilters:n});this.callRefTimerRef()}tryPick(e,t,r,n){var i,s;const o=this.currentPicker.pick({metadata:t,extraPickInfo:r.pickInformation});const c=o.subchannel?"("+o.subchannel.getChannelzRef().id+") "+o.subchannel.getAddress():""+o.subchannel;this.trace("Pick result for call ["+e.getCallNumber()+"]: "+a.PickResultType[o.pickResultType]+" subchannel: "+c+" status: "+((i=o.status)===null||i===void 0?void 0:i.code)+" "+((s=o.status)===null||s===void 0?void 0:s.details));switch(o.pickResultType){case a.PickResultType.COMPLETE:if(o.subchannel===null){e.cancelWithStatus(l.Status.UNAVAILABLE,"Request dropped by load balancing policy")}else{if(o.subchannel.getConnectivityState()!==v.ConnectivityState.READY){p.log(l.LogVerbosity.ERROR,"Error: COMPLETE pick result subchannel "+c+" has state "+v.ConnectivityState[o.subchannel.getConnectivityState()]);this.pushPick(e,t,r,n);break}e.filterStack.sendMetadata(Promise.resolve(t.clone())).then((i=>{var s,a,u;const d=o.subchannel.getConnectivityState();if(d===v.ConnectivityState.READY){try{const t=o.extraFilterFactories.map((t=>t.createFilter(e)));(s=o.subchannel)===null||s===void 0?void 0:s.getRealSubchannel().startCallStream(i,e,[...n,...t]);(a=r.onCommitted)===null||a===void 0?void 0:a.call(r);(u=o.onCallStarted)===null||u===void 0?void 0:u.call(o)}catch(i){const s=i.code;if(s==="ERR_HTTP2_GOAWAY_SESSION"||s==="ERR_HTTP2_INVALID_SESSION"){this.trace("Failed to start call on picked subchannel "+c+" with error "+i.message+". Retrying pick",l.LogVerbosity.INFO);this.tryPick(e,t,r,n)}else{this.trace("Failed to start call on picked subchanel "+c+" with error "+i.message+". Ending call",l.LogVerbosity.INFO);e.cancelWithStatus(l.Status.INTERNAL,`Failed to start HTTP/2 stream with error: ${i.message}`)}}}else{this.trace("Picked subchannel "+c+" has state "+v.ConnectivityState[d]+" after metadata filters. Retrying pick",l.LogVerbosity.INFO);this.tryPick(e,t,r,n)}}),(t=>{e.cancelWithStatus(typeof t.code==="number"?t.code:l.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${t.message}`)}))}break;case a.PickResultType.QUEUE:this.pushPick(e,t,r,n);break;case a.PickResultType.TRANSIENT_FAILURE:if(t.getOptions().waitForReady){this.pushPick(e,t,r,n)}else{e.cancelWithStatus(o.status.code,o.status.details)}break;case a.PickResultType.DROP:e.cancelWithStatus(o.status.code,o.status.details);break;default:throw new Error(`Invalid state: unknown pickResultType ${o.pickResultType}`)}}removeConnectivityStateWatcher(e){const t=this.connectivityStateWatchers.findIndex((t=>t===e));if(t>=0){this.connectivityStateWatchers.splice(t,1)}}updateState(e){p.trace(l.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+y.uriToString(this.target)+" "+v.ConnectivityState[this.connectivityState]+" -> "+v.ConnectivityState[e]);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO",v.ConnectivityState[this.connectivityState]+" -> "+v.ConnectivityState[e])}this.connectivityState=e;const t=this.connectivityStateWatchers.slice();for(const r of t){if(e!==r.currentState){if(r.timer){clearTimeout(r.timer)}this.removeConnectivityStateWatcher(r);r.callback()}}if(e!==v.ConnectivityState.TRANSIENT_FAILURE){this.currentResolutionError=null}}tryGetConfig(e,t){if(e.getStatus()!==null){return}if(this.configSelector===null){this.resolvingLoadBalancer.exitIdle();if(this.currentResolutionError&&!t.getOptions().waitForReady){e.cancelWithStatus(this.currentResolutionError.code,this.currentResolutionError.details)}else{this.configSelectionQueue.push({callStream:e,callMetadata:t});this.callRefTimerRef()}}else{const r=this.configSelector(e.getMethod(),t);if(r.status===l.Status.OK){if(r.methodConfig.timeout){const t=new Date;t.setSeconds(t.getSeconds()+r.methodConfig.timeout.seconds);t.setMilliseconds(t.getMilliseconds()+r.methodConfig.timeout.nanos/1e6);e.setConfigDeadline(t);e.filterStack.refresh()}if(r.dynamicFilterFactories.length>0){const n=new c.FilterStackFactory(r.dynamicFilterFactories);const i=n.createFilter(e);i.sendMetadata(Promise.resolve(t)).then((t=>{this.tryPick(e,t,r,i.getFilters())}))}else{this.tryPick(e,t,r,[])}}else{e.cancelWithStatus(r.status,"Failed to route call to method "+e.getMethod())}}}_startCallStream(e,t){this.tryGetConfig(e,t.clone())}close(){this.resolvingLoadBalancer.destroy();this.updateState(v.ConnectivityState.SHUTDOWN);clearInterval(this.callRefTimer);if(this.channelzEnabled){b.unregisterChannelzRef(this.channelzRef)}this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return y.uriToString(this.target)}getConnectivityState(e){const t=this.connectivityState;if(e){this.resolvingLoadBalancer.exitIdle()}return t}watchConnectivityState(e,t,r){if(this.connectivityState===v.ConnectivityState.SHUTDOWN){throw new Error("Channel has been shut down")}let n=null;if(t!==Infinity){const e=t instanceof Date?t:new Date(t);const s=new Date;if(t===-Infinity||e<=s){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}n=setTimeout((()=>{this.removeConnectivityStateWatcher(i);r(new Error("Deadline passed without connectivity state change"))}),e.getTime()-s.getTime())}const i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,s){if(typeof e!=="string"){throw new TypeError("Channel#createCall: method must be a string")}if(!(typeof t==="number"||t instanceof Date)){throw new TypeError("Channel#createCall: deadline must be a number or Date")}if(this.connectivityState===v.ConnectivityState.SHUTDOWN){throw new Error("Channel has been shut down")}const o=getNewCallNumber();this.trace("createCall ["+o+'] method="'+e+'", deadline='+t);const a={deadline:t,flags:s!==null&&s!==void 0?s:l.Propagate.DEFAULTS,host:r!==null&&r!==void 0?r:this.defaultAuthority,parentCall:i};const c=new n.Http2CallStream(e,this,a,this.filterStackFactory,this.credentials._getCallCredentials(),o);if(this.channelzEnabled){this.callTracker.addCallStarted();c.addStatusWatcher((e=>{if(e.code===l.Status.OK){this.callTracker.addCallSucceeded()}else{this.callTracker.addCallFailed()}}))}return c}}t.ChannelImplementation=ChannelImplementation},859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;const n=r(1808);const i=r(4822);const s=r(6130);const o=r(8210);const a=r(7749);const l=r(2602);function channelRefToMessage(e){return{channel_id:e.id,name:e.name}}function subchannelRefToMessage(e){return{subchannel_id:e.id,name:e.name}}function serverRefToMessage(e){return{server_id:e.id}}function socketRefToMessage(e){return{socket_id:e.id,name:e.name}}const c=32;class ChannelzTrace{constructor(){this.events=[];this.eventsLogged=0;this.creationTimestamp=new Date}addTrace(e,t,r){const n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(r===null||r===void 0?void 0:r.kind)==="channel"?r:undefined,childSubchannel:(r===null||r===void 0?void 0:r.kind)==="subchannel"?r:undefined});if(this.events.length>=c*2){this.events=this.events.slice(c)}this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:dateToProtoTimestamp(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map((e=>({description:e.description,severity:e.severity,timestamp:dateToProtoTimestamp(e.timestamp),channel_ref:e.childChannel?channelRefToMessage(e.childChannel):null,subchannel_ref:e.childSubchannel?subchannelRefToMessage(e.childSubchannel):null})))}}}t.ChannelzTrace=ChannelzTrace;class ChannelzChildrenTracker{constructor(){this.channelChildren=new Map;this.subchannelChildren=new Map;this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=(t=this.channelChildren.get(e.id))!==null&&t!==void 0?t:{ref:e,count:0};r.count+=1;this.channelChildren.set(e.id,r);break}case"subchannel":{let t=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};t.count+=1;this.subchannelChildren.set(e.id,t);break}case"socket":{let t=(n=this.socketChildren.get(e.id))!==null&&n!==void 0?n:{ref:e,count:0};t.count+=1;this.socketChildren.set(e.id,t);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);if(t!==undefined){t.count-=1;if(t.count===0){this.channelChildren.delete(e.id)}else{this.channelChildren.set(e.id,t)}}break}case"subchannel":{let t=this.subchannelChildren.get(e.id);if(t!==undefined){t.count-=1;if(t.count===0){this.subchannelChildren.delete(e.id)}else{this.subchannelChildren.set(e.id,t)}}break}case"socket":{let t=this.socketChildren.get(e.id);if(t!==undefined){t.count-=1;if(t.count===0){this.socketChildren.delete(e.id)}else{this.socketChildren.set(e.id,t)}}break}}}getChildLists(){const e=[];for(const{ref:t}of this.channelChildren.values()){e.push(t)}const t=[];for(const{ref:e}of this.subchannelChildren.values()){t.push(e)}const r=[];for(const{ref:e}of this.socketChildren.values()){r.push(e)}return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=ChannelzChildrenTracker;class ChannelzCallTracker{constructor(){this.callsStarted=0;this.callsSucceeded=0;this.callsFailed=0;this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1;this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=ChannelzCallTracker;let u=1;function getNextId(){return u++}const d=[];const f=[];const h=[];const p=[];function registerChannelzChannel(e,t,r){const n=getNextId();const i={id:n,name:e,kind:"channel"};if(r){d[n]={ref:i,getInfo:t}}return i}t.registerChannelzChannel=registerChannelzChannel;function registerChannelzSubchannel(e,t,r){const n=getNextId();const i={id:n,name:e,kind:"subchannel"};if(r){f[n]={ref:i,getInfo:t}}return i}t.registerChannelzSubchannel=registerChannelzSubchannel;function registerChannelzServer(e,t){const r=getNextId();const n={id:r,kind:"server"};if(t){h[r]={ref:n,getInfo:e}}return n}t.registerChannelzServer=registerChannelzServer;function registerChannelzSocket(e,t,r){const n=getNextId();const i={id:n,name:e,kind:"socket"};if(r){p[n]={ref:i,getInfo:t}}return i}t.registerChannelzSocket=registerChannelzSocket;function unregisterChannelzRef(e){switch(e.kind){case"channel":delete d[e.id];return;case"subchannel":delete f[e.id];return;case"server":delete h[e.id];return;case"socket":delete p[e.id];return}}t.unregisterChannelzRef=unregisterChannelzRef;function parseIPv6Section(e){const t=Number.parseInt(e,16);return[t/256|0,t%256]}function parseIPv6Chunk(e){if(e===""){return[]}const t=e.split(":").map((e=>parseIPv6Section(e)));const r=[];return r.concat(...t)}function ipAddressStringToBuffer(e){if(n.isIPv4(e)){return Buffer.from(Uint8Array.from(e.split(".").map((e=>Number.parseInt(e)))))}else if(n.isIPv6(e)){let t;let r;const n=e.indexOf("::");if(n===-1){t=e;r=""}else{t=e.substring(0,n);r=e.substring(n+2)}const i=Buffer.from(parseIPv6Chunk(t));const s=Buffer.from(parseIPv6Chunk(r));const o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else{return null}}function connectivityStateToMessage(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function dateToProtoTimestamp(e){if(!e){return null}const t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function getChannelMessage(e){const t=e.getInfo();return{ref:channelRefToMessage(e.ref),data:{target:t.target,state:connectivityStateToMessage(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map((e=>channelRefToMessage(e))),subchannel_ref:t.children.subchannels.map((e=>subchannelRefToMessage(e)))}}function GetChannel(e,t){const r=Number.parseInt(e.request.channel_id);const n=d[r];if(n===undefined){t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});return}t(null,{channel:getChannelMessage(n)})}function GetTopChannels(e,t){const r=Number.parseInt(e.request.max_results);const n=[];let i=Number.parseInt(e.request.start_channel_id);for(;i<d.length;i++){const e=d[i];if(e===undefined){continue}n.push(getChannelMessage(e));if(n.length>=r){break}}t(null,{channel:n,end:i>=h.length})}function getServerMessage(e){const t=e.getInfo();return{ref:serverRefToMessage(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map((e=>socketRefToMessage(e)))}}function GetServer(e,t){const r=Number.parseInt(e.request.server_id);const n=h[r];if(n===undefined){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}t(null,{server:getServerMessage(n)})}function GetServers(e,t){const r=Number.parseInt(e.request.max_results);const n=[];let i=Number.parseInt(e.request.start_server_id);for(;i<h.length;i++){const e=h[i];if(e===undefined){continue}n.push(getServerMessage(e));if(n.length>=r){break}}t(null,{server:n,end:i>=h.length})}function GetSubchannel(e,t){const r=Number.parseInt(e.request.subchannel_id);const n=f[r];if(n===undefined){t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}const i=n.getInfo();const o={ref:subchannelRefToMessage(n.ref),data:{target:i.target,state:connectivityStateToMessage(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:dateToProtoTimestamp(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map((e=>socketRefToMessage(e)))};t(null,{subchannel:o})}function subchannelAddressToAddressMessage(e){var t;if(o.isTcpSubchannelAddress(e)){return{address:"tcpip_address",tcpip_address:{ip_address:(t=ipAddressStringToBuffer(e.host))!==null&&t!==void 0?t:undefined,port:e.port}}}else{return{address:"uds_address",uds_address:{filename:e.path}}}}function GetSocket(e,t){var r,n,i,o,a;const l=Number.parseInt(e.request.socket_id);const c=p[l];if(c===undefined){t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});return}const u=c.getInfo();const d=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(r=u.security.cipherSuiteStandardName)!==null&&r!==void 0?r:undefined,other_name:(n=u.security.cipherSuiteOtherName)!==null&&n!==void 0?n:undefined,local_certificate:(i=u.security.localCertificate)!==null&&i!==void 0?i:undefined,remote_certificate:(o=u.security.remoteCertificate)!==null&&o!==void 0?o:undefined}}:null;const f={ref:socketRefToMessage(c.ref),local:u.localAddress?subchannelAddressToAddressMessage(u.localAddress):null,remote:u.remoteAddress?subchannelAddressToAddressMessage(u.remoteAddress):null,remote_name:(a=u.remoteName)!==null&&a!==void 0?a:undefined,security:d,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:dateToProtoTimestamp(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:dateToProtoTimestamp(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:dateToProtoTimestamp(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:dateToProtoTimestamp(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}};t(null,{socket:f})}function GetServerSockets(e,t){const r=Number.parseInt(e.request.server_id);const n=h[r];if(n===undefined){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}const i=Number.parseInt(e.request.start_socket_id);const o=Number.parseInt(e.request.max_results);const a=n.getInfo();const l=a.sessionChildren.sockets.sort(((e,t)=>e.id-t.id));const c=[];let u=0;for(;u<l.length;u++){if(l[u].id>=i){c.push(socketRefToMessage(l[u]));if(c.length>=o){break}}}t(null,{socket_ref:c,end:u>=l.length})}function getChannelzHandlers(){return{GetChannel:GetChannel,GetTopChannels:GetTopChannels,GetServer:GetServer,GetServers:GetServers,GetSubchannel:GetSubchannel,GetSocket:GetSocket,GetServerSockets:GetServerSockets}}t.getChannelzHandlers=getChannelzHandlers;let m=null;function getChannelzServiceDefinition(){if(m){return m}const e=r(4688).J_;const t=e("channelz.proto",{keepCase:true,longs:String,enums:String,defaults:true,oneofs:true,includeDirs:[r.ab+"proto"]});const n=l.loadPackageDefinition(t);m=n.grpc.channelz.v1.Channelz.service;return m}t.getChannelzServiceDefinition=getChannelzServiceDefinition;function setup(){a.registerAdminService(getChannelzServiceDefinition,getChannelzHandlers)}t.setup=setup},5279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;const n=r(8940);const i=r(807);const s=r(6130);class InterceptorConfigurationError extends Error{constructor(e){super(e);this.name="InterceptorConfigurationError";Error.captureStackTrace(this,InterceptorConfigurationError)}}t.InterceptorConfigurationError=InterceptorConfigurationError;class ListenerBuilder{constructor(){this.metadata=undefined;this.message=undefined;this.status=undefined}withOnReceiveMetadata(e){this.metadata=e;return this}withOnReceiveMessage(e){this.message=e;return this}withOnReceiveStatus(e){this.status=e;return this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=ListenerBuilder;class RequesterBuilder{constructor(){this.start=undefined;this.message=undefined;this.halfClose=undefined;this.cancel=undefined}withStart(e){this.start=e;return this}withSendMessage(e){this.message=e;return this}withHalfClose(e){this.halfClose=e;return this}withCancel(e){this.cancel=e;return this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=RequesterBuilder;const o={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}};const a={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class InterceptingCall{constructor(e,t){var r,n,i,s;this.nextCall=e;this.processingMetadata=false;this.pendingMessageContext=null;this.processingMessage=false;this.pendingHalfClose=false;if(t){this.requester={start:(r=t.start)!==null&&r!==void 0?r:a.start,sendMessage:(n=t.sendMessage)!==null&&n!==void 0?n:a.sendMessage,halfClose:(i=t.halfClose)!==null&&i!==void 0?i:a.halfClose,cancel:(s=t.cancel)!==null&&s!==void 0?s:a.cancel}}else{this.requester=a}}cancelWithStatus(e,t){this.requester.cancel((()=>{this.nextCall.cancelWithStatus(e,t)}))}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){if(this.pendingMessageContext){this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage);this.pendingMessageContext=null;this.pendingMessage=null}}processPendingHalfClose(){if(this.pendingHalfClose){this.nextCall.halfClose()}}start(e,t){var r,n,s,a,l,c;const u={onReceiveMetadata:(n=(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e=>{},onReceiveMessage:(a=(s=t===null||t===void 0?void 0:t.onReceiveMessage)===null||s===void 0?void 0:s.bind(t))!==null&&a!==void 0?a:e=>{},onReceiveStatus:(c=(l=t===null||t===void 0?void 0:t.onReceiveStatus)===null||l===void 0?void 0:l.bind(t))!==null&&c!==void 0?c:e=>{}};this.processingMetadata=true;this.requester.start(e,u,((e,t)=>{var r,n,s;this.processingMetadata=false;let a;if(i.isInterceptingListener(t)){a=t}else{const e={onReceiveMetadata:(r=t.onReceiveMetadata)!==null&&r!==void 0?r:o.onReceiveMetadata,onReceiveMessage:(n=t.onReceiveMessage)!==null&&n!==void 0?n:o.onReceiveMessage,onReceiveStatus:(s=t.onReceiveStatus)!==null&&s!==void 0?s:o.onReceiveStatus};a=new i.InterceptingListenerImpl(e,u)}this.nextCall.start(e,a);this.processPendingMessage();this.processPendingHalfClose()}))}sendMessageWithContext(e,t){this.processingMessage=true;this.requester.sendMessage(t,(r=>{this.processingMessage=false;if(this.processingMetadata){this.pendingMessageContext=e;this.pendingMessage=t}else{this.nextCall.sendMessageWithContext(e,r);this.processPendingHalfClose()}}))}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose((()=>{if(this.processingMetadata||this.processingMessage){this.pendingHalfClose=true}else{this.nextCall.halfClose()}}))}setCredentials(e){this.nextCall.setCredentials(e)}}t.InterceptingCall=InterceptingCall;function getCall(e,t,r){var n,i;const s=(n=r.deadline)!==null&&n!==void 0?n:Infinity;const o=r.host;const a=(i=r.parent)!==null&&i!==void 0?i:null;const l=r.propagate_flags;const c=r.credentials;const u=e.createCall(t,s,o,a,l);if(c){u.setCredentials(c)}return u}class BaseInterceptingCall{constructor(e,t){this.call=e;this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}setCredentials(e){this.call.setCredentials(e)}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${e.message}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${e.message}`,metadata:new n.Metadata};this.call.cancelWithStatus(r.code,r.details);return}(i=t===null||t===void 0?void 0:t.onReceiveMessage)===null||i===void 0?void 0:i.call(t,o)},onReceiveStatus:e=>{var n,i;if(r){(n=t===null||t===void 0?void 0:t.onReceiveStatus)===null||n===void 0?void 0:n.call(t,r)}else{(i=t===null||t===void 0?void 0:t.onReceiveStatus)===null||i===void 0?void 0:i.call(t,e)}}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class BaseUnaryInterceptingCall extends BaseInterceptingCall{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=false;const s={onReceiveMetadata:(n=(r=t===null||t===void 0?void 0:t.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e=>{},onReceiveMessage:e=>{var r;i=true;(r=t===null||t===void 0?void 0:t.onReceiveMessage)===null||r===void 0?void 0:r.call(t,e)},onReceiveStatus:e=>{var r,n;if(!i){(r=t===null||t===void 0?void 0:t.onReceiveMessage)===null||r===void 0?void 0:r.call(t,null)}(n=t===null||t===void 0?void 0:t.onReceiveStatus)===null||n===void 0?void 0:n.call(t,e)}};super.start(e,s);this.call.startRead()}}class BaseStreamingInterceptingCall extends BaseInterceptingCall{}function getBottomInterceptingCall(e,t,r){const n=getCall(e,r.path,t);if(r.responseStream){return new BaseStreamingInterceptingCall(n,r)}else{return new BaseUnaryInterceptingCall(n,r)}}function getInterceptingCall(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0){throw new InterceptorConfigurationError("Both interceptors and interceptor_providers were passed as options "+"to the client constructor. Only one of these is allowed.")}if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0){throw new InterceptorConfigurationError("Both interceptors and interceptor_providers were passed as call "+"options. Only one of these is allowed.")}let i=[];if(e.callInterceptors.length>0||e.callInterceptorProviders.length>0){i=[].concat(e.callInterceptors,e.callInterceptorProviders.map((e=>e(t)))).filter((e=>e))}else{i=[].concat(e.clientInterceptors,e.clientInterceptorProviders.map((e=>e(t)))).filter((e=>e))}const s=Object.assign({},r,{method_definition:t});const o=i.reduceRight(((e,t)=>r=>t(r,e)),(e=>getBottomInterceptingCall(n,e,t)));return o(s)}t.getInterceptingCall=getInterceptingCall},3262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Client=void 0;const n=r(4700);const i=r(3380);const s=r(4822);const o=r(6130);const a=r(8940);const l=r(5279);const c=Symbol();const u=Symbol();const d=Symbol();const f=Symbol();function isFunction(e){return typeof e==="function"}class Client{constructor(e,t,r={}){var n,s;r=Object.assign({},r);this[u]=(n=r.interceptors)!==null&&n!==void 0?n:[];delete r.interceptors;this[d]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[];delete r.interceptor_providers;if(this[u].length>0&&this[d].length>0){throw new Error("Both interceptors and interceptor_providers were passed as options "+"to the client constructor. Only one of these is allowed.")}this[f]=r.callInvocationTransformer;delete r.callInvocationTransformer;if(r.channelOverride){this[c]=r.channelOverride}else if(r.channelFactoryOverride){const n=r.channelFactoryOverride;delete r.channelFactoryOverride;this[c]=n(e,t,r)}else{this[c]=new i.ChannelImplementation(e,t,r)}}close(){this[c].close()}getChannel(){return this[c]}waitForReady(e,t){const checkState=r=>{if(r){t(new Error("Failed to connect before the deadline"));return}let n;try{n=this[c].getConnectivityState(true)}catch(e){t(new Error("The channel has been closed"));return}if(n===s.ConnectivityState.READY){t()}else{try{this[c].watchConnectivityState(n,e,checkState)}catch(e){t(new Error("The channel has been closed"))}}};setImmediate(checkState)}checkOptionalUnaryResponseArguments(e,t,r){if(isFunction(e)){return{metadata:new a.Metadata,options:{},callback:e}}else if(isFunction(t)){if(e instanceof a.Metadata){return{metadata:e,options:{},callback:t}}else{return{metadata:new a.Metadata,options:e,callback:t}}}else{if(!(e instanceof a.Metadata&&t instanceof Object&&isFunction(r))){throw new Error("Incorrect arguments passed")}return{metadata:e,options:t,callback:r}}}makeUnaryRequest(e,t,r,i,s,a,h){var p,m;const g=this.checkOptionalUnaryResponseArguments(s,a,h);const y={path:e,requestStream:false,responseStream:false,requestSerialize:t,responseDeserialize:r};let v={argument:i,metadata:g.metadata,call:new n.ClientUnaryCallImpl,channel:this[c],methodDefinition:y,callOptions:g.options,callback:g.callback};if(this[f]){v=this[f](v)}const b=v.call;const S={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:(p=v.callOptions.interceptors)!==null&&p!==void 0?p:[],callInterceptorProviders:(m=v.callOptions.interceptor_providers)!==null&&m!==void 0?m:[]};const _=l.getInterceptingCall(S,v.methodDefinition,v.callOptions,v.channel);b.call=_;if(v.callOptions.credentials){_.setCredentials(v.callOptions.credentials)}let T=null;let E=false;const O=(new Error).stack.split("\n").slice(1).join("\n");_.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){if(T!==null){_.cancelWithStatus(o.Status.INTERNAL,"Too many responses received")}T=e},onReceiveStatus(e){if(E){return}E=true;if(e.code===o.Status.OK){if(T===null){v.callback(n.callErrorFromStatus({code:o.Status.INTERNAL,details:"No message received",metadata:e.metadata},O))}else{v.callback(null,T)}}else{v.callback(n.callErrorFromStatus(e,O))}b.emit("status",e)}});_.sendMessage(i);_.halfClose();return b}makeClientStreamRequest(e,t,r,i,s,a){var h,p;const m=this.checkOptionalUnaryResponseArguments(i,s,a);const g={path:e,requestStream:true,responseStream:false,requestSerialize:t,responseDeserialize:r};let y={metadata:m.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[c],methodDefinition:g,callOptions:m.options,callback:m.callback};if(this[f]){y=this[f](y)}const v=y.call;const b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:(h=y.callOptions.interceptors)!==null&&h!==void 0?h:[],callInterceptorProviders:(p=y.callOptions.interceptor_providers)!==null&&p!==void 0?p:[]};const S=l.getInterceptingCall(b,y.methodDefinition,y.callOptions,y.channel);v.call=S;if(y.callOptions.credentials){S.setCredentials(y.callOptions.credentials)}let _=null;let T=false;const E=(new Error).stack.split("\n").slice(1).join("\n");S.start(y.metadata,{onReceiveMetadata:e=>{v.emit("metadata",e)},onReceiveMessage(e){if(_!==null){S.cancelWithStatus(o.Status.INTERNAL,"Too many responses received")}_=e},onReceiveStatus(e){if(T){return}T=true;if(e.code===o.Status.OK){if(_===null){y.callback(n.callErrorFromStatus({code:o.Status.INTERNAL,details:"No message received",metadata:e.metadata},E))}else{y.callback(null,_)}}else{y.callback(n.callErrorFromStatus(e,E))}v.emit("status",e)}});return v}checkMetadataAndOptions(e,t){let r;let n;if(e instanceof a.Metadata){r=e;if(t){n=t}else{n={}}}else{if(e){n=e}else{n={}}r=new a.Metadata}return{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,a){var h,p;const m=this.checkMetadataAndOptions(s,a);const g={path:e,requestStream:false,responseStream:true,requestSerialize:t,responseDeserialize:r};let y={argument:i,metadata:m.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[c],methodDefinition:g,callOptions:m.options};if(this[f]){y=this[f](y)}const v=y.call;const b={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:(h=y.callOptions.interceptors)!==null&&h!==void 0?h:[],callInterceptorProviders:(p=y.callOptions.interceptor_providers)!==null&&p!==void 0?p:[]};const S=l.getInterceptingCall(b,y.methodDefinition,y.callOptions,y.channel);v.call=S;if(y.callOptions.credentials){S.setCredentials(y.callOptions.credentials)}let _=false;const T=(new Error).stack.split("\n").slice(1).join("\n");S.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(_){return}_=true;v.push(null);if(e.code!==o.Status.OK){v.emit("error",n.callErrorFromStatus(e,T))}v.emit("status",e)}});S.sendMessage(i);S.halfClose();return v}makeBidiStreamRequest(e,t,r,i,s){var a,h;const p=this.checkMetadataAndOptions(i,s);const m={path:e,requestStream:true,responseStream:true,requestSerialize:t,responseDeserialize:r};let g={metadata:p.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[c],methodDefinition:m,callOptions:p.options};if(this[f]){g=this[f](g)}const y=g.call;const v={clientInterceptors:this[u],clientInterceptorProviders:this[d],callInterceptors:(a=g.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(h=g.callOptions.interceptor_providers)!==null&&h!==void 0?h:[]};const b=l.getInterceptingCall(v,g.methodDefinition,g.callOptions,g.channel);y.call=b;if(g.callOptions.credentials){b.setCredentials(g.callOptions.credentials)}let S=false;const _=(new Error).stack.split("\n").slice(1).join("\n");b.start(g.metadata,{onReceiveMetadata(e){y.emit("metadata",e)},onReceiveMessage(e){y.push(e)},onReceiveStatus(e){if(S){return}S=true;y.push(null);if(e.code!==o.Status.OK){y.emit("error",n.callErrorFromStatus(e,_))}y.emit("status",e)}});return y}}t.Client=Client},8489:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompressionAlgorithms=void 0;var r;(function(e){e[e["identity"]=0]="identity";e[e["deflate"]=1]="deflate";e[e["gzip"]=2]="gzip"})(r=t.CompressionAlgorithms||(t.CompressionAlgorithms={}))},9503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompressionFilterFactory=t.CompressionFilter=void 0;const n=r(9796);const i=r(8489);const s=r(6130);const o=r(6273);const a=r(9768);const isCompressionAlgorithmKey=e=>typeof e==="number"&&typeof i.CompressionAlgorithms[e]==="string";class CompressionHandler{async writeMessage(e,t){let r=e;if(t){r=await this.compressMessage(r)}const n=Buffer.allocUnsafe(r.length+5);n.writeUInt8(t?1:0,0);n.writeUInt32BE(r.length,1);r.copy(n,5);return n}async readMessage(e){const t=e.readUInt8(0)===1;let r=e.slice(5);if(t){r=await this.decompressMessage(r)}return r}}class IdentityHandler extends CompressionHandler{async compressMessage(e){return e}async writeMessage(e,t){const r=Buffer.allocUnsafe(e.length+5);r.writeUInt8(0,0);r.writeUInt32BE(e.length,1);e.copy(r,5);return r}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}}class DeflateHandler extends CompressionHandler{compressMessage(e){return new Promise(((t,r)=>{n.deflate(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.inflate(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}}class GzipHandler extends CompressionHandler{compressMessage(e){return new Promise(((t,r)=>{n.gzip(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}decompressMessage(e){return new Promise(((t,r)=>{n.unzip(e,((e,n)=>{if(e){r(e)}else{t(n)}}))}))}}class UnknownHandler extends CompressionHandler{constructor(e){super();this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}}function getCompressionHandler(e){switch(e){case"identity":return new IdentityHandler;case"deflate":return new DeflateHandler;case"gzip":return new GzipHandler;default:return new UnknownHandler(e)}}class CompressionFilter extends o.BaseFilter{constructor(e,t){var r;super();this.sharedFilterConfig=t;this.sendCompression=new IdentityHandler;this.receiveCompression=new IdentityHandler;this.currentCompressionAlgorithm="identity";const n=e["grpc.default_compression_algorithm"];if(n!==undefined){if(isCompressionAlgorithmKey(n)){const e=i.CompressionAlgorithms[n];const s=(r=t.serverSupportedEncodingHeader)===null||r===void 0?void 0:r.split(",");if(!s||s.includes(e)){this.currentCompressionAlgorithm=e;this.sendCompression=getCompressionHandler(this.currentCompressionAlgorithm)}}else{a.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${n}`)}}}async sendMetadata(e){const t=await e;t.set("grpc-accept-encoding","identity,deflate,gzip");t.set("accept-encoding","identity");if(this.currentCompressionAlgorithm==="identity"){t.remove("grpc-encoding")}else{t.set("grpc-encoding",this.currentCompressionAlgorithm)}return t}receiveMetadata(e){const t=e.get("grpc-encoding");if(t.length>0){const e=t[0];if(typeof e==="string"){this.receiveCompression=getCompressionHandler(e)}}e.remove("grpc-encoding");const r=e.get("grpc-accept-encoding")[0];if(r){this.sharedFilterConfig.serverSupportedEncodingHeader=r;const e=r.split(",");if(!e.includes(this.currentCompressionAlgorithm)){this.sendCompression=new IdentityHandler;this.currentCompressionAlgorithm="identity"}}e.remove("grpc-accept-encoding");return e}async sendMessage(e){var t;const r=await e;let n;if(this.sendCompression instanceof IdentityHandler){n=false}else{n=(((t=r.flags)!==null&&t!==void 0?t:0)&2)===0}return{message:await this.sendCompression.writeMessage(r.message,n),flags:r.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=CompressionFilter;class CompressionFilterFactory{constructor(e,t){this.channel=e;this.options=t;this.sharedFilterConfig={}}createFilter(e){return new CompressionFilter(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=CompressionFilterFactory},4822:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConnectivityState=void 0;var r;(function(e){e[e["IDLE"]=0]="IDLE";e[e["CONNECTING"]=1]="CONNECTING";e[e["READY"]=2]="READY";e[e["TRANSIENT_FAILURE"]=3]="TRANSIENT_FAILURE";e[e["SHUTDOWN"]=4]="SHUTDOWN"})(r=t.ConnectivityState||(t.ConnectivityState={}))},6130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0;var r;(function(e){e[e["OK"]=0]="OK";e[e["CANCELLED"]=1]="CANCELLED";e[e["UNKNOWN"]=2]="UNKNOWN";e[e["INVALID_ARGUMENT"]=3]="INVALID_ARGUMENT";e[e["DEADLINE_EXCEEDED"]=4]="DEADLINE_EXCEEDED";e[e["NOT_FOUND"]=5]="NOT_FOUND";e[e["ALREADY_EXISTS"]=6]="ALREADY_EXISTS";e[e["PERMISSION_DENIED"]=7]="PERMISSION_DENIED";e[e["RESOURCE_EXHAUSTED"]=8]="RESOURCE_EXHAUSTED";e[e["FAILED_PRECONDITION"]=9]="FAILED_PRECONDITION";e[e["ABORTED"]=10]="ABORTED";e[e["OUT_OF_RANGE"]=11]="OUT_OF_RANGE";e[e["UNIMPLEMENTED"]=12]="UNIMPLEMENTED";e[e["INTERNAL"]=13]="INTERNAL";e[e["UNAVAILABLE"]=14]="UNAVAILABLE";e[e["DATA_LOSS"]=15]="DATA_LOSS";e[e["UNAUTHENTICATED"]=16]="UNAUTHENTICATED"})(r=t.Status||(t.Status={}));var n;(function(e){e[e["DEBUG"]=0]="DEBUG";e[e["INFO"]=1]="INFO";e[e["ERROR"]=2]="ERROR";e[e["NONE"]=3]="NONE"})(n=t.LogVerbosity||(t.LogVerbosity={}));var i;(function(e){e[e["DEADLINE"]=1]="DEADLINE";e[e["CENSUS_STATS_CONTEXT"]=2]="CENSUS_STATS_CONTEXT";e[e["CENSUS_TRACING_CONTEXT"]=4]="CENSUS_TRACING_CONTEXT";e[e["CANCELLATION"]=8]="CANCELLATION";e[e["DEFAULTS"]=65535]="DEFAULTS"})(i=t.Propagate||(t.Propagate={}));t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024},5855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeadlineFilterFactory=t.DeadlineFilter=void 0;const n=r(6130);const i=r(6273);const s=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function getDeadline(e){const t=(new Date).getTime();const r=Math.max(e-t,0);for(const[e,t]of s){const n=r/t;if(n<1e8){return String(Math.ceil(n))+e}}throw new Error("Deadline is too far in the future")}class DeadlineFilter extends i.BaseFilter{constructor(e,t){super();this.channel=e;this.callStream=t;this.timer=null;this.deadline=Infinity;this.retreiveDeadline();this.runTimer()}retreiveDeadline(){const e=this.callStream.getDeadline();if(e instanceof Date){this.deadline=e.getTime()}else{this.deadline=e}}runTimer(){var e,t;if(this.timer){clearTimeout(this.timer)}const r=(new Date).getTime();const i=this.deadline-r;if(i<=0){process.nextTick((()=>{this.callStream.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")}))}else if(this.deadline!==Infinity){this.timer=setTimeout((()=>{this.callStream.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")}),i);(t=(e=this.timer).unref)===null||t===void 0?void 0:t.call(e)}}refresh(){this.retreiveDeadline();this.runTimer()}async sendMetadata(e){if(this.deadline===Infinity){return e}const t=await e;const r=getDeadline(this.deadline);t.set("grpc-timeout",r);return t}receiveTrailers(e){if(this.timer){clearTimeout(this.timer)}return e}}t.DeadlineFilter=DeadlineFilter;class DeadlineFilterFactory{constructor(e){this.channel=e}createFilter(e){return new DeadlineFilter(this.channel,e)}}t.DeadlineFilterFactory=DeadlineFilterFactory},8598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDuration=t.durationToMs=t.msToDuration=void 0;function msToDuration(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}}t.msToDuration=msToDuration;function durationToMs(e){return e.seconds*1e3+e.nanos/1e6|0}t.durationToMs=durationToMs;function isDuration(e){return typeof e.seconds==="number"&&typeof e.nanos==="number"}t.isDuration=isDuration},7066:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var n=r(9768);Object.defineProperty(t,"trace",{enumerable:true,get:function(){return n.trace}});Object.defineProperty(t,"log",{enumerable:true,get:function(){return n.log}});var i=r(6280);Object.defineProperty(t,"registerResolver",{enumerable:true,get:function(){return i.registerResolver}});var s=r(3641);Object.defineProperty(t,"uriToString",{enumerable:true,get:function(){return s.uriToString}});var o=r(8598);Object.defineProperty(t,"durationToMs",{enumerable:true,get:function(){return o.durationToMs}});var a=r(9017);Object.defineProperty(t,"BackoffTimeout",{enumerable:true,get:function(){return a.BackoffTimeout}});var l=r(6153);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:true,get:function(){return l.createChildChannelControlHelper}});Object.defineProperty(t,"registerLoadBalancerType",{enumerable:true,get:function(){return l.registerLoadBalancerType}});Object.defineProperty(t,"getFirstUsableConfig",{enumerable:true,get:function(){return l.getFirstUsableConfig}});Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:true,get:function(){return l.validateLoadBalancingConfig}});var c=r(8210);Object.defineProperty(t,"subchannelAddressToString",{enumerable:true,get:function(){return c.subchannelAddressToString}});var u=r(7027);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:true,get:function(){return u.ChildLoadBalancerHandler}});var d=r(2233);Object.defineProperty(t,"UnavailablePicker",{enumerable:true,get:function(){return d.UnavailablePicker}});Object.defineProperty(t,"QueuePicker",{enumerable:true,get:function(){return d.QueuePicker}});Object.defineProperty(t,"PickResultType",{enumerable:true,get:function(){return d.PickResultType}});var f=r(6273);Object.defineProperty(t,"BaseFilter",{enumerable:true,get:function(){return f.BaseFilter}});var h=r(108);Object.defineProperty(t,"FilterStackFactory",{enumerable:true,get:function(){return h.FilterStackFactory}});var p=r(7749);Object.defineProperty(t,"registerAdminService",{enumerable:true,get:function(){return p.registerAdminService}});var m=r(6785);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:true,get:function(){return m.BaseSubchannelWrapper}});var g=r(6410);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:true,get:function(){return g.OutlierDetectionLoadBalancingConfig}})},108:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilterStackFactory=t.FilterStack=void 0;class FilterStack{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++){t=this.filters[e].sendMetadata(t)}return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveMetadata(t)}return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++){t=this.filters[e].sendMessage(t)}return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveMessage(t)}return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--){t=this.filters[e].receiveTrailers(t)}return t}refresh(){for(const e of this.filters){e.refresh()}}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=FilterStack;class FilterStackFactory{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}createFilter(e){return new FilterStack(this.factories.map((t=>t.createFilter(e))))}}t.FilterStackFactory=FilterStackFactory},6273:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseFilter=void 0;class BaseFilter{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}refresh(){}}t.BaseFilter=BaseFilter},8837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getProxiedConnection=t.mapProxyName=void 0;const n=r(9768);const i=r(6130);const s=r(6280);const o=r(3685);const a=r(4404);const l=r(9768);const c=r(8210);const u=r(3641);const d=r(7310);const f="proxy";function trace(e){l.trace(i.LogVerbosity.DEBUG,f,e)}function getProxyInfo(){let e="";let t="";if(process.env.grpc_proxy){t="grpc_proxy";e=process.env.grpc_proxy}else if(process.env.https_proxy){t="https_proxy";e=process.env.https_proxy}else if(process.env.http_proxy){t="http_proxy";e=process.env.http_proxy}else{return{}}let r;try{r=new d.URL(e)}catch(e){n.log(i.LogVerbosity.ERROR,`cannot parse value of "${t}" env var`);return{}}if(r.protocol!=="http:"){n.log(i.LogVerbosity.ERROR,`"${r.protocol}" scheme not supported in proxy URI`);return{}}let s=null;if(r.username){if(r.password){n.log(i.LogVerbosity.INFO,"userinfo found in proxy URI");s=`${r.username}:${r.password}`}else{s=r.username}}const o=r.hostname;let a=r.port;if(a===""){a="80"}const l={address:`${o}:${a}`};if(s){l.creds=s}trace("Proxy server "+l.address+" set by environment variable "+t);return l}function getNoProxyHostList(){let e=process.env.no_grpc_proxy;let t="no_grpc_proxy";if(!e){e=process.env.no_proxy;t="no_proxy"}if(e){trace("No proxy server list set by environment variable "+t);return e.split(",")}else{return[]}}function mapProxyName(e,t){var r;const n={target:e,extraOptions:{}};if(((r=t["grpc.enable_http_proxy"])!==null&&r!==void 0?r:1)===0){return n}if(e.scheme==="unix"){return n}const i=getProxyInfo();if(!i.address){return n}const s=u.splitHostPort(e.path);if(!s){return n}const o=s.host;for(const t of getNoProxyHostList()){if(t===o){trace("Not using proxy for target in no_proxy list: "+u.uriToString(e));return n}}const a={"grpc.http_connect_target":u.uriToString(e)};if(i.creds){a["grpc.http_connect_creds"]=i.creds}return{target:{scheme:"dns",path:i.address},extraOptions:a}}t.mapProxyName=mapProxyName;function getProxiedConnection(e,t,r){if(!("grpc.http_connect_target"in t)){return Promise.resolve({})}const l=t["grpc.http_connect_target"];const d=u.parseUri(l);if(d===null){return Promise.resolve({})}const f={method:"CONNECT",path:d.path};const h={Host:d.path};if(c.isTcpSubchannelAddress(e)){f.host=e.host;f.port=e.port}else{f.socketPath=e.path}if("grpc.http_connect_creds"in t){h["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")}f.headers=h;const p=c.subchannelAddressToString(e);trace("Using proxy "+p+" to connect to "+f.path);return new Promise(((e,t)=>{const l=o.request(f);l.once("connect",((o,c,h)=>{var m;l.removeAllListeners();c.removeAllListeners();if(o.statusCode===200){trace("Successfully connected to "+f.path+" through proxy "+p);if("secureContext"in r){const n=s.getDefaultAuthority(d);const i=u.splitHostPort(n);const o=(m=i===null||i===void 0?void 0:i.host)!==null&&m!==void 0?m:n;const l=a.connect(Object.assign({host:o,servername:o,socket:c},r),(()=>{trace("Successfully established a TLS connection to "+f.path+" through proxy "+p);e({socket:l,realTarget:d})}));l.on("error",(e=>{trace("Failed to establish a TLS connection to "+f.path+" through proxy "+p+" with error "+e.message);t()}))}else{trace("Successfully established a plaintext connection to "+f.path+" through proxy "+p);e({socket:c,realTarget:d})}}else{n.log(i.LogVerbosity.ERROR,"Failed to connect to "+f.path+" through proxy "+p+" with status "+o.statusCode);t()}}));l.once("error",(e=>{l.removeAllListeners();n.log(i.LogVerbosity.ERROR,"Failed to connect to proxy "+p+" with error "+e.message);t()}));l.end()}))}t.getProxiedConnection=getProxiedConnection},1823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.experimental=t.StatusBuilder=t.getClientChannel=t.ServerCredentials=t.Server=t.setLogVerbosity=t.setLogger=t.load=t.loadObject=t.CallCredentials=t.ChannelCredentials=t.waitForClientReady=t.closeClient=t.Channel=t.makeGenericClientConstructor=t.makeClientConstructor=t.loadPackageDefinition=t.Client=t.compressionAlgorithms=t.propagate=t.connectivityState=t.status=t.logVerbosity=t.Metadata=t.credentials=void 0;const n=r(3334);Object.defineProperty(t,"CallCredentials",{enumerable:true,get:function(){return n.CallCredentials}});const i=r(3380);Object.defineProperty(t,"Channel",{enumerable:true,get:function(){return i.ChannelImplementation}});const s=r(8489);Object.defineProperty(t,"compressionAlgorithms",{enumerable:true,get:function(){return s.CompressionAlgorithms}});const o=r(4822);Object.defineProperty(t,"connectivityState",{enumerable:true,get:function(){return o.ConnectivityState}});const a=r(7275);Object.defineProperty(t,"ChannelCredentials",{enumerable:true,get:function(){return a.ChannelCredentials}});const l=r(3262);Object.defineProperty(t,"Client",{enumerable:true,get:function(){return l.Client}});const c=r(6130);Object.defineProperty(t,"logVerbosity",{enumerable:true,get:function(){return c.LogVerbosity}});Object.defineProperty(t,"status",{enumerable:true,get:function(){return c.Status}});Object.defineProperty(t,"propagate",{enumerable:true,get:function(){return c.Propagate}});const u=r(9768);const d=r(2602);Object.defineProperty(t,"loadPackageDefinition",{enumerable:true,get:function(){return d.loadPackageDefinition}});Object.defineProperty(t,"makeClientConstructor",{enumerable:true,get:function(){return d.makeClientConstructor}});Object.defineProperty(t,"makeGenericClientConstructor",{enumerable:true,get:function(){return d.makeClientConstructor}});const f=r(8940);Object.defineProperty(t,"Metadata",{enumerable:true,get:function(){return f.Metadata}});const h=r(632);Object.defineProperty(t,"Server",{enumerable:true,get:function(){return h.Server}});const p=r(5637);Object.defineProperty(t,"ServerCredentials",{enumerable:true,get:function(){return p.ServerCredentials}});const m=r(7106);Object.defineProperty(t,"StatusBuilder",{enumerable:true,get:function(){return m.StatusBuilder}});t.credentials={combineChannelCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),combineCallCredentials:(e,...t)=>t.reduce(((e,t)=>e.compose(t)),e),createInsecure:a.ChannelCredentials.createInsecure,createSsl:a.ChannelCredentials.createSsl,createFromSecureContext:a.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty};t.closeClient=e=>e.close();t.waitForClientReady=(e,t,r)=>e.waitForReady(t,r);t.loadObject=(e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};t.load=(e,t,r)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};t.setLogger=e=>{u.setLogger(e)};t.setLogVerbosity=e=>{u.setLoggerVerbosity(e)};t.getClientChannel=e=>l.Client.prototype.getChannel.call(e);var g=r(5279);Object.defineProperty(t,"ListenerBuilder",{enumerable:true,get:function(){return g.ListenerBuilder}});Object.defineProperty(t,"RequesterBuilder",{enumerable:true,get:function(){return g.RequesterBuilder}});Object.defineProperty(t,"InterceptingCall",{enumerable:true,get:function(){return g.InterceptingCall}});Object.defineProperty(t,"InterceptorConfigurationError",{enumerable:true,get:function(){return g.InterceptorConfigurationError}});var y=r(859);Object.defineProperty(t,"getChannelzServiceDefinition",{enumerable:true,get:function(){return y.getChannelzServiceDefinition}});Object.defineProperty(t,"getChannelzHandlers",{enumerable:true,get:function(){return y.getChannelzHandlers}});var v=r(7749);Object.defineProperty(t,"addAdminServicesToServer",{enumerable:true,get:function(){return v.addAdminServicesToServer}});const b=r(7066);t.experimental=b;const S=r(8763);const _=r(3964);const T=r(2942);const E=r(4636);const O=r(4579);const C=r(6410);const R=r(859);const A=r(538).i8;(()=>{u.trace(c.LogVerbosity.DEBUG,"index","Loading @grpc/grpc-js version "+A);S.setup();_.setup();T.setup();E.setup();O.setup();C.setup();R.setup()})()},7027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ChildLoadBalancerHandler=void 0;const n=r(6153);const i=r(4822);const s="child_load_balancer_helper";class ChildLoadBalancerHandler{constructor(e){this.channelControlHelper=e;this.currentChild=null;this.pendingChild=null;this.ChildPolicyHelper=class{constructor(e){this.parent=e;this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING){return}(r=this.parent.currentChild)===null||r===void 0?void 0:r.destroy();this.parent.currentChild=this.parent.pendingChild;this.parent.pendingChild=null}else if(!this.calledByCurrentChild()){return}this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;const t=(e=this.parent.pendingChild)!==null&&e!==void 0?e:this.parent.currentChild;if(this.child===t){this.parent.channelControlHelper.requestReresolution()}}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}updateAddressList(e,t,r){let i;if(this.currentChild===null||this.currentChild.getTypeName()!==t.getLoadBalancerName()){const e=new this.ChildPolicyHelper(this);const r=n.createLoadBalancer(t,e);e.setChild(r);if(this.currentChild===null){this.currentChild=r;i=this.currentChild}else{if(this.pendingChild){this.pendingChild.destroy()}this.pendingChild=r;i=this.pendingChild}}else{if(this.pendingChild===null){i=this.currentChild}else{i=this.pendingChild}}i.updateAddressList(e,t,r)}exitIdle(){if(this.currentChild){this.currentChild.exitIdle();if(this.pendingChild){this.pendingChild.exitIdle()}}}resetBackoff(){if(this.currentChild){this.currentChild.resetBackoff();if(this.pendingChild){this.pendingChild.resetBackoff()}}}destroy(){if(this.currentChild){this.currentChild.destroy();this.currentChild=null}if(this.pendingChild){this.pendingChild.destroy();this.pendingChild=null}}getTypeName(){return s}}t.ChildLoadBalancerHandler=ChildLoadBalancerHandler},6410:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;const i=r(4822);const s=r(6130);const o=r(8598);const a=r(7066);const l=r(6273);const c=r(6153);const u=r(7027);const d=r(2233);const f=r(8210);const h=r(6785);const p=r(9768);const m="outlier_detection";function trace(e){p.trace(s.LogVerbosity.DEBUG,m,e)}const g="outlier_detection";const y=((n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&n!==void 0?n:"true")==="true";const v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100};const b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function validateFieldType(e,t,r,n){if(t in e&&typeof e[t]!==r){const i=n?`${n}.${t}`:t;throw new Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function validatePositiveDuration(e,t,r){const n=r?`${r}.${t}`:t;if(t in e){if(!o.isDuration(e[t])){throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`)}if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999)){throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}}function validatePercentage(e,t,r){const n=r?`${r}.${t}`:t;validateFieldType(e,t,"number",r);if(t in e&&!(e[t]>=0&&e[t]<=100)){throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}}class OutlierDetectionLoadBalancingConfig{constructor(e,t,r,n,i,s,o){this.childPolicy=o;this.intervalMs=e!==null&&e!==void 0?e:1e4;this.baseEjectionTimeMs=t!==null&&t!==void 0?t:3e4;this.maxEjectionTimeMs=r!==null&&r!==void 0?r:3e5;this.maxEjectionPercent=n!==null&&n!==void 0?n:10;this.successRateEjection=i?Object.assign(Object.assign({},v),i):null;this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:o.msToDuration(this.intervalMs),base_ejection_time:o.msToDuration(this.baseEjectionTimeMs),max_ejection_time:o.msToDuration(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map((e=>e.toJsonObject()))}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new OutlierDetectionLoadBalancingConfig(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;validatePositiveDuration(e,"interval");validatePositiveDuration(e,"base_ejection_time");validatePositiveDuration(e,"max_ejection_time");validatePercentage(e,"max_ejection_percent");if("success_rate_ejection"in e){if(typeof e.success_rate_ejection!=="object"){throw new Error("outlier detection config success_rate_ejection must be an object")}validateFieldType(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection");validatePercentage(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection");validateFieldType(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection");validateFieldType(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!=="object"){throw new Error("outlier detection config failure_percentage_ejection must be an object")}validatePercentage(e.failure_percentage_ejection,"threshold","failure_percentage_ejection");validatePercentage(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection");validateFieldType(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection");validateFieldType(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new OutlierDetectionLoadBalancingConfig(e.interval?o.durationToMs(e.interval):null,e.base_ejection_time?o.durationToMs(e.base_ejection_time):null,e.max_ejection_time?o.durationToMs(e.max_ejection_time):null,(t=e.max_ejection_percent)!==null&&t!==void 0?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(c.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=OutlierDetectionLoadBalancingConfig;class OutlierDetectionSubchannelWrapper extends h.BaseSubchannelWrapper{constructor(e,t){super(e);this.mapEntry=t;this.stateListeners=[];this.ejected=false;this.refCount=0;this.childSubchannelState=e.getConnectivityState();e.addConnectivityStateListener(((e,t,r)=>{this.childSubchannelState=r;if(!this.ejected){for(const e of this.stateListeners){e(this,t,r)}}}))}getConnectivityState(){if(this.ejected){return i.ConnectivityState.TRANSIENT_FAILURE}else{return this.childSubchannelState}}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);if(t>-1){this.stateListeners.splice(t,1)}}ref(){this.child.ref();this.refCount+=1}unref(){this.child.unref();this.refCount-=1;if(this.refCount<=0){if(this.mapEntry){const e=this.mapEntry.subchannelWrappers.indexOf(this);if(e>=0){this.mapEntry.subchannelWrappers.splice(e,1)}}}}eject(){this.ejected=true;for(const e of this.stateListeners){e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE)}}uneject(){this.ejected=false;for(const e of this.stateListeners){e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState)}}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function createEmptyBucket(){return{success:0,failure:0}}class CallCounter{constructor(){this.activeBucket=createEmptyBucket();this.inactiveBucket=createEmptyBucket()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket;this.activeBucket=createEmptyBucket()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class OutlierDetectionCounterFilter extends l.BaseFilter{constructor(e){super();this.callCounter=e}receiveTrailers(e){if(e.code===s.Status.OK){this.callCounter.addSuccess()}else{this.callCounter.addFailure()}return e}}class OutlierDetectionCounterFilterFactory{constructor(e){this.callCounter=e}createFilter(e){return new OutlierDetectionCounterFilter(this.callCounter)}}class OutlierDetectionPicker{constructor(e,t){this.wrappedPicker=e;this.countCalls=t}pick(e){const t=this.wrappedPicker.pick(e);if(t.pickResultType===d.PickResultType.COMPLETE){const e=t.subchannel;const r=e.getMapEntry();if(r){const n=[...t.extraFilterFactories];if(this.countCalls){n.push(new OutlierDetectionCounterFilterFactory(r.counter))}return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),extraFilterFactories:n})}else{return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()})}}else{return t}}}class OutlierDetectionLoadBalancer{constructor(e){this.addressMap=new Map;this.latestConfig=null;this.timerStartTime=null;this.childBalancer=new u.ChildLoadBalancerHandler(a.createChildChannelControlHelper(e,{createSubchannel:(t,r)=>{const n=e.createSubchannel(t,r);const i=this.addressMap.get(f.subchannelAddressToString(t));const s=new OutlierDetectionSubchannelWrapper(n,i);if((i===null||i===void 0?void 0:i.currentEjectionTimestamp)!==null){s.eject()}i===null||i===void 0?void 0:i.subchannelWrappers.push(s);return s},updateState:(t,r)=>{if(t===i.ConnectivityState.READY){e.updateState(t,new OutlierDetectionPicker(r,this.isCountingEnabled()))}else{e.updateState(t,r)}}}));this.ejectionTimer=setInterval((()=>{}),0);clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(const t of this.addressMap.values()){if(t.currentEjectionTimestamp!==null){e+=1}}return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig){return}const t=this.latestConfig.getSuccessRateEjectionConfig();if(!t){return}trace("Running success rate check");const r=t.request_volume;let n=0;const i=[];for(const e of this.addressMap.values()){const t=e.counter.getLastSuccesses();const s=e.counter.getLastFailures();if(t+s>=r){n+=1;i.push(t/(t+s))}}trace("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]");if(n<t.minimum_hosts){return}const s=i.reduce(((e,t)=>e+t))/i.length;let o=0;for(const e of i){const t=e-s;o+=t*t}const a=o/i.length;const l=Math.sqrt(a);const c=s-l*(t.stdev_factor/1e3);trace("stdev="+l+" ejectionThreshold="+c);for(const[n,i]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent()){break}const s=i.counter.getLastSuccesses();const o=i.counter.getLastFailures();if(s+o<r){continue}const a=s/(s+o);trace("Checking candidate "+n+" successRate="+a);if(a<c){const r=Math.random()*100;trace("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage);if(r<t.enforcement_percentage){trace("Ejecting candidate "+n);this.eject(i,e)}}}}runFailurePercentageCheck(e){if(!this.latestConfig){return}const t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t){return}trace("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(const e of this.addressMap.values()){const n=e.counter.getLastSuccesses();const i=e.counter.getLastFailures();if(n+i>=t.request_volume){r+=1}}if(r<t.minimum_hosts){return}for(const[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent()){break}const i=n.counter.getLastSuccesses();const s=n.counter.getLastFailures();trace("Candidate successes="+i+" failures="+s);if(i+s<t.request_volume){continue}const o=s*100/(s+i);if(o>t.threshold){const i=Math.random()*100;trace("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage);if(i<t.enforcement_percentage){trace("Ejecting candidate "+r);this.eject(n,e)}}}}eject(e,t){e.currentEjectionTimestamp=new Date;e.ejectionTimeMultiplier+=1;for(const t of e.subchannelWrappers){t.eject()}}uneject(e){e.currentEjectionTimestamp=null;for(const t of e.subchannelWrappers){t.uneject()}}switchAllBuckets(){for(const e of this.addressMap.values()){e.counter.switchBuckets()}}startTimer(e){this.ejectionTimer=setTimeout((()=>this.runChecks()),e)}runChecks(){const e=new Date;trace("Ejection timer running");this.switchAllBuckets();if(!this.latestConfig){return}this.timerStartTime=e;this.startTimer(this.latestConfig.getIntervalMs());this.runSuccessRateCheck(e);this.runFailurePercentageCheck(e);for(const[e,t]of this.addressMap.entries()){if(t.currentEjectionTimestamp===null){if(t.ejectionTimeMultiplier>0){t.ejectionTimeMultiplier-=1}}else{const r=this.latestConfig.getBaseEjectionTimeMs();const n=this.latestConfig.getMaxEjectionTimeMs();const i=new Date(t.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(r*t.ejectionTimeMultiplier,Math.max(r,n)));if(i<new Date){trace("Unejecting "+e);this.uneject(t)}}}}updateAddressList(e,t,r){if(!(t instanceof OutlierDetectionLoadBalancingConfig)){return}const n=new Set;for(const t of e){n.add(f.subchannelAddressToString(t))}for(const e of n){if(!this.addressMap.has(e)){trace("Adding map entry for "+e);this.addressMap.set(e,{counter:new CallCounter,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]})}}for(const e of this.addressMap.keys()){if(!n.has(e)){trace("Removing map entry for "+e);this.addressMap.delete(e)}}const i=c.getFirstUsableConfig(t.getChildPolicy(),true);this.childBalancer.updateAddressList(e,i,r);if(t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig()){if(this.timerStartTime){trace("Previous timer existed. Replacing timer");clearTimeout(this.ejectionTimer);const e=t.getIntervalMs()-((new Date).getTime()-this.timerStartTime.getTime());this.startTimer(e)}else{trace("Starting new timer");this.timerStartTime=new Date;this.startTimer(t.getIntervalMs());this.switchAllBuckets()}}else{trace("Counting disabled. Cancelling timer.");this.timerStartTime=null;clearTimeout(this.ejectionTimer);for(const e of this.addressMap.values()){this.uneject(e);e.ejectionTimeMultiplier=0}}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer);this.childBalancer.destroy()}getTypeName(){return g}}t.OutlierDetectionLoadBalancer=OutlierDetectionLoadBalancer;function setup(){if(y){a.registerLoadBalancerType(g,OutlierDetectionLoadBalancer,OutlierDetectionLoadBalancingConfig)}}t.setup=setup},4636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=t.PickFirstLoadBalancer=t.PickFirstLoadBalancingConfig=void 0;const n=r(6153);const i=r(4822);const s=r(2233);const o=r(8210);const a=r(9768);const l=r(6130);const c="pick_first";function trace(e){a.trace(l.LogVerbosity.DEBUG,c,e)}const u="pick_first";const d=250;class PickFirstLoadBalancingConfig{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new PickFirstLoadBalancingConfig}}t.PickFirstLoadBalancingConfig=PickFirstLoadBalancingConfig;class PickFirstPicker{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,extraFilterFactories:[],onCallStarted:null}}}class PickFirstLoadBalancer{constructor(e){this.channelControlHelper=e;this.latestAddressList=[];this.subchannels=[];this.currentState=i.ConnectivityState.IDLE;this.currentSubchannelIndex=0;this.currentPick=null;this.triedAllSubchannels=false;this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0};this.subchannelStateListener=(e,t,r)=>{this.subchannelStateCounts[t]-=1;this.subchannelStateCounts[r]+=1;if(e===this.subchannels[this.currentSubchannelIndex]&&r===i.ConnectivityState.TRANSIENT_FAILURE){this.startNextSubchannelConnecting()}if(r===i.ConnectivityState.READY){this.pickSubchannel(e);return}else{if(this.triedAllSubchannels&&this.subchannelStateCounts[i.ConnectivityState.IDLE]===this.subchannels.length){this.resetSubchannelList(false);this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this));return}if(this.currentPick===null){if(this.triedAllSubchannels){let e;if(this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0){e=i.ConnectivityState.CONNECTING}else if(this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0){e=i.ConnectivityState.TRANSIENT_FAILURE}else{e=i.ConnectivityState.IDLE}if(e!==this.currentState){if(e===i.ConnectivityState.TRANSIENT_FAILURE){this.updateState(e,new s.UnavailablePicker)}else{this.updateState(e,new s.QueuePicker(this))}}}else{this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}}}};this.pickedSubchannelStateListener=(e,t,r)=>{if(r!==i.ConnectivityState.READY){this.currentPick=null;e.unref();e.removeConnectivityStateListener(this.pickedSubchannelStateListener);this.channelControlHelper.removeChannelzChild(e.getChannelzRef());if(this.subchannels.length>0){if(this.triedAllSubchannels){let e;if(this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0){e=i.ConnectivityState.CONNECTING}else if(this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0){e=i.ConnectivityState.TRANSIENT_FAILURE}else{e=i.ConnectivityState.IDLE}if(e===i.ConnectivityState.TRANSIENT_FAILURE){this.updateState(e,new s.UnavailablePicker)}else{this.updateState(e,new s.QueuePicker(this))}}else{this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}}else{this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}}};this.connectionDelayTimeout=setTimeout((()=>{}),0);clearTimeout(this.connectionDelayTimeout)}startNextSubchannelConnecting(){if(this.triedAllSubchannels){return}for(const[e,t]of this.subchannels.entries()){if(e>this.currentSubchannelIndex){const r=t.getConnectivityState();if(r===i.ConnectivityState.IDLE||r===i.ConnectivityState.CONNECTING){this.startConnecting(e);return}}}this.triedAllSubchannels=true}startConnecting(e){clearTimeout(this.connectionDelayTimeout);this.currentSubchannelIndex=e;if(this.subchannels[e].getConnectivityState()===i.ConnectivityState.IDLE){trace("Start connecting to subchannel with address "+this.subchannels[e].getAddress());process.nextTick((()=>{this.subchannels[e].startConnecting()}))}this.connectionDelayTimeout=setTimeout((()=>{this.startNextSubchannelConnecting()}),d)}pickSubchannel(e){trace("Pick subchannel with address "+e.getAddress());if(this.currentPick!==null){this.currentPick.unref();this.currentPick.removeConnectivityStateListener(this.pickedSubchannelStateListener)}this.currentPick=e;this.updateState(i.ConnectivityState.READY,new PickFirstPicker(e));e.addConnectivityStateListener(this.pickedSubchannelStateListener);e.ref();this.channelControlHelper.addChannelzChild(e.getChannelzRef());this.resetSubchannelList();clearTimeout(this.connectionDelayTimeout)}updateState(e,t){trace(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]);this.currentState=e;this.channelControlHelper.updateState(e,t)}resetSubchannelList(e=true){for(const e of this.subchannels){e.removeConnectivityStateListener(this.subchannelStateListener);e.unref();this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}this.currentSubchannelIndex=0;this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0};this.subchannels=[];if(e){this.triedAllSubchannels=false}}connectToAddressList(){this.resetSubchannelList();trace("Connect to address list "+this.latestAddressList.map((e=>o.subchannelAddressToString(e))));this.subchannels=this.latestAddressList.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels){e.ref();this.channelControlHelper.addChannelzChild(e.getChannelzRef())}for(const e of this.subchannels){e.addConnectivityStateListener(this.subchannelStateListener);this.subchannelStateCounts[e.getConnectivityState()]+=1;if(e.getConnectivityState()===i.ConnectivityState.READY){this.pickSubchannel(e);this.resetSubchannelList();return}}for(const[e,t]of this.subchannels.entries()){const r=t.getConnectivityState();if(r===i.ConnectivityState.IDLE||r===i.ConnectivityState.CONNECTING){this.startConnecting(e);if(this.currentPick===null){this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}return}}if(this.currentPick===null){this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker)}}updateAddressList(e,t){if(this.subchannels.length===0||!this.latestAddressList.every(((t,r)=>e[r]===t))){this.latestAddressList=e;this.connectToAddressList()}}exitIdle(){if(this.currentState===i.ConnectivityState.IDLE||this.triedAllSubchannels){this.channelControlHelper.requestReresolution()}for(const e of this.subchannels){e.startConnecting()}if(this.currentState===i.ConnectivityState.IDLE){if(this.latestAddressList.length>0){this.connectToAddressList()}}}resetBackoff(){}destroy(){this.resetSubchannelList();if(this.currentPick!==null){const e=this.currentPick;e.unref();e.removeConnectivityStateListener(this.pickedSubchannelStateListener);this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}getTypeName(){return u}}t.PickFirstLoadBalancer=PickFirstLoadBalancer;function setup(){n.registerLoadBalancerType(u,PickFirstLoadBalancer,PickFirstLoadBalancingConfig);n.registerDefaultLoadBalancerType(u)}t.setup=setup},4579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=t.RoundRobinLoadBalancer=void 0;const n=r(6153);const i=r(4822);const s=r(2233);const o=r(8210);const a=r(9768);const l=r(6130);const c="round_robin";function trace(e){a.trace(l.LogVerbosity.DEBUG,c,e)}const u="round_robin";class RoundRobinLoadBalancingConfig{getLoadBalancerName(){return u}constructor(){}toJsonObject(){return{[u]:{}}}static createFromJson(e){return new RoundRobinLoadBalancingConfig}}class RoundRobinPicker{constructor(e,t=0){this.subchannelList=e;this.nextIndex=t}pick(e){const t=this.subchannelList[this.nextIndex];this.nextIndex=(this.nextIndex+1)%this.subchannelList.length;return{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,extraFilterFactories:[],onCallStarted:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class RoundRobinLoadBalancer{constructor(e){this.channelControlHelper=e;this.subchannels=[];this.currentState=i.ConnectivityState.IDLE;this.currentReadyPicker=null;this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0};this.subchannelStateListener=(e,t,r)=>{this.subchannelStateCounts[t]-=1;this.subchannelStateCounts[r]+=1;this.calculateAndUpdateState();if(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE){this.channelControlHelper.requestReresolution();e.startConnecting()}}}calculateAndUpdateState(){if(this.subchannelStateCounts[i.ConnectivityState.READY]>0){const e=this.subchannels.filter((e=>e.getConnectivityState()===i.ConnectivityState.READY));let t=0;if(this.currentReadyPicker!==null){t=e.indexOf(this.currentReadyPicker.peekNextSubchannel());if(t<0){t=0}}this.updateState(i.ConnectivityState.READY,new RoundRobinPicker(e,t))}else if(this.subchannelStateCounts[i.ConnectivityState.CONNECTING]>0){this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}else if(this.subchannelStateCounts[i.ConnectivityState.TRANSIENT_FAILURE]>0){this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker)}else{this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}}updateState(e,t){trace(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]);if(e===i.ConnectivityState.READY){this.currentReadyPicker=t}else{this.currentReadyPicker=null}this.currentState=e;this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(const e of this.subchannels){e.removeConnectivityStateListener(this.subchannelStateListener);e.unref();this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}this.subchannelStateCounts={[i.ConnectivityState.CONNECTING]:0,[i.ConnectivityState.IDLE]:0,[i.ConnectivityState.READY]:0,[i.ConnectivityState.SHUTDOWN]:0,[i.ConnectivityState.TRANSIENT_FAILURE]:0};this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList();trace("Connect to address list "+e.map((e=>o.subchannelAddressToString(e))));this.subchannels=e.map((e=>this.channelControlHelper.createSubchannel(e,{})));for(const e of this.subchannels){e.ref();e.addConnectivityStateListener(this.subchannelStateListener);this.channelControlHelper.addChannelzChild(e.getChannelzRef());const t=e.getConnectivityState();this.subchannelStateCounts[t]+=1;if(t===i.ConnectivityState.IDLE||t===i.ConnectivityState.TRANSIENT_FAILURE){e.startConnecting()}}this.calculateAndUpdateState()}exitIdle(){for(const e of this.subchannels){e.startConnecting()}}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return u}}t.RoundRobinLoadBalancer=RoundRobinLoadBalancer;function setup(){n.registerLoadBalancerType(u,RoundRobinLoadBalancer,RoundRobinLoadBalancingConfig)}t.setup=setup},6153:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0;function createChildChannelControlHelper(e,t){var r,n,i,s,o,a,l,c,u,d;return{createSubchannel:(n=(r=t.createSubchannel)===null||r===void 0?void 0:r.bind(t))!==null&&n!==void 0?n:e.createSubchannel.bind(e),updateState:(s=(i=t.updateState)===null||i===void 0?void 0:i.bind(t))!==null&&s!==void 0?s:e.updateState.bind(e),requestReresolution:(a=(o=t.requestReresolution)===null||o===void 0?void 0:o.bind(t))!==null&&a!==void 0?a:e.requestReresolution.bind(e),addChannelzChild:(c=(l=t.addChannelzChild)===null||l===void 0?void 0:l.bind(t))!==null&&c!==void 0?c:e.addChannelzChild.bind(e),removeChannelzChild:(d=(u=t.removeChannelzChild)===null||u===void 0?void 0:u.bind(t))!==null&&d!==void 0?d:e.removeChannelzChild.bind(e)}}t.createChildChannelControlHelper=createChildChannelControlHelper;const r={};let n=null;function registerLoadBalancerType(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}}t.registerLoadBalancerType=registerLoadBalancerType;function registerDefaultLoadBalancerType(e){n=e}t.registerDefaultLoadBalancerType=registerDefaultLoadBalancerType;function createLoadBalancer(e,t){const n=e.getLoadBalancerName();if(n in r){return new r[n].LoadBalancer(t)}else{return null}}t.createLoadBalancer=createLoadBalancer;function isLoadBalancerNameRegistered(e){return e in r}t.isLoadBalancerNameRegistered=isLoadBalancerNameRegistered;function getFirstUsableConfig(e,t=false){for(const t of e){if(t.getLoadBalancerName()in r){return t}}if(t){if(n){return new r[n].LoadBalancingConfig}else{return null}}else{return null}}t.getFirstUsableConfig=getFirstUsableConfig;function validateLoadBalancingConfig(e){if(!(e!==null&&typeof e==="object")){throw new Error("Load balancing config must be an object")}const t=Object.keys(e);if(t.length!==1){throw new Error("Provided load balancing config has multiple conflicting entries")}const n=t[0];if(n in r){return r[n].LoadBalancingConfig.createFromJson(e[n])}else{throw new Error(`Unrecognized load balancing config name ${n}`)}}t.validateLoadBalancingConfig=validateLoadBalancingConfig},9768:(e,t,r)=>{"use strict";var n,i,s,o;Object.defineProperty(t,"__esModule",{value:true});t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;const a=r(6130);const l={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}};let c=l;let u=a.LogVerbosity.ERROR;const d=(i=(n=process.env.GRPC_NODE_VERBOSITY)!==null&&n!==void 0?n:process.env.GRPC_VERBOSITY)!==null&&i!==void 0?i:"";switch(d.toUpperCase()){case"DEBUG":u=a.LogVerbosity.DEBUG;break;case"INFO":u=a.LogVerbosity.INFO;break;case"ERROR":u=a.LogVerbosity.ERROR;break;case"NONE":u=a.LogVerbosity.NONE;break;default:}t.getLogger=()=>c;t.setLogger=e=>{c=e};t.setLoggerVerbosity=e=>{u=e};t.log=(e,...t)=>{let r;if(e>=u){switch(e){case a.LogVerbosity.DEBUG:r=c.debug;break;case a.LogVerbosity.INFO:r=c.info;break;case a.LogVerbosity.ERROR:r=c.error;break}if(!r){r=c.error}if(r){r.bind(c)(...t)}}};const f=(o=(s=process.env.GRPC_NODE_TRACE)!==null&&s!==void 0?s:process.env.GRPC_TRACE)!==null&&o!==void 0?o:"";const h=new Set;const p=new Set;for(const e of f.split(",")){if(e.startsWith("-")){p.add(e.substring(1))}else{h.add(e)}}const m=h.has("all");function trace(e,r,n){if(isTracerEnabled(r)){t.log(e,(new Date).toISOString()+" | "+r+" | "+n)}}t.trace=trace;function isTracerEnabled(e){return!p.has(e)&&(m||h.has(e))}t.isTracerEnabled=isTracerEnabled},2602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.loadPackageDefinition=t.makeClientConstructor=void 0;const n=r(3262);const i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function isPrototypePolluted(e){return["__proto__","prototype","constructor"].includes(e)}function makeClientConstructor(e,t,r){if(!r){r={}}class ServiceClientImpl extends n.Client{}Object.keys(e).forEach((t=>{if(isPrototypePolluted(t)){return}const r=e[t];let n;if(typeof t==="string"&&t.charAt(0)==="$"){throw new Error("Method names cannot start with $")}if(r.requestStream){if(r.responseStream){n="bidi"}else{n="client_stream"}}else{if(r.responseStream){n="server_stream"}else{n="unary"}}const s=r.requestSerialize;const o=r.responseDeserialize;const a=partial(i[n],r.path,s,o);ServiceClientImpl.prototype[t]=a;Object.assign(ServiceClientImpl.prototype[t],r);if(r.originalName&&!isPrototypePolluted(r.originalName)){ServiceClientImpl.prototype[r.originalName]=ServiceClientImpl.prototype[t]}}));ServiceClientImpl.service=e;ServiceClientImpl.serviceName=t;return ServiceClientImpl}t.makeClientConstructor=makeClientConstructor;function partial(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function isProtobufTypeDefinition(e){return"format"in e}function loadPackageDefinition(e){const t={};for(const r in e){if(Object.prototype.hasOwnProperty.call(e,r)){const n=e[r];const i=r.split(".");if(i.some((e=>isPrototypePolluted(e)))){continue}const s=i[i.length-1];let o=t;for(const e of i.slice(0,-1)){if(!o[e]){o[e]={}}o=o[e]}if(isProtobufTypeDefinition(n)){o[s]=n}else{o[s]=makeClientConstructor(n,s,{})}}}return t}t.loadPackageDefinition=loadPackageDefinition},682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MaxMessageSizeFilterFactory=t.MaxMessageSizeFilter=void 0;const n=r(6273);const i=r(6130);class MaxMessageSizeFilter extends n.BaseFilter{constructor(e,t){super();this.options=e;this.callStream=t;this.maxSendMessageSize=i.DEFAULT_MAX_SEND_MESSAGE_LENGTH;this.maxReceiveMessageSize=i.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;if("grpc.max_send_message_length"in e){this.maxSendMessageSize=e["grpc.max_send_message_length"]}if("grpc.max_receive_message_length"in e){this.maxReceiveMessageSize=e["grpc.max_receive_message_length"]}}async sendMessage(e){if(this.maxSendMessageSize===-1){return e}else{const t=await e;if(t.message.length>this.maxSendMessageSize){this.callStream.cancelWithStatus(i.Status.RESOURCE_EXHAUSTED,`Sent message larger than max (${t.message.length} vs. ${this.maxSendMessageSize})`);return Promise.reject("Message too large")}else{return t}}}async receiveMessage(e){if(this.maxReceiveMessageSize===-1){return e}else{const t=await e;if(t.length>this.maxReceiveMessageSize){this.callStream.cancelWithStatus(i.Status.RESOURCE_EXHAUSTED,`Received message larger than max (${t.length} vs. ${this.maxReceiveMessageSize})`);return Promise.reject("Message too large")}else{return t}}}}t.MaxMessageSizeFilter=MaxMessageSizeFilter;class MaxMessageSizeFilterFactory{constructor(e){this.options=e}createFilter(e){return new MaxMessageSizeFilter(this.options,e)}}t.MaxMessageSizeFilterFactory=MaxMessageSizeFilterFactory},8940:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Metadata=void 0;const n=r(9768);const i=r(6130);const s=/^[0-9a-z_.-]+$/;const o=/^[ -~]*$/;function isLegalKey(e){return s.test(e)}function isLegalNonBinaryValue(e){return o.test(e)}function isBinaryKey(e){return e.endsWith("-bin")}function isCustomMetadata(e){return!e.startsWith("grpc-")}function normalizeKey(e){return e.toLowerCase()}function validate(e,t){if(!isLegalKey(e)){throw new Error('Metadata key "'+e+'" contains illegal characters')}if(t!==null&&t!==undefined){if(isBinaryKey(e)){if(!(t instanceof Buffer)){throw new Error("keys that end with '-bin' must have Buffer values")}}else{if(t instanceof Buffer){throw new Error("keys that don't end with '-bin' must have String values")}if(!isLegalNonBinaryValue(t)){throw new Error('Metadata string value "'+t+'" contains illegal characters')}}}}class Metadata{constructor(e){this.internalRepr=new Map;if(e===undefined){this.options={}}else{this.options=e}}set(e,t){e=normalizeKey(e);validate(e,t);this.internalRepr.set(e,[t])}add(e,t){e=normalizeKey(e);validate(e,t);const r=this.internalRepr.get(e);if(r===undefined){this.internalRepr.set(e,[t])}else{r.push(t)}}remove(e){e=normalizeKey(e);validate(e);this.internalRepr.delete(e)}get(e){e=normalizeKey(e);validate(e);return this.internalRepr.get(e)||[]}getMap(){const e={};this.internalRepr.forEach(((t,r)=>{if(t.length>0){const n=t[0];e[r]=n instanceof Buffer?n.slice():n}}));return e}clone(){const e=new Metadata(this.options);const t=e.internalRepr;this.internalRepr.forEach(((e,r)=>{const n=e.map((e=>{if(e instanceof Buffer){return Buffer.from(e)}else{return e}}));t.set(r,n)}));return e}merge(e){e.internalRepr.forEach(((e,t)=>{const r=(this.internalRepr.get(t)||[]).concat(e);this.internalRepr.set(t,r)}))}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){const e={};this.internalRepr.forEach(((t,r)=>{e[r]=t.map((e=>{if(e instanceof Buffer){return e.toString("base64")}else{return e}}))}));return e}_getCoreRepresentation(){return this.internalRepr}toJSON(){const e={};for(const[t,r]of this.internalRepr.entries()){e[t]=r}return e}static fromHttp2Headers(e){const t=new Metadata;Object.keys(e).forEach((r=>{if(r.charAt(0)===":"){return}const s=e[r];try{if(isBinaryKey(r)){if(Array.isArray(s)){s.forEach((e=>{t.add(r,Buffer.from(e,"base64"))}))}else if(s!==undefined){if(isCustomMetadata(r)){s.split(",").forEach((e=>{t.add(r,Buffer.from(e.trim(),"base64"))}))}else{t.add(r,Buffer.from(s,"base64"))}}}else{if(Array.isArray(s)){s.forEach((e=>{t.add(r,e)}))}else if(s!==undefined){t.add(r,s)}}}catch(e){const t=`Failed to add metadata entry ${r}: ${s}. ${e.message}. For more information see https://github.com/grpc/grpc-node/issues/1173`;n.log(i.LogVerbosity.ERROR,t)}}));return t}}t.Metadata=Metadata},2233:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;const n=r(8940);const i=r(6130);var s;(function(e){e[e["COMPLETE"]=0]="COMPLETE";e[e["QUEUE"]=1]="QUEUE";e[e["TRANSIENT_FAILURE"]=2]="TRANSIENT_FAILURE";e[e["DROP"]=3]="DROP"})(s=t.PickResultType||(t.PickResultType={}));class UnavailablePicker{constructor(e){if(e!==undefined){this.status=e}else{this.status={code:i.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata}}}pick(e){return{pickResultType:s.TRANSIENT_FAILURE,subchannel:null,status:this.status,extraFilterFactories:[],onCallStarted:null}}}t.UnavailablePicker=UnavailablePicker;class QueuePicker{constructor(e){this.loadBalancer=e;this.calledExitIdle=false}pick(e){if(!this.calledExitIdle){process.nextTick((()=>{this.loadBalancer.exitIdle()}));this.calledExitIdle=true}return{pickResultType:s.QUEUE,subchannel:null,status:null,extraFilterFactories:[],onCallStarted:null}}}t.QueuePicker=QueuePicker},8763:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=void 0;const n=r(6280);const i=r(9523);const s=r(3837);const o=r(5143);const a=r(6130);const l=r(8940);const c=r(9768);const u=r(6130);const d=r(3641);const f=r(1808);const h=r(9017);const p="dns_resolver";function trace(e){c.trace(u.LogVerbosity.DEBUG,p,e)}const m=443;const g=3e4;const y=s.promisify(i.resolveTxt);const v=s.promisify(i.lookup);function mergeArrays(...e){const t=[];for(let r=0;r<Math.max.apply(null,e.map((e=>e.length)));r++){for(const n of e){if(r<n.length){t.push(n[r])}}}return t}class DnsResolver{constructor(e,t,r){var n,i,s;this.target=e;this.listener=t;this.pendingLookupPromise=null;this.pendingTxtPromise=null;this.latestLookupResult=null;this.latestServiceConfig=null;this.latestServiceConfigError=null;this.continueResolving=false;this.isNextResolutionTimerRunning=false;trace("Resolver constructed for target "+d.uriToString(e));const o=d.splitHostPort(e.path);if(o===null){this.ipResult=null;this.dnsHostname=null;this.port=null}else{if(f.isIPv4(o.host)||f.isIPv6(o.host)){this.ipResult=[{host:o.host,port:(n=o.port)!==null&&n!==void 0?n:m}];this.dnsHostname=null;this.port=null}else{this.ipResult=null;this.dnsHostname=o.host;this.port=(i=o.port)!==null&&i!==void 0?i:m}}this.percentage=Math.random()*100;this.defaultResolutionError={code:a.Status.UNAVAILABLE,details:`Name resolution failed for target ${d.uriToString(this.target)}`,metadata:new l.Metadata};const c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new h.BackoffTimeout((()=>{if(this.continueResolving){this.startResolutionWithBackoff()}}),c);this.backoff.unref();this.minTimeBetweenResolutionsMs=(s=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&s!==void 0?s:g;this.nextResolutionTimer=setTimeout((()=>{}),0);clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){trace("Returning IP address for target "+d.uriToString(this.target));setImmediate((()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}));this.backoff.stop();this.backoff.reset();return}if(this.dnsHostname===null){trace("Failed to parse DNS address "+d.uriToString(this.target));setImmediate((()=>{this.listener.onError({code:a.Status.UNAVAILABLE,details:`Failed to parse DNS address ${d.uriToString(this.target)}`,metadata:new l.Metadata})}));this.stopNextResolutionTimer()}else{if(this.pendingLookupPromise!==null){return}trace("Looking up DNS hostname "+this.dnsHostname);this.latestLookupResult=null;const e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:true});this.pendingLookupPromise.then((e=>{this.pendingLookupPromise=null;this.backoff.reset();this.backoff.stop();const t=e.filter((e=>e.family===4));const r=e.filter((e=>e.family===6));this.latestLookupResult=mergeArrays(r,t).map((e=>({host:e.address,port:+this.port})));const n="["+this.latestLookupResult.map((e=>e.host+":"+e.port)).join(",")+"]";trace("Resolved addresses for target "+d.uriToString(this.target)+": "+n);if(this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}),(e=>{trace("Resolution error for target "+d.uriToString(this.target)+": "+e.message);this.pendingLookupPromise=null;this.stopNextResolutionTimer();this.listener.onError(this.defaultResolutionError)}));if(this.pendingTxtPromise===null){this.pendingTxtPromise=y(e);this.pendingTxtPromise.then((e=>{this.pendingTxtPromise=null;try{this.latestServiceConfig=o.extractAndSelectServiceConfig(e,this.percentage)}catch(e){this.latestServiceConfigError={code:a.Status.UNAVAILABLE,details:"Parsing service config failed",metadata:new l.Metadata}}if(this.latestLookupResult!==null){this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}}),(e=>{}))}}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer);this.nextResolutionTimer=(t=(e=setTimeout((()=>{this.stopNextResolutionTimer();if(this.continueResolving){this.startResolutionWithBackoff()}}),this.minTimeBetweenResolutionsMs)).unref)===null||t===void 0?void 0:t.call(e);this.isNextResolutionTimerRunning=true}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer);this.isNextResolutionTimerRunning=false}startResolutionWithBackoff(){if(this.pendingLookupPromise===null){this.continueResolving=false;this.startResolution();this.backoff.runOnce();this.startNextResolutionTimer()}}updateResolution(){if(this.pendingLookupPromise===null){if(this.isNextResolutionTimerRunning||this.backoff.isRunning()){this.continueResolving=true}else{this.startResolutionWithBackoff()}}}destroy(){this.continueResolving=false;this.backoff.stop();this.stopNextResolutionTimer()}static getDefaultAuthority(e){return e.path}}function setup(){n.registerResolver("dns",DnsResolver);n.registerDefaultScheme("dns")}t.setup=setup},2942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=void 0;const n=r(1808);const i=r(6130);const s=r(8940);const o=r(6280);const a=r(3641);const l=r(9768);const c="ip_resolver";function trace(e){l.trace(i.LogVerbosity.DEBUG,c,e)}const u="ipv4";const d="ipv6";const f=443;class IpResolver{constructor(e,t,r){var o;this.target=e;this.listener=t;this.addresses=[];this.error=null;trace("Resolver constructed for target "+a.uriToString(e));const l=[];if(!(e.scheme===u||e.scheme===d)){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}const c=e.path.split(",");for(const t of c){const r=a.splitHostPort(t);if(r===null){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}if(e.scheme===u&&!n.isIPv4(r.host)||e.scheme===d&&!n.isIPv6(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:(o=r.port)!==null&&o!==void 0?o:f})}this.addresses=l;trace("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){process.nextTick((()=>{if(this.error){this.listener.onError(this.error)}else{this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}}))}destroy(){}static getDefaultAuthority(e){return e.path.split(",")[0]}}function setup(){o.registerResolver(u,IpResolver);o.registerResolver(d,IpResolver)}t.setup=setup},3964:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setup=void 0;const n=r(6280);class UdsResolver{constructor(e,t,r){this.listener=t;this.addresses=[];let n;if(e.authority===""){n="/"+e.path}else{n=e.path}this.addresses=[{path:n}]}updateResolution(){process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{})}destroy(){}static getDefaultAuthority(e){return"localhost"}}function setup(){n.registerResolver("unix",UdsResolver)}t.setup=setup},6280:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;const n=r(3641);const i={};let s=null;function registerResolver(e,t){i[e]=t}t.registerResolver=registerResolver;function registerDefaultScheme(e){s=e}t.registerDefaultScheme=registerDefaultScheme;function createResolver(e,t,r){if(e.scheme!==undefined&&e.scheme in i){return new i[e.scheme](e,t,r)}else{throw new Error(`No resolver could be created for target ${n.uriToString(e)}`)}}t.createResolver=createResolver;function getDefaultAuthority(e){if(e.scheme!==undefined&&e.scheme in i){return i[e.scheme].getDefaultAuthority(e)}else{throw new Error(`Invalid target ${n.uriToString(e)}`)}}t.getDefaultAuthority=getDefaultAuthority;function mapUriDefaultScheme(e){if(e.scheme===undefined||!(e.scheme in i)){if(s!==null){return{scheme:s,authority:undefined,path:n.uriToString(e)}}else{return null}}return e}t.mapUriDefaultScheme=mapUriDefaultScheme},8794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ResolvingLoadBalancer=void 0;const n=r(6153);const i=r(5143);const s=r(4822);const o=r(6280);const a=r(2233);const l=r(9017);const c=r(6130);const u=r(8940);const d=r(9768);const f=r(6130);const h=r(3641);const p=r(7027);const m="resolving_load_balancer";function trace(e){d.trace(f.LogVerbosity.DEBUG,m,e)}const g="pick_first";function getDefaultConfigSelector(e){return function defaultConfigSelector(t,r){var n,i;const s=t.split("/").filter((e=>e.length>0));const o=(n=s[0])!==null&&n!==void 0?n:"";const a=(i=s[1])!==null&&i!==void 0?i:"";if(e&&e.methodConfig){for(const t of e.methodConfig){for(const e of t.name){if(e.service===o&&(e.method===undefined||e.method===a)){return{methodConfig:t,pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}}}}}return{methodConfig:{name:[]},pickInformation:{},status:c.Status.OK,dynamicFilterFactories:[]}}}class ResolvingLoadBalancer{constructor(e,t,r,d,f){this.target=e;this.channelControlHelper=t;this.channelOptions=r;this.onSuccessfulResolution=d;this.onFailedResolution=f;this.latestChildState=s.ConnectivityState.IDLE;this.latestChildPicker=new a.QueuePicker(this);this.currentState=s.ConnectivityState.IDLE;this.previousServiceConfig=null;this.continueResolving=false;if(r["grpc.service_config"]){this.defaultServiceConfig=i.validateServiceConfig(JSON.parse(r["grpc.service_config"]))}else{this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]}}this.updateState(s.ConnectivityState.IDLE,new a.QueuePicker(this));this.childLoadBalancer=new p.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{if(this.backoffTimeout.isRunning()){this.continueResolving=true}else{this.updateResolution()}},updateState:(e,t)=>{this.latestChildState=e;this.latestChildPicker=t;this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)});this.innerResolver=o.createResolver(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var o;let a=null;if(t===null){if(r===null){this.previousServiceConfig=null;a=this.defaultServiceConfig}else{if(this.previousServiceConfig===null){this.handleResolutionFailure(r)}else{a=this.previousServiceConfig}}}else{a=t;this.previousServiceConfig=t}const l=(o=a===null||a===void 0?void 0:a.loadBalancingConfig)!==null&&o!==void 0?o:[];const d=n.getFirstUsableConfig(l,true);if(d===null){this.handleResolutionFailure({code:c.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new u.Metadata});return}this.childLoadBalancer.updateAddressList(e,d,s);const f=a!==null&&a!==void 0?a:this.defaultServiceConfig;this.onSuccessfulResolution(i!==null&&i!==void 0?i:getDefaultConfigSelector(f))},onError:e=>{this.handleResolutionFailure(e)}},r);const h={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout((()=>{if(this.continueResolving){this.updateResolution();this.continueResolving=false}else{this.updateState(this.latestChildState,this.latestChildPicker)}}),h);this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution();if(this.currentState===s.ConnectivityState.IDLE){this.updateState(s.ConnectivityState.CONNECTING,new a.QueuePicker(this))}this.backoffTimeout.runOnce()}updateState(e,t){trace(h.uriToString(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]);if(e===s.ConnectivityState.IDLE){t=new a.QueuePicker(this)}this.currentState=e;this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){if(this.latestChildState===s.ConnectivityState.IDLE){this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new a.UnavailablePicker(e));this.onFailedResolution(e)}}exitIdle(){if(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE){if(this.backoffTimeout.isRunning()){this.continueResolving=true}else{this.updateResolution()}}this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset();this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy();this.innerResolver.destroy();this.updateState(s.ConnectivityState.SHUTDOWN,new a.UnavailablePicker)}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=ResolvingLoadBalancer},5699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;const n=r(2361);const i=r(5158);const s=r(2781);const o=r(9796);const a=r(6130);const l=r(8940);const c=r(4099);const u=r(9768);const d="server_call";function trace(e){u.trace(a.LogVerbosity.DEBUG,d,e)}const f="grpc-accept-encoding";const h="grpc-encoding";const p="grpc-message";const m="grpc-status";const g="grpc-timeout";const y=/(\d{1,8})\s*([HMSmun])/;const v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6};const b={[f]:"identity,deflate,gzip",[h]:"identity",[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"};const S={waitForTrailers:true};class ServerUnaryCallImpl extends n.EventEmitter{constructor(e,t,r){super();this.call=e;this.metadata=t;this.request=r;this.cancelled=false;this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=ServerUnaryCallImpl;class ServerReadableStreamImpl extends s.Readable{constructor(e,t,r,n){super({objectMode:true});this.call=e;this.metadata=t;this.deserialize=r;this.cancelled=false;this.call.setupSurfaceCall(this);this.call.setupReadable(this,n)}_read(e){if(!this.call.consumeUnpushedMessages(this)){return}this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=ServerReadableStreamImpl;class ServerWritableStreamImpl extends s.Writable{constructor(e,t,r,n){super({objectMode:true});this.call=e;this.metadata=t;this.serialize=r;this.request=n;this.cancelled=false;this.trailingMetadata=new l.Metadata;this.call.setupSurfaceCall(this);this.on("error",(e=>{this.call.sendError(e);this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{const t=this.call.serializeMessage(e);if(!this.call.write(t)){this.call.once("drain",r);return}}catch(e){e.code=a.Status.INTERNAL;this.emit("error",e)}r()}_final(e){this.call.sendStatus({code:a.Status.OK,details:"OK",metadata:this.trailingMetadata});e(null)}end(e){if(e){this.trailingMetadata=e}return super.end()}}t.ServerWritableStreamImpl=ServerWritableStreamImpl;class ServerDuplexStreamImpl extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:true});this.call=e;this.metadata=t;this.serialize=r;this.deserialize=n;this.cancelled=false;this.trailingMetadata=new l.Metadata;this.call.setupSurfaceCall(this);this.call.setupReadable(this,i);this.on("error",(e=>{this.call.sendError(e);this.end()}))}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){if(e){this.trailingMetadata=e}return super.end()}}t.ServerDuplexStreamImpl=ServerDuplexStreamImpl;ServerDuplexStreamImpl.prototype._read=ServerReadableStreamImpl.prototype._read;ServerDuplexStreamImpl.prototype._write=ServerWritableStreamImpl.prototype._write;ServerDuplexStreamImpl.prototype._final=ServerWritableStreamImpl.prototype._final;class Http2ServerCallStream extends n.EventEmitter{constructor(e,t,r){super();this.stream=e;this.handler=t;this.options=r;this.cancelled=false;this.deadlineTimer=setTimeout((()=>{}),0);this.deadline=Infinity;this.wantTrailers=false;this.metadataSent=false;this.canPush=false;this.isPushPending=false;this.bufferedMessages=[];this.messagesToPush=[];this.maxSendMessageSize=a.DEFAULT_MAX_SEND_MESSAGE_LENGTH;this.maxReceiveMessageSize=a.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.stream.once("error",(e=>{}));this.stream.once("close",(()=>{var e;trace("Request to method "+((e=this.handler)===null||e===void 0?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode);this.cancelled=true;this.emit("cancelled","cancelled");this.emit("streamEnd",false);this.sendStatus({code:a.Status.CANCELLED,details:"Cancelled by client",metadata:new l.Metadata})}));this.stream.on("drain",(()=>{this.emit("drain")}));if("grpc.max_send_message_length"in r){this.maxSendMessageSize=r["grpc.max_send_message_length"]}if("grpc.max_receive_message_length"in r){this.maxReceiveMessageSize=r["grpc.max_receive_message_length"]}clearTimeout(this.deadlineTimer)}checkCancelled(){if(this.stream.destroyed||this.stream.closed){this.cancelled=true}return this.cancelled}getDecompressedMessage(e,t){switch(t){case"deflate":{return new Promise(((r,n)=>{o.inflate(e.slice(5),((e,n)=>{if(e){this.sendError({code:a.Status.INTERNAL,details:`Received "grpc-encoding" header "${t}" but ${t} decompression failed`});r()}else{r(n)}}))}))}case"gzip":{return new Promise(((r,n)=>{o.unzip(e.slice(5),((e,n)=>{if(e){this.sendError({code:a.Status.INTERNAL,details:`Received "grpc-encoding" header "${t}" but ${t} decompression failed`});r()}else{r(n)}}))}))}case"identity":{return Promise.resolve(e.slice(5))}default:{this.sendError({code:a.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});return Promise.resolve()}}}sendMetadata(e){if(this.checkCancelled()){return}if(this.metadataSent){return}this.metadataSent=true;const t=e?e.toHttp2Headers():null;const r=Object.assign({},b,t);this.stream.respond(r,S)}receiveMetadata(e){const t=l.Metadata.fromHttp2Headers(e);const r=t.get(g);if(r.length>0){const e=r[0].toString().match(y);if(e===null){const e=new Error("Invalid deadline");e.code=a.Status.OUT_OF_RANGE;this.sendError(e);return t}const n=+e[1]*v[e[2]]|0;const i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n);this.deadlineTimer=setTimeout(handleExpiredDeadline,n,this);t.remove(g)}t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING);t.remove(i.constants.HTTP2_HEADER_TE);t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE);t.remove("grpc-accept-encoding");return t}receiveUnaryMessage(e){return new Promise(((t,r)=>{const n=this.stream;const i=[];let s=0;n.on("data",(e=>{i.push(e);s+=e.byteLength}));n.once("end",(async()=>{try{const r=Buffer.concat(i,s);if(this.maxReceiveMessageSize!==-1&&r.length>this.maxReceiveMessageSize){this.sendError({code:a.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${r.length} vs. ${this.maxReceiveMessageSize})`});t()}this.emit("receiveMessage");const n=r.readUInt8(0)===1;const o=n?e:"identity";const l=await this.getDecompressedMessage(r,o);if(!l){t()}else{t(this.deserializeMessage(l))}}catch(e){e.code=a.Status.INTERNAL;this.sendError(e);t()}}))}))}serializeMessage(e){const t=this.handler.serialize(e);const r=t.byteLength;const n=Buffer.allocUnsafe(r+5);n.writeUInt8(0,0);n.writeUInt32BE(r,1);t.copy(n,5);return n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(this.checkCancelled()){return}if(!r){r=new l.Metadata}if(e){if(!Object.prototype.hasOwnProperty.call(e,"metadata")){e.metadata=r}this.sendError(e);return}try{const e=this.serializeMessage(t);this.write(e);this.sendStatus({code:a.Status.OK,details:"OK",metadata:r})}catch(e){e.code=a.Status.INTERNAL;this.sendError(e)}}sendStatus(e){var t;this.emit("callEnd",e.code);this.emit("streamEnd",e.code===a.Status.OK);if(this.checkCancelled()){return}trace("Request to method "+((t=this.handler)===null||t===void 0?void 0:t.path)+" ended with status code: "+a.Status[e.code]+" details: "+e.details);clearTimeout(this.deadlineTimer);if(!this.wantTrailers){this.wantTrailers=true;this.stream.once("wantTrailers",(()=>{const t=Object.assign({[m]:e.code,[p]:encodeURI(e.details)},e.metadata.toHttp2Headers());this.stream.sendTrailers(t)}));this.sendMetadata();this.stream.end()}}sendError(e){const t={code:a.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==undefined?e.metadata:new l.Metadata};if("code"in e&&typeof e.code==="number"&&Number.isInteger(e.code)){t.code=e.code;if("details"in e&&typeof e.details==="string"){t.details=e.details}}this.sendStatus(t)}write(e){if(this.checkCancelled()){return}if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:a.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}this.sendMetadata();this.emit("sendMessage");return this.stream.write(e)}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",(t=>{e.cancelled=true;e.emit("cancelled",t)}));this.once("callEnd",(t=>e.emit("callEnd",t)))}setupReadable(e,t){const r=new c.StreamDecoder;let n=false;let i=false;let s=false;const maybePushEnd=()=>{if(!s&&n&&!i){s=true;this.pushOrBufferMessage(e,null)}};this.stream.on("data",(async n=>{const s=r.write(n);i=true;this.stream.pause();for(const r of s){if(this.maxReceiveMessageSize!==-1&&r.length>this.maxReceiveMessageSize){this.sendError({code:a.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${r.length} vs. ${this.maxReceiveMessageSize})`});return}this.emit("receiveMessage");const n=r.readUInt8(0)===1;const i=n?t:"identity";const s=await this.getDecompressedMessage(r,i);if(!s)return;this.pushOrBufferMessage(e,s)}i=false;this.stream.resume();maybePushEnd()}));this.stream.once("end",(()=>{n=true;maybePushEnd()}))}consumeUnpushedMessages(e){this.canPush=true;while(this.messagesToPush.length>0){const t=this.messagesToPush.shift();const r=e.push(t);if(t===null||r===false){this.canPush=false;break}}return this.canPush}pushOrBufferMessage(e,t){if(this.isPushPending){this.bufferedMessages.push(t)}else{this.pushMessage(e,t)}}async pushMessage(e,t){if(t===null){trace("Received end of stream");if(this.canPush){e.push(null)}else{this.messagesToPush.push(null)}return}trace("Received message of length "+t.length);this.isPushPending=true;try{const r=await this.deserializeMessage(t);if(this.canPush){if(!e.push(r)){this.canPush=false;this.stream.pause()}}else{this.messagesToPush.push(r)}}catch(t){this.bufferedMessages.length=0;if(!("code"in t&&typeof t.code==="number"&&Number.isInteger(t.code)&&t.code>=a.Status.OK&&t.code<=a.Status.UNAUTHENTICATED)){t.code=a.Status.INTERNAL}e.emit("error",t)}this.isPushPending=false;if(this.bufferedMessages.length>0){this.pushMessage(e,this.bufferedMessages.shift())}}getPeer(){const e=this.stream.session.socket;if(e.remoteAddress){if(e.remotePort){return`${e.remoteAddress}:${e.remotePort}`}else{return e.remoteAddress}}else{return"unknown"}}getDeadline(){return this.deadline}getPath(){return this.handler.path}}t.Http2ServerCallStream=Http2ServerCallStream;function handleExpiredDeadline(e){const t=new Error("Deadline exceeded");t.code=a.Status.DEADLINE_EXCEEDED;e.sendError(t);e.cancelled=true;e.emit("cancelled","deadline")}},5637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServerCredentials=void 0;const n=r(1589);class ServerCredentials{static createInsecure(){return new InsecureServerCredentials}static createSsl(e,t,r=false){if(e!==null&&!Buffer.isBuffer(e)){throw new TypeError("rootCerts must be null or a Buffer")}if(!Array.isArray(t)){throw new TypeError("keyCertPairs must be an array")}if(typeof r!=="boolean"){throw new TypeError("checkClientCertificate must be a boolean")}const i=[];const s=[];for(let e=0;e<t.length;e++){const r=t[e];if(r===null||typeof r!=="object"){throw new TypeError(`keyCertPair[${e}] must be an object`)}if(!Buffer.isBuffer(r.private_key)){throw new TypeError(`keyCertPair[${e}].private_key must be a Buffer`)}if(!Buffer.isBuffer(r.cert_chain)){throw new TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`)}i.push(r.cert_chain);s.push(r.private_key)}return new SecureServerCredentials({ca:e||n.getDefaultRootsData()||undefined,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=ServerCredentials;class InsecureServerCredentials extends ServerCredentials{_isSecure(){return false}_getSettings(){return null}}class SecureServerCredentials extends ServerCredentials{constructor(e){super();this.options=e}_isSecure(){return true}_getSettings(){return this.options}}},632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Server=void 0;const n=r(5158);const i=r(6130);const s=r(8940);const o=r(5699);const a=r(5637);const l=r(6280);const c=r(9768);const u=r(8210);const d=r(3641);const f=r(859);const h="server";function noop(){}function getUnimplementedStatusResponse(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`,metadata:new s.Metadata}}function getDefaultHandler(e,t){const r=getUnimplementedStatusResponse(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw new Error(`Invalid handlerType ${e}`)}}class Server{constructor(e){this.http2ServerList=[];this.handlers=new Map;this.sessions=new Map;this.started=false;this.channelzEnabled=true;this.channelzTrace=new f.ChannelzTrace;this.callTracker=new f.ChannelzCallTracker;this.listenerChildrenTracker=new f.ChannelzChildrenTracker;this.sessionChildrenTracker=new f.ChannelzChildrenTracker;this.options=e!==null&&e!==void 0?e:{};if(this.options["grpc.enable_channelz"]===0){this.channelzEnabled=false}this.channelzRef=f.registerChannelzServer((()=>this.getChannelzInfo()),this.channelzEnabled);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Server created")}this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;const i=this.sessions.get(e);const s=e.socket;const o=s.remoteAddress?u.stringToSubchannelAddress(s.remoteAddress,s.remotePort):null;const a=s.localAddress?u.stringToSubchannelAddress(s.localAddress,s.localPort):null;let l;if(e.encrypted){const e=s;const r=e.getCipher();const n=e.getCertificate();const i=e.getPeerCertificate();l={cipherSuiteStandardName:(t=r.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:i&&"raw"in i?i.raw:null}}else{l=null}const c={remoteAddress:o,localAddress:a,security:l,remoteName:null,streamsStarted:i.streamTracker.callsStarted,streamsSucceeded:i.streamTracker.callsSucceeded,streamsFailed:i.streamTracker.callsFailed,messagesSent:i.messagesSent,messagesReceived:i.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:i.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:i.lastMessageSentTimestamp,lastMessageReceivedTimestamp:i.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(n=e.state.remoteWindowSize)!==null&&n!==void 0?n:null};return c}}trace(e){c.trace(i.LogVerbosity.DEBUG,h,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(e===null||typeof e!=="object"||t===null||typeof t!=="object"){throw new Error("addService() requires two objects as arguments")}const r=Object.keys(e);if(r.length===0){throw new Error("Cannot add an empty service to a server")}r.forEach((r=>{const n=e[r];let i;if(n.requestStream){if(n.responseStream){i="bidi"}else{i="clientStream"}}else{if(n.responseStream){i="serverStream"}else{i="unary"}}let s=t[r];let o;if(s===undefined&&typeof n.originalName==="string"){s=t[n.originalName]}if(s!==undefined){o=s.bind(t)}else{o=getDefaultHandler(i,r)}const a=this.register(n.path,o,n.responseSerialize,n.requestDeserialize,i);if(a===false){throw new Error(`Method handler for ${n.path} already provided.`)}}))}removeService(e){if(e===null||typeof e!=="object"){throw new Error("removeService() requires object as argument")}const t=Object.keys(e);t.forEach((t=>{const r=e[t];this.unregister(r.path)}))}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(this.started===true){throw new Error("server is already started")}if(typeof e!=="string"){throw new TypeError("port must be a string")}if(t===null||!(t instanceof a.ServerCredentials)){throw new TypeError("creds must be a ServerCredentials object")}if(typeof r!=="function"){throw new TypeError("callback must be a function")}const s=d.parseUri(e);if(s===null){throw new Error(`Could not parse port "${e}"`)}const o=l.mapUriDefaultScheme(s);if(o===null){throw new Error(`Could not get a default scheme for port "${e}"`)}const h={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};if("grpc-node.max_session_memory"in this.options){h.maxSessionMemory=this.options["grpc-node.max_session_memory"]}if("grpc.max_concurrent_streams"in this.options){h.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]}}const deferredCallback=(e,t)=>{process.nextTick((()=>r(e,t)))};const setupServer=()=>{let e;if(t._isSecure()){const r=Object.assign(h,t._getSettings());e=n.createSecureServer(r);e.on("secureConnection",(e=>{e.on("error",(e=>{this.trace("An incoming TLS connection closed with error: "+e.message)}))}))}else{e=n.createServer(h)}e.setTimeout(0,noop);this._setupHandlers(e);return e};const bindSpecificPort=(e,t,r)=>{if(e.length===0){return Promise.resolve({port:t,count:r})}return Promise.all(e.map((e=>{this.trace("Attempting to bind "+u.subchannelAddressToString(e));let r;if(u.isTcpSubchannelAddress(e)){r={host:e.host,port:t}}else{r=e}const n=setupServer();return new Promise(((i,s)=>{const onError=t=>{this.trace("Failed to bind "+u.subchannelAddressToString(e)+" with error "+t.message);i(t)};n.once("error",onError);n.listen(r,(()=>{const e=n.address();let r;if(typeof e==="string"){r={path:e}}else{r={host:e.address,port:e.port}}let s;s=f.registerChannelzSocket(u.subchannelAddressToString(r),(()=>({localAddress:r,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled);if(this.channelzEnabled){this.listenerChildrenTracker.refChild(s)}this.http2ServerList.push({server:n,channelzRef:s});this.trace("Successfully bound "+u.subchannelAddressToString(r));i("port"in r?r.port:t);n.removeListener("error",onError)}))}))}))).then((e=>{let n=0;for(const r of e){if(typeof r==="number"){n+=1;if(r!==t){throw new Error("Invalid state: multiple port numbers added from single address")}}}return{port:t,count:n+r}}))};const bindWildcardPort=e=>{if(e.length===0){return Promise.resolve({port:0,count:0})}const t=e[0];const r=setupServer();return new Promise(((n,i)=>{const onError=r=>{this.trace("Failed to bind "+u.subchannelAddressToString(t)+" with error "+r.message);n(bindWildcardPort(e.slice(1)))};r.once("error",onError);r.listen(t,(()=>{const t=r.address();const i={host:t.address,port:t.port};let s;s=f.registerChannelzSocket(u.subchannelAddressToString(i),(()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null})),this.channelzEnabled);if(this.channelzEnabled){this.listenerChildrenTracker.refChild(s)}this.http2ServerList.push({server:r,channelzRef:s});this.trace("Successfully bound "+u.subchannelAddressToString(i));n(bindSpecificPort(e.slice(1),t.port,1));r.removeListener("error",onError)}))}))};const p={onSuccessfulResolution:(t,r,n)=>{p.onSuccessfulResolution=()=>{};if(t.length===0){deferredCallback(new Error(`No addresses resolved for port ${e}`),0);return}let s;if(u.isTcpSubchannelAddress(t[0])){if(t[0].port===0){s=bindWildcardPort(t)}else{s=bindSpecificPort(t,t[0].port,0)}}else{s=bindSpecificPort(t,1,0)}s.then((e=>{if(e.count===0){const e=`No address added out of total ${t.length} resolved`;c.log(i.LogVerbosity.ERROR,e);deferredCallback(new Error(e),0)}else{if(e.count<t.length){c.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`)}deferredCallback(null,e.port)}}),(e=>{const r=`No address added out of total ${t.length} resolved`;c.log(i.LogVerbosity.ERROR,r);deferredCallback(new Error(r),0)}))},onError:e=>{deferredCallback(new Error(e.details),0)}};const m=l.createResolver(o,p,this.options);m.updateResolution()}forceShutdown(){for(const{server:e,channelzRef:t}of this.http2ServerList){if(e.listening){e.close((()=>{if(this.channelzEnabled){this.listenerChildrenTracker.unrefChild(t);f.unregisterChannelzRef(t)}}))}}this.started=false;this.sessions.forEach(((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}));this.sessions.clear();if(this.channelzEnabled){f.unregisterChannelzRef(this.channelzRef)}}register(e,t,r,n,i){if(this.handlers.has(e)){return false}this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e});return true}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every((({server:e})=>e.listening!==true))){throw new Error("server must be bound in order to start")}if(this.started===true){throw new Error("server is already started")}if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Starting")}this.started=true}tryShutdown(e){const wrappedCallback=t=>{if(this.channelzEnabled){f.unregisterChannelzRef(this.channelzRef)}e(t)};let t=0;function maybeCallback(){t--;if(t===0){wrappedCallback()}}this.started=false;for(const{server:e,channelzRef:r}of this.http2ServerList){if(e.listening){t++;e.close((()=>{if(this.channelzEnabled){this.listenerChildrenTracker.unrefChild(r);f.unregisterChannelzRef(r)}maybeCallback()}))}}this.sessions.forEach(((e,r)=>{if(!r.closed){t+=1;r.close(maybeCallback)}}));if(t===0){wrappedCallback()}}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_setupHandlers(e){if(e===null){return}e.on("stream",((t,r)=>{var s;const a=this.sessions.get(t.session);if(this.channelzEnabled){this.callTracker.addCallStarted();a===null||a===void 0?void 0:a.streamTracker.addCallStarted()}const l=r[n.constants.HTTP2_HEADER_CONTENT_TYPE];if(typeof l!=="string"||!l.startsWith("application/grpc")){t.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:true});this.callTracker.addCallFailed();if(this.channelzEnabled){a===null||a===void 0?void 0:a.streamTracker.addCallFailed()}return}let c=null;try{const l=r[n.constants.HTTP2_HEADER_PATH];const u=e.address();let d="null";if(u){if(typeof u==="string"){d=u}else{d=u.address+":"+u.port}}this.trace("Received call to method "+l+" at address "+d);const f=this.handlers.get(l);if(f===undefined){this.trace("No handler registered for method "+l+". Sending UNIMPLEMENTED status.");throw getUnimplementedStatusResponse(l)}c=new o.Http2ServerCallStream(t,f,this.options);c.once("callEnd",(e=>{if(e===i.Status.OK){this.callTracker.addCallSucceeded()}else{this.callTracker.addCallFailed()}}));if(this.channelzEnabled&&a){c.once("streamEnd",(e=>{if(e){a.streamTracker.addCallSucceeded()}else{a.streamTracker.addCallFailed()}}));c.on("sendMessage",(()=>{a.messagesSent+=1;a.lastMessageSentTimestamp=new Date}));c.on("receiveMessage",(()=>{a.messagesReceived+=1;a.lastMessageReceivedTimestamp=new Date}))}const h=c.receiveMetadata(r);const p=(s=h.get("grpc-encoding")[0])!==null&&s!==void 0?s:"identity";h.remove("grpc-encoding");switch(f.type){case"unary":handleUnary(c,f,h,p);break;case"clientStream":handleClientStreaming(c,f,h,p);break;case"serverStream":handleServerStreaming(c,f,h,p);break;case"bidi":handleBidiStreaming(c,f,h,p);break;default:throw new Error(`Unknown handler type: ${f.type}`)}}catch(e){if(!c){c=new o.Http2ServerCallStream(t,null,this.options);if(this.channelzEnabled){this.callTracker.addCallFailed();a===null||a===void 0?void 0:a.streamTracker.addCallFailed()}}if(e.code===undefined){e.code=i.Status.INTERNAL}c.sendError(e)}}));e.on("session",(e=>{var t;if(!this.started){e.destroy();return}let r;r=f.registerChannelzSocket((t=e.socket.remoteAddress)!==null&&t!==void 0?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled);const n={ref:r,streamTracker:new f.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,n);const i=e.socket.remoteAddress;if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Connection established by client "+i);this.sessionChildrenTracker.refChild(r)}e.on("close",(()=>{if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+i);this.sessionChildrenTracker.unrefChild(r);f.unregisterChannelzRef(r)}this.sessions.delete(e)}))}))}}t.Server=Server;async function handleUnary(e,t,r,n){const i=await e.receiveUnaryMessage(n);if(i===undefined||e.cancelled){return}const s=new o.ServerUnaryCallImpl(e,r,i);t.func(s,((t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)}))}function handleClientStreaming(e,t,r,n){const i=new o.ServerReadableStreamImpl(e,r,t.deserialize,n);function respond(t,r,n,s){i.destroy();e.sendUnaryMessage(t,r,n,s)}if(e.cancelled){return}i.on("error",respond);t.func(i,respond)}async function handleServerStreaming(e,t,r,n){const i=await e.receiveUnaryMessage(n);if(i===undefined||e.cancelled){return}const s=new o.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(s)}function handleBidiStreaming(e,t,r,n){const i=new o.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);if(e.cancelled){return}t.func(i)}},5143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.extractAndSelectServiceConfig=t.validateServiceConfig=void 0;const n=r(2037);const i=r(6153);const s=/^\d+(\.\d{1,9})?s$/;const o="node";function validateName(e){if(!("service"in e)||typeof e.service!=="string"){throw new Error("Invalid method config name: invalid service")}const t={service:e.service};if("method"in e){if(typeof e.method==="string"){t.method=e.method}else{throw new Error("Invalid method config name: invalid method")}}return t}function validateMethodConfig(e){var t;const r={name:[]};if(!("name"in e)||!Array.isArray(e.name)){throw new Error("Invalid method config: invalid name array")}for(const t of e.name){r.name.push(validateName(t))}if("waitForReady"in e){if(typeof e.waitForReady!=="boolean"){throw new Error("Invalid method config: invalid waitForReady")}r.waitForReady=e.waitForReady}if("timeout"in e){if(typeof e.timeout==="object"){if(!("seconds"in e.timeout)||!(typeof e.timeout.seconds==="number")){throw new Error("Invalid method config: invalid timeout.seconds")}if(!("nanos"in e.timeout)||!(typeof e.timeout.nanos==="number")){throw new Error("Invalid method config: invalid timeout.nanos")}r.timeout=e.timeout}else if(typeof e.timeout==="string"&&s.test(e.timeout)){const n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:n[0]|0,nanos:((t=n[1])!==null&&t!==void 0?t:0)|0}}else{throw new Error("Invalid method config: invalid timeout")}}if("maxRequestBytes"in e){if(typeof e.maxRequestBytes!=="number"){throw new Error("Invalid method config: invalid maxRequestBytes")}r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if(typeof e.maxResponseBytes!=="number"){throw new Error("Invalid method config: invalid maxRequestBytes")}r.maxResponseBytes=e.maxResponseBytes}return r}function validateServiceConfig(e){const t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if(typeof e.loadBalancingPolicy==="string"){t.loadBalancingPolicy=e.loadBalancingPolicy}else{throw new Error("Invalid service config: invalid loadBalancingPolicy")}}if("loadBalancingConfig"in e){if(Array.isArray(e.loadBalancingConfig)){for(const r of e.loadBalancingConfig){t.loadBalancingConfig.push(i.validateLoadBalancingConfig(r))}}else{throw new Error("Invalid service config: invalid loadBalancingConfig")}}if("methodConfig"in e){if(Array.isArray(e.methodConfig)){for(const r of e.methodConfig){t.methodConfig.push(validateMethodConfig(r))}}}const r=[];for(const e of t.methodConfig){for(const t of e.name){for(const e of r){if(t.service===e.service&&t.method===e.method){throw new Error(`Invalid service config: duplicate name ${t.service}/${t.method}`)}}r.push(t)}}return t}t.validateServiceConfig=validateServiceConfig;function validateCanaryConfig(e){if(!("serviceConfig"in e)){throw new Error("Invalid service config choice: missing service config")}const t={serviceConfig:validateServiceConfig(e.serviceConfig)};if("clientLanguage"in e){if(Array.isArray(e.clientLanguage)){t.clientLanguage=[];for(const r of e.clientLanguage){if(typeof r==="string"){t.clientLanguage.push(r)}else{throw new Error("Invalid service config choice: invalid clientLanguage")}}}else{throw new Error("Invalid service config choice: invalid clientLanguage")}}if("clientHostname"in e){if(Array.isArray(e.clientHostname)){t.clientHostname=[];for(const r of e.clientHostname){if(typeof r==="string"){t.clientHostname.push(r)}else{throw new Error("Invalid service config choice: invalid clientHostname")}}}else{throw new Error("Invalid service config choice: invalid clientHostname")}}if("percentage"in e){if(typeof e.percentage==="number"&&0<=e.percentage&&e.percentage<=100){t.percentage=e.percentage}else{throw new Error("Invalid service config choice: invalid percentage")}}const r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(const t in e){if(!r.includes(t)){throw new Error(`Invalid service config choice: unexpected field ${t}`)}}return t}function validateAndSelectCanaryConfig(e,t){if(!Array.isArray(e)){throw new Error("Invalid service config list")}for(const r of e){const e=validateCanaryConfig(r);if(typeof e.percentage==="number"&&t>e.percentage){continue}if(Array.isArray(e.clientHostname)){let t=false;for(const r of e.clientHostname){if(r===n.hostname()){t=true}}if(!t){continue}}if(Array.isArray(e.clientLanguage)){let t=false;for(const r of e.clientLanguage){if(r===o){t=true}}if(!t){continue}}return e.serviceConfig}throw new Error("No matching service config found")}function extractAndSelectServiceConfig(e,t){for(const r of e){if(r.length>0&&r[0].startsWith("grpc_config=")){const e=r.join("").substring("grpc_config=".length);const n=JSON.parse(e);return validateAndSelectCanaryConfig(n,t)}}return null}t.extractAndSelectServiceConfig=extractAndSelectServiceConfig},7106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StatusBuilder=void 0;class StatusBuilder{constructor(){this.code=null;this.details=null;this.metadata=null}withCode(e){this.code=e;return this}withDetails(e){this.details=e;return this}withMetadata(e){this.metadata=e;return this}build(){const e={};if(this.code!==null){e.code=this.code}if(this.details!==null){e.details=this.details}if(this.metadata!==null){e.metadata=this.metadata}return e}}t.StatusBuilder=StatusBuilder},4099:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.StreamDecoder=void 0;var r;(function(e){e[e["NO_DATA"]=0]="NO_DATA";e[e["READING_SIZE"]=1]="READING_SIZE";e[e["READING_MESSAGE"]=2]="READING_MESSAGE"})(r||(r={}));class StreamDecoder{constructor(){this.readState=r.NO_DATA;this.readCompressFlag=Buffer.alloc(1);this.readPartialSize=Buffer.alloc(4);this.readSizeRemaining=4;this.readMessageSize=0;this.readPartialMessage=[];this.readMessageRemaining=0}write(e){let t=0;let n;const i=[];while(t<e.length){switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(t,t+1);t+=1;this.readState=r.READING_SIZE;this.readPartialSize.fill(0);this.readSizeRemaining=4;this.readMessageSize=0;this.readMessageRemaining=0;this.readPartialMessage=[];break;case r.READING_SIZE:n=Math.min(e.length-t,this.readSizeRemaining);e.copy(this.readPartialSize,4-this.readSizeRemaining,t,t+n);this.readSizeRemaining-=n;t+=n;if(this.readSizeRemaining===0){this.readMessageSize=this.readPartialSize.readUInt32BE(0);this.readMessageRemaining=this.readMessageSize;if(this.readMessageRemaining>0){this.readState=r.READING_MESSAGE}else{const e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA;i.push(e)}}break;case r.READING_MESSAGE:n=Math.min(e.length-t,this.readMessageRemaining);this.readPartialMessage.push(e.slice(t,t+n));this.readMessageRemaining-=n;t+=n;if(this.readMessageRemaining===0){const e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage);const t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA;i.push(t)}break;default:throw new Error("Unexpected read state")}}return i}}t.StreamDecoder=StreamDecoder},8210:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;const n=r(1808);function isTcpSubchannelAddress(e){return"port"in e}t.isTcpSubchannelAddress=isTcpSubchannelAddress;function subchannelAddressEqual(e,t){if(isTcpSubchannelAddress(e)){return isTcpSubchannelAddress(t)&&e.host===t.host&&e.port===t.port}else{return!isTcpSubchannelAddress(t)&&e.path===t.path}}t.subchannelAddressEqual=subchannelAddressEqual;function subchannelAddressToString(e){if(isTcpSubchannelAddress(e)){return e.host+":"+e.port}else{return e.path}}t.subchannelAddressToString=subchannelAddressToString;const i=443;function stringToSubchannelAddress(e,t){if(n.isIP(e)){return{host:e,port:t!==null&&t!==void 0?t:i}}else{return{path:e}}}t.stringToSubchannelAddress=stringToSubchannelAddress},6785:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BaseSubchannelWrapper=void 0;class BaseSubchannelWrapper{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}}t.BaseSubchannelWrapper=BaseSubchannelWrapper},3095:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getSubchannelPool=t.SubchannelPool=void 0;const n=r(5292);const i=r(4214);const s=r(8210);const o=r(3641);const a=1e4;class SubchannelPool{constructor(){this.pool=Object.create(null);this.cleanupTimer=null}unrefUnusedSubchannels(){let e=true;for(const t in this.pool){const r=this.pool[t];const n=r.filter((e=>!e.subchannel.unrefIfOneRef()));if(n.length>0){e=false}this.pool[t]=n}if(e&&this.cleanupTimer!==null){clearInterval(this.cleanupTimer);this.cleanupTimer=null}}ensureCleanupTask(){var e,t;if(this.cleanupTimer===null){this.cleanupTimer=setInterval((()=>{this.unrefUnusedSubchannels()}),a);(t=(e=this.cleanupTimer).unref)===null||t===void 0?void 0:t.call(e)}}getOrCreateSubchannel(e,t,r,a){this.ensureCleanupTask();const l=o.uriToString(e);if(l in this.pool){const e=this.pool[l];for(const i of e){if(s.subchannelAddressEqual(t,i.subchannelAddress)&&n.channelOptionsEqual(r,i.channelArguments)&&a._equals(i.channelCredentials)){return i.subchannel}}}const c=new i.Subchannel(e,t,r,a);if(!(l in this.pool)){this.pool[l]=[]}this.pool[l].push({subchannelAddress:t,channelArguments:r,channelCredentials:a,subchannel:c});c.ref();return c}}t.SubchannelPool=SubchannelPool;const l=new SubchannelPool;function getSubchannelPool(e){if(e){return l}else{return new SubchannelPool}}t.getSubchannelPool=getSubchannelPool},4214:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Subchannel=void 0;const n=r(5158);const i=r(4404);const s=r(4822);const o=r(9017);const a=r(6280);const l=r(9768);const c=r(6130);const u=r(8837);const d=r(1808);const f=r(3641);const h=r(8210);const p=r(859);const m=r(538).i8;const g="subchannel";const y="subchannel_flowctrl";const v=2e4;const b=1e3;const S=1.6;const _=12e4;const T=.2;const E=~(1<<31);const O=2e4;const{HTTP2_HEADER_AUTHORITY:C,HTTP2_HEADER_CONTENT_TYPE:R,HTTP2_HEADER_METHOD:A,HTTP2_HEADER_PATH:w,HTTP2_HEADER_TE:P,HTTP2_HEADER_USER_AGENT:N}=n.constants;function uniformRandom(e,t){return Math.random()*(t-e)+e}const I=Buffer.from("too_many_pings","ascii");class Subchannel{constructor(e,t,r,n){this.channelTarget=e;this.subchannelAddress=t;this.options=r;this.credentials=n;this.connectivityState=s.ConnectivityState.IDLE;this.session=null;this.continueConnecting=false;this.stateListeners=[];this.disconnectListeners=new Set;this.keepaliveTimeMs=E;this.keepaliveTimeoutMs=O;this.keepaliveWithoutCalls=false;this.callRefcount=0;this.refcount=0;this.channelzEnabled=true;this.callTracker=new p.ChannelzCallTracker;this.childrenTracker=new p.ChannelzChildrenTracker;this.channelzSocketRef=null;this.remoteName=null;this.streamTracker=new p.ChannelzCallTracker;this.keepalivesSent=0;this.messagesSent=0;this.messagesReceived=0;this.lastMessageSentTimestamp=null;this.lastMessageReceivedTimestamp=null;this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${m}`,r["grpc.secondary_user_agent"]].filter((e=>e)).join(" ");if("grpc.keepalive_time_ms"in r){this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]}if("grpc.keepalive_timeout_ms"in r){this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]}if("grpc.keepalive_permit_without_calls"in r){this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1}else{this.keepaliveWithoutCalls=false}this.keepaliveIntervalId=setTimeout((()=>{}),0);clearTimeout(this.keepaliveIntervalId);this.keepaliveTimeoutId=setTimeout((()=>{}),0);clearTimeout(this.keepaliveTimeoutId);const i={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new o.BackoffTimeout((()=>{this.handleBackoffTimer()}),i);this.subchannelAddressString=h.subchannelAddressToString(t);if(r["grpc.enable_channelz"]===0){this.channelzEnabled=false}this.channelzTrace=new p.ChannelzTrace;this.channelzRef=p.registerChannelzSubchannel(this.subchannelAddressString,(()=>this.getChannelzInfo()),this.channelzEnabled);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Subchannel created")}this.trace("Subchannel constructed with options "+JSON.stringify(r,undefined,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}getChannelzSocketInfo(){var e,t,r;if(this.session===null){return null}const n=this.session.socket;const i=n.remoteAddress?h.stringToSubchannelAddress(n.remoteAddress,n.remotePort):null;const s=n.localAddress?h.stringToSubchannelAddress(n.localAddress,n.localPort):null;let o;if(this.session.encrypted){const t=n;const r=t.getCipher();const i=t.getCertificate();const s=t.getPeerCertificate();o={cipherSuiteStandardName:(e=r.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:i&&"raw"in i?i.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else{o=null}const a={remoteAddress:i,localAddress:s,security:o,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(t=this.session.state.localWindowSize)!==null&&t!==void 0?t:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null};return a}resetChannelzSocketInfo(){if(!this.channelzEnabled){return}if(this.channelzSocketRef){p.unregisterChannelzRef(this.channelzSocketRef);this.childrenTracker.unrefChild(this.channelzSocketRef);this.channelzSocketRef=null}this.remoteName=null;this.streamTracker=new p.ChannelzCallTracker;this.keepalivesSent=0;this.messagesSent=0;this.messagesReceived=0;this.lastMessageSentTimestamp=null;this.lastMessageReceivedTimestamp=null}trace(e){l.trace(c.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){l.trace(c.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(c.LogVerbosity.DEBUG,y,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(c.LogVerbosity.DEBUG,"subchannel_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(c.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){if(this.continueConnecting){this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.CONNECTING)}else{this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.IDLE)}}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop();this.backoffTimeout.reset()}sendPing(){var e,t;if(this.channelzEnabled){this.keepalivesSent+=1}this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms");this.keepaliveTimeoutId=setTimeout((()=>{this.keepaliveTrace("Ping timeout passed without response");this.handleDisconnect()}),this.keepaliveTimeoutMs);(t=(e=this.keepaliveTimeoutId).unref)===null||t===void 0?void 0:t.call(e);try{this.session.ping(((e,t,r)=>{this.keepaliveTrace("Received ping response");clearTimeout(this.keepaliveTimeoutId)}))}catch(e){this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE)}}startKeepalivePings(){var e,t;this.keepaliveIntervalId=setInterval((()=>{this.sendPing()}),this.keepaliveTimeMs);(t=(e=this.keepaliveIntervalId).unref)===null||t===void 0?void 0:t.call(e)}stopKeepalivePings(){clearInterval(this.keepaliveIntervalId);clearTimeout(this.keepaliveTimeoutId)}createSession(e){var t,r,o;if(e.realTarget){this.remoteName=f.uriToString(e.realTarget);this.trace("creating HTTP/2 session through proxy to "+e.realTarget)}else{this.remoteName=null;this.trace("creating HTTP/2 session")}const u=a.getDefaultAuthority((t=e.realTarget)!==null&&t!==void 0?t:this.channelTarget);let h=this.credentials._getConnectionOptions()||{};h.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER;if("grpc-node.max_session_memory"in this.options){h.maxSessionMemory=this.options["grpc-node.max_session_memory"]}else{h.maxSessionMemory=Number.MAX_SAFE_INTEGER}let m="http://";if("secureContext"in h){m="https://";if(this.options["grpc.ssl_target_name_override"]){const e=this.options["grpc.ssl_target_name_override"];h.checkServerIdentity=(t,r)=>i.checkServerIdentity(e,r);h.servername=e}else{const e=(o=(r=f.splitHostPort(u))===null||r===void 0?void 0:r.host)!==null&&o!==void 0?o:"localhost";h.servername=e}if(e.socket){h.createConnection=(t,r)=>e.socket}}else{h.createConnection=(t,r)=>{if(e.socket){return e.socket}else{return d.connect(this.subchannelAddress)}}}h=Object.assign(Object.assign({},h),this.subchannelAddress);const y=n.connect(m+u,h);this.session=y;this.channelzSocketRef=p.registerChannelzSocket(this.subchannelAddressString,(()=>this.getChannelzSocketInfo()),this.channelzEnabled);if(this.channelzEnabled){this.childrenTracker.refChild(this.channelzSocketRef)}y.unref();y.once("connect",(()=>{if(this.session===y){this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.READY)}}));y.once("close",(()=>{if(this.session===y){this.trace("connection closed");this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.TRANSIENT_FAILURE);this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.IDLE)}}));y.once("goaway",((e,t,r)=>{if(this.session===y){if(e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r.equals(I)){this.keepaliveTimeMs=Math.min(2*this.keepaliveTimeMs,E);l.log(c.LogVerbosity.ERROR,`Connection to ${f.uriToString(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTimeMs} ms`)}this.trace("connection closed by GOAWAY with code "+e);this.transitionToState([s.ConnectivityState.CONNECTING,s.ConnectivityState.READY],s.ConnectivityState.IDLE)}}));y.once("error",(e=>{this.trace("connection closed with error "+e.message)}));if(l.isTracerEnabled(g)){y.on("remoteSettings",(e=>{this.trace("new settings received"+(this.session!==y?" on the old connection":"")+": "+JSON.stringify(e))}));y.on("localSettings",(e=>{this.trace("local settings acknowledged by remote"+(this.session!==y?" on the old connection":"")+": "+JSON.stringify(e))}))}}startConnectingInternal(){var e,t;const r=this.credentials._getConnectionOptions()||{};if("secureContext"in r){r.ALPNProtocols=["h2"];if(this.options["grpc.ssl_target_name_override"]){const e=this.options["grpc.ssl_target_name_override"];r.checkServerIdentity=(t,r)=>i.checkServerIdentity(e,r);r.servername=e}else{if("grpc.http_connect_target"in this.options){const n=a.getDefaultAuthority((e=f.parseUri(this.options["grpc.http_connect_target"]))!==null&&e!==void 0?e:{path:"localhost"});const i=f.splitHostPort(n);r.servername=(t=i===null||i===void 0?void 0:i.host)!==null&&t!==void 0?t:n}}}u.getProxiedConnection(this.subchannelAddress,this.options,r).then((e=>{this.createSession(e)}),(e=>{this.transitionToState([s.ConnectivityState.CONNECTING],s.ConnectivityState.TRANSIENT_FAILURE)}))}handleDisconnect(){this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE);for(const e of this.disconnectListeners.values()){e()}}transitionToState(e,t){if(e.indexOf(this.connectivityState)===-1){return false}this.trace(s.ConnectivityState[this.connectivityState]+" -> "+s.ConnectivityState[t]);if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO",s.ConnectivityState[this.connectivityState]+" -> "+s.ConnectivityState[t])}const r=this.connectivityState;this.connectivityState=t;switch(t){case s.ConnectivityState.READY:this.stopBackoff();const e=this.session;e.socket.once("close",(()=>{if(this.session===e){this.handleDisconnect()}}));if(this.keepaliveWithoutCalls){this.startKeepalivePings()}break;case s.ConnectivityState.CONNECTING:this.startBackoff();this.startConnectingInternal();this.continueConnecting=false;break;case s.ConnectivityState.TRANSIENT_FAILURE:if(this.session){this.session.close()}this.session=null;this.resetChannelzSocketInfo();this.stopKeepalivePings();if(!this.backoffTimeout.isRunning()){process.nextTick((()=>{this.handleBackoffTimer()}))}break;case s.ConnectivityState.IDLE:if(this.session){this.session.close()}this.session=null;this.resetChannelzSocketInfo();this.stopKeepalivePings();break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(const e of[...this.stateListeners]){e(this,r,t)}return true}checkBothRefcounts(){if(this.callRefcount===0&&this.refcount===0){if(this.channelzEnabled){this.channelzTrace.addTrace("CT_INFO","Shutting down")}this.transitionToState([s.ConnectivityState.CONNECTING,s.ConnectivityState.READY],s.ConnectivityState.IDLE);if(this.channelzEnabled){p.unregisterChannelzRef(this.channelzRef)}}}callRef(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount+1));if(this.callRefcount===0){if(this.session){this.session.ref()}this.backoffTimeout.ref();if(!this.keepaliveWithoutCalls){this.startKeepalivePings()}}this.callRefcount+=1}callUnref(){this.refTrace("callRefcount "+this.callRefcount+" -> "+(this.callRefcount-1));this.callRefcount-=1;if(this.callRefcount===0){if(this.session){this.session.unref()}this.backoffTimeout.unref();if(!this.keepaliveWithoutCalls){clearInterval(this.keepaliveIntervalId)}this.checkBothRefcounts()}}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1));this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1));this.refcount-=1;this.checkBothRefcounts()}unrefIfOneRef(){if(this.refcount===1){this.unref();return true}return false}startCallStream(e,t,r){const n=e.toHttp2Headers();n[C]=t.getHost();n[N]=this.userAgent;n[R]="application/grpc";n[A]="POST";n[w]=t.getMethod();n[P]="trailers";let i;try{i=this.session.request(n)}catch(e){this.transitionToState([s.ConnectivityState.READY],s.ConnectivityState.TRANSIENT_FAILURE);throw e}let o="";for(const e of Object.keys(n)){o+="\t\t"+e+": "+n[e]+"\n"}l.trace(c.LogVerbosity.DEBUG,"call_stream","Starting stream ["+t.getCallNumber()+"] on subchannel "+"("+this.channelzRef.id+") "+this.subchannelAddressString+" with headers\n"+o);this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize);const a=this.session;this.internalsTrace("session.closed="+a.closed+" session.destroyed="+a.destroyed+" session.socket.destroyed="+a.socket.destroyed);let u;if(this.channelzEnabled){this.callTracker.addCallStarted();t.addStatusWatcher((e=>{if(e.code===c.Status.OK){this.callTracker.addCallSucceeded()}else{this.callTracker.addCallFailed()}}));this.streamTracker.addCallStarted();t.addStreamEndWatcher((e=>{if(a===this.session){if(e){this.streamTracker.addCallSucceeded()}else{this.streamTracker.addCallFailed()}}}));u={addMessageSent:()=>{this.messagesSent+=1;this.lastMessageSentTimestamp=new Date},addMessageReceived:()=>{this.messagesReceived+=1}}}else{u={addMessageSent:()=>{},addMessageReceived:()=>{}}}t.attachHttp2Stream(i,this,r,u)}startConnecting(){if(!this.transitionToState([s.ConnectivityState.IDLE],s.ConnectivityState.CONNECTING)){if(this.connectivityState===s.ConnectivityState.TRANSIENT_FAILURE){this.continueConnecting=true}}}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){const t=this.stateListeners.indexOf(e);if(t>-1){this.stateListeners.splice(t,1)}}addDisconnectListener(e){this.disconnectListeners.add(e)}removeDisconnectListener(e){this.disconnectListeners.delete(e)}resetBackoff(){this.backoffTimeout.reset();this.transitionToState([s.ConnectivityState.TRANSIENT_FAILURE],s.ConnectivityState.CONNECTING)}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}}t.Subchannel=Subchannel},1589:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getDefaultRootsData=t.CIPHER_SUITES=void 0;const n=r(7147);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;const i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH;let s=null;function getDefaultRootsData(){if(i){if(s===null){s=n.readFileSync(i)}return s}return null}t.getDefaultRootsData=getDefaultRootsData},3641:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.uriToString=t.splitHostPort=t.parseUri=void 0;const r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function parseUri(e){const t=r.exec(e);if(t===null){return null}return{scheme:t[1],authority:t[2],path:t[3]}}t.parseUri=parseUri;const n=/^\d+$/;function splitHostPort(e){if(e.startsWith("[")){const t=e.indexOf("]");if(t===-1){return null}const r=e.substring(1,t);if(r.indexOf(":")===-1){return null}if(e.length>t+1){if(e[t+1]===":"){const i=e.substring(t+2);if(n.test(i)){return{host:r,port:+i}}else{return null}}else{return null}}else{return{host:r}}}else{const t=e.split(":");if(t.length===2){if(n.test(t[1])){return{host:t[0],port:+t[1]}}else{return null}}else{return{host:e}}}}t.splitHostPort=splitHostPort;function uriToString(e){let t="";if(e.scheme!==undefined){t+=e.scheme+":"}if(e.authority!==undefined){t+="//"+e.authority+"/"}t+=e.path;return t}t.uriToString=uriToString},4278:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:true});const n=r(5276);const i=r(8571);const s=r(7298);const o=r(7784);const a=r(4389);t.Long=a;function isAnyExtension(e){return"@type"in e&&typeof e["@type"]==="string"}t.isAnyExtension=isAnyExtension;const l={longs:String,enums:String,bytes:String,defaults:true,oneofs:true,json:true};function joinName(e,t){if(e===""){return t}else{return e+"."+t}}function isHandledReflectionObject(e){return e instanceof i.Service||e instanceof i.Type||e instanceof i.Enum}function isNamespaceBase(e){return e instanceof i.Namespace||e instanceof i.Root}function getAllHandledReflectionObjects(e,t){const r=joinName(t,e.name);if(isHandledReflectionObject(e)){return[[r,e]]}else{if(isNamespaceBase(e)&&typeof e.nested!=="undefined"){return Object.keys(e.nested).map((t=>getAllHandledReflectionObjects(e.nested[t],r))).reduce(((e,t)=>e.concat(t)),[])}}return[]}function createDeserializer(e,t){return function deserialize(r){return e.toObject(e.decode(r),t)}}function createSerializer(e){return function serialize(t){if(Array.isArray(t)){throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`)}const r=e.fromObject(t);return e.encode(r).finish()}}function createMethodDefinition(e,t,r,i){const s=e.resolvedRequestType;const o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:createSerializer(s),requestDeserialize:createDeserializer(s,r),responseSerialize:createSerializer(o),responseDeserialize:createDeserializer(o,r),originalName:n(e.name),requestType:createMessageDefinition(s,i),responseType:createMessageDefinition(o,i)}}function createServiceDefinition(e,t,r,n){const i={};for(const s of e.methodsArray){i[s.name]=createMethodDefinition(s,t,r,n)}return i}function createMessageDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function createEnumDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,l),fileDescriptorProtos:t}}function createDefinition(e,t,r,n){if(e instanceof i.Service){return createServiceDefinition(e,t,r,n)}else if(e instanceof i.Type){return createMessageDefinition(e,n)}else if(e instanceof i.Enum){return createEnumDefinition(e,n)}else{throw new Error("Type mismatch in reflection object handling")}}function createPackageDefinition(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file;const i=n.map((e=>Buffer.from(s.FileDescriptorProto.encode(e).finish())));for(const[n,s]of getAllHandledReflectionObjects(e,"")){r[n]=createDefinition(s,n,t,i)}return r}function createPackageDefinitionFromDescriptorSet(e,t){t=t||{};const r=i.Root.fromDescriptor(e);r.resolveAll();return createPackageDefinition(r,t)}function load(e,t){return o.loadProtosWithOptions(e,t).then((e=>createPackageDefinition(e,t)))}t.load=load;function loadSync(e,t){const r=o.loadProtosWithOptionsSync(e,t);return createPackageDefinition(r,t)}t.loadSync=loadSync;function fromJSON(e,t){t=t||{};const r=i.Root.fromJSON(e);r.resolveAll();return createPackageDefinition(r,t)}t.fromJSON=fromJSON;function loadFileDescriptorSetFromBuffer(e,t){const r=s.FileDescriptorSet.decode(e);return createPackageDefinitionFromDescriptorSet(r,t)}t.loadFileDescriptorSetFromBuffer=loadFileDescriptorSetFromBuffer;function loadFileDescriptorSetFromObject(e,t){const r=s.FileDescriptorSet.fromObject(e);return createPackageDefinitionFromDescriptorSet(r,t)}t.loadFileDescriptorSetFromObject=loadFileDescriptorSetFromObject;o.addCommonProtos()},7784:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:true});const n=r(7147);const i=r(1017);const s=r(8571);function addIncludePathResolver(e,t){const r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s)){return s}for(const e of t){const t=i.join(e,s);try{n.accessSync(t,n.constants.R_OK);return t}catch(e){continue}}process.emitWarning(`${s} not found in any of the include paths ${t}`);return r(e,s)}}async function loadProtosWithOptions(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){return Promise.reject(new Error("The includeDirs option must be an array"))}addIncludePathResolver(r,t.includeDirs)}const n=await r.load(e,t);n.resolveAll();return n}t.loadProtosWithOptions=loadProtosWithOptions;function loadProtosWithOptionsSync(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){throw new Error("The includeDirs option must be an array")}addIncludePathResolver(r,t.includeDirs)}const n=r.loadSync(e,t);n.resolveAll();return n}t.loadProtosWithOptionsSync=loadProtosWithOptionsSync;function addCommonProtos(){const e=r(4401);const t=r(7270);const n=r(7492);const i=r(6129);s.common("api",e.nested.google.nested.protobuf.nested);s.common("descriptor",t.nested.google.nested.protobuf.nested);s.common("source_context",n.nested.google.nested.protobuf.nested);s.common("type",i.nested.google.nested.protobuf.nested)}t.addCommonProtos=addCommonProtos},4688:(e,t,r)=>{"use strict";var n;
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */n={value:true};n=n=n=t.J_=n=n=n=void 0;const i=r(5276);const s=r(631);const o=r(9180);const a=r(2090);const l=r(4389);n=l;function isAnyExtension(e){return"@type"in e&&typeof e["@type"]==="string"}n=isAnyExtension;const c={longs:String,enums:String,bytes:String,defaults:true,oneofs:true,json:true};function joinName(e,t){if(e===""){return t}else{return e+"."+t}}function isHandledReflectionObject(e){return e instanceof s.Service||e instanceof s.Type||e instanceof s.Enum}function isNamespaceBase(e){return e instanceof s.Namespace||e instanceof s.Root}function getAllHandledReflectionObjects(e,t){const r=joinName(t,e.name);if(isHandledReflectionObject(e)){return[[r,e]]}else{if(isNamespaceBase(e)&&typeof e.nested!=="undefined"){return Object.keys(e.nested).map((t=>getAllHandledReflectionObjects(e.nested[t],r))).reduce(((e,t)=>e.concat(t)),[])}}return[]}function createDeserializer(e,t){return function deserialize(r){return e.toObject(e.decode(r),t)}}function createSerializer(e){return function serialize(t){if(Array.isArray(t)){throw new Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`)}const r=e.fromObject(t);return e.encode(r).finish()}}function createMethodDefinition(e,t,r,n){const s=e.resolvedRequestType;const o=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:createSerializer(s),requestDeserialize:createDeserializer(s,r),responseSerialize:createSerializer(o),responseDeserialize:createDeserializer(o,r),originalName:i(e.name),requestType:createMessageDefinition(s,n),responseType:createMessageDefinition(o,n)}}function createServiceDefinition(e,t,r,n){const i={};for(const s of e.methodsArray){i[s.name]=createMethodDefinition(s,t,r,n)}return i}function createMessageDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,c),fileDescriptorProtos:t}}function createEnumDefinition(e,t){const r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,c),fileDescriptorProtos:t}}function createDefinition(e,t,r,n){if(e instanceof s.Service){return createServiceDefinition(e,t,r,n)}else if(e instanceof s.Type){return createMessageDefinition(e,n)}else if(e instanceof s.Enum){return createEnumDefinition(e,n)}else{throw new Error("Type mismatch in reflection object handling")}}function createPackageDefinition(e,t){const r={};e.resolveAll();const n=e.toDescriptor("proto3").file;const i=n.map((e=>Buffer.from(o.FileDescriptorProto.encode(e).finish())));for(const[n,s]of getAllHandledReflectionObjects(e,"")){r[n]=createDefinition(s,n,t,i)}return r}function createPackageDefinitionFromDescriptorSet(e,t){t=t||{};const r=s.Root.fromDescriptor(e);r.resolveAll();return createPackageDefinition(r,t)}function load(e,t){return(0,a.loadProtosWithOptions)(e,t).then((e=>createPackageDefinition(e,t)))}n=load;function loadSync(e,t){const r=(0,a.loadProtosWithOptionsSync)(e,t);return createPackageDefinition(r,t)}t.J_=loadSync;function fromJSON(e,t){t=t||{};const r=s.Root.fromJSON(e);r.resolveAll();return createPackageDefinition(r,t)}n=fromJSON;function loadFileDescriptorSetFromBuffer(e,t){const r=o.FileDescriptorSet.decode(e);return createPackageDefinitionFromDescriptorSet(r,t)}n=loadFileDescriptorSetFromBuffer;function loadFileDescriptorSetFromObject(e,t){const r=o.FileDescriptorSet.fromObject(e);return createPackageDefinitionFromDescriptorSet(r,t)}n=loadFileDescriptorSetFromObject;(0,a.addCommonProtos)()},2090:(e,t,r)=>{"use strict";
/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:true});t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;const n=r(7147);const i=r(1017);const s=r(631);function addIncludePathResolver(e,t){const r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s)){return s}for(const e of t){const t=i.join(e,s);try{n.accessSync(t,n.constants.R_OK);return t}catch(e){continue}}process.emitWarning(`${s} not found in any of the include paths ${t}`);return r(e,s)}}async function loadProtosWithOptions(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){return Promise.reject(new Error("The includeDirs option must be an array"))}addIncludePathResolver(r,t.includeDirs)}const n=await r.load(e,t);n.resolveAll();return n}t.loadProtosWithOptions=loadProtosWithOptions;function loadProtosWithOptionsSync(e,t){const r=new s.Root;t=t||{};if(!!t.includeDirs){if(!Array.isArray(t.includeDirs)){throw new Error("The includeDirs option must be an array")}addIncludePathResolver(r,t.includeDirs)}const n=r.loadSync(e,t);n.resolveAll();return n}t.loadProtosWithOptionsSync=loadProtosWithOptionsSync;function addCommonProtos(){const e=r(8189);const t=r(2903);const n=r(6770);const i=r(2472);s.common("api",e.nested.google.nested.protobuf.nested);s.common("descriptor",t.nested.google.nested.protobuf.nested);s.common("source_context",n.nested.google.nested.protobuf.nested);s.common("type",i.nested.google.nested.protobuf.nested)}t.addCommonProtos=addCommonProtos},8123:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class NoopMeter{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=NoopMeter;class NoopMetric{}t.NoopMetric=NoopMetric;class NoopCounterMetric extends NoopMetric{add(e,t){}}t.NoopCounterMetric=NoopCounterMetric;class NoopUpDownCounterMetric extends NoopMetric{add(e,t){}}t.NoopUpDownCounterMetric=NoopUpDownCounterMetric;class NoopHistogramMetric extends NoopMetric{record(e,t){}}t.NoopHistogramMetric=NoopHistogramMetric;class NoopObservableMetric{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=NoopObservableMetric;class NoopObservableCounterMetric extends NoopObservableMetric{}t.NoopObservableCounterMetric=NoopObservableCounterMetric;class NoopObservableGaugeMetric extends NoopObservableMetric{}t.NoopObservableGaugeMetric=NoopObservableGaugeMetric;class NoopObservableUpDownCounterMetric extends NoopObservableMetric{}t.NoopObservableUpDownCounterMetric=NoopObservableUpDownCounterMetric;t.NOOP_METER=new NoopMeter;t.NOOP_COUNTER_METRIC=new NoopCounterMetric;t.NOOP_HISTOGRAM_METRIC=new NoopHistogramMetric;t.NOOP_UP_DOWN_COUNTER_METRIC=new NoopUpDownCounterMetric;t.NOOP_OBSERVABLE_COUNTER_METRIC=new NoopObservableCounterMetric;t.NOOP_OBSERVABLE_GAUGE_METRIC=new NoopObservableGaugeMetric;t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new NoopObservableUpDownCounterMetric},8767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;const n=r(8123);class NoopMeterProvider{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=NoopMeterProvider;t.NOOP_METER_PROVIDER=new NoopMeterProvider},9501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.API_BACKWARDS_COMPATIBILITY_VERSION=t.makeGetter=t._global=t.GLOBAL_METRICS_API_KEY=void 0;const n=r(3949);t.GLOBAL_METRICS_API_KEY=Symbol.for("io.opentelemetry.js.api.metrics");t._global=n._globalThis;function makeGetter(e,t,r){return n=>n===e?t:r}t.makeGetter=makeGetter;t.API_BACKWARDS_COMPATIBILITY_VERSION=4},3040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetricsAPI=void 0;const n=r(8767);const i=r(9501);class MetricsAPI{constructor(){}static getInstance(){if(!this._instance){this._instance=new MetricsAPI}return this._instance}setGlobalMeterProvider(e){if(i._global[i.GLOBAL_METRICS_API_KEY]){return this.getMeterProvider()}i._global[i.GLOBAL_METRICS_API_KEY]=(0,i.makeGetter)(i.API_BACKWARDS_COMPATIBILITY_VERSION,e,n.NOOP_METER_PROVIDER);return e}getMeterProvider(){var e,t;return(t=(e=i._global[i.GLOBAL_METRICS_API_KEY])===null||e===void 0?void 0:e.call(i._global,i.API_BACKWARDS_COMPATIBILITY_VERSION))!==null&&t!==void 0?t:n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){delete i._global[i.GLOBAL_METRICS_API_KEY]}}t.MetricsAPI=MetricsAPI},2180:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.metrics=void 0;i(r(8123),t);i(r(8767),t);i(r(9896),t);i(r(9525),t);i(r(5343),t);i(r(2315),t);const s=r(3040);t.metrics=s.MetricsAPI.getInstance()},3949:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(1297),t)},4058:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t._globalThis=void 0;t._globalThis=typeof globalThis==="object"?globalThis:global},1297:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(4058),t)},9896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},9525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},5343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ValueType=void 0;var r;(function(e){e[e["INT"]=0]="INT";e[e["DOUBLE"]=1]="DOUBLE"})(r=t.ValueType||(t.ValueType={}))},2315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},577:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExportResultCode=void 0;var r;(function(e){e[e["SUCCESS"]=0]="SUCCESS";e[e["FAILED"]=1]="FAILED"})(r=t.ExportResultCode||(t.ExportResultCode={}))},4466:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BAGGAGE_MAX_TOTAL_LENGTH=t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=t.BAGGAGE_MAX_NAME_VALUE_PAIRS=t.BAGGAGE_HEADER=t.BAGGAGE_ITEMS_SEPARATOR=t.BAGGAGE_PROPERTIES_SEPARATOR=t.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;t.BAGGAGE_KEY_PAIR_SEPARATOR="=";t.BAGGAGE_PROPERTIES_SEPARATOR=";";t.BAGGAGE_ITEMS_SEPARATOR=",";t.BAGGAGE_HEADER="baggage";t.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;t.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;t.BAGGAGE_MAX_TOTAL_LENGTH=8192},9537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.W3CBaggagePropagator=void 0;const n=r(8720);const i=r(9665);const s=r(4466);const o=r(1760);class W3CBaggagePropagator{inject(e,t,r){const a=n.propagation.getBaggage(e);if(!a||(0,i.isTracingSuppressed)(e))return;const l=(0,o.getKeyPairs)(a).filter((e=>e.length<=s.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS)).slice(0,s.BAGGAGE_MAX_NAME_VALUE_PAIRS);const c=(0,o.serializeKeyPairs)(l);if(c.length>0){r.set(t,s.BAGGAGE_HEADER,c)}}extract(e,t,r){const i=r.get(t,s.BAGGAGE_HEADER);const a=Array.isArray(i)?i.join(s.BAGGAGE_ITEMS_SEPARATOR):i;if(!a)return e;const l={};if(a.length===0){return e}const c=a.split(s.BAGGAGE_ITEMS_SEPARATOR);c.forEach((e=>{const t=(0,o.parsePairKeyValue)(e);if(t){const e={value:t.value};if(t.metadata){e.metadata=t.metadata}l[t.key]=e}}));if(Object.entries(l).length===0){return e}return n.propagation.setBaggage(e,n.propagation.createBaggage(l))}fields(){return[s.BAGGAGE_HEADER]}}t.W3CBaggagePropagator=W3CBaggagePropagator},1760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.parseKeyPairsIntoRecord=t.parsePairKeyValue=t.getKeyPairs=t.serializeKeyPairs=void 0;const n=r(8720);const i=r(4466);function serializeKeyPairs(e){return e.reduce(((e,t)=>{const r=`${e}${e!==""?i.BAGGAGE_ITEMS_SEPARATOR:""}${t}`;return r.length>i.BAGGAGE_MAX_TOTAL_LENGTH?e:r}),"")}t.serializeKeyPairs=serializeKeyPairs;function getKeyPairs(e){return e.getAllEntries().map((([e,t])=>{let r=`${encodeURIComponent(e)}=${encodeURIComponent(t.value)}`;if(t.metadata!==undefined){r+=i.BAGGAGE_PROPERTIES_SEPARATOR+t.metadata.toString()}return r}))}t.getKeyPairs=getKeyPairs;function parsePairKeyValue(e){const t=e.split(i.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;const r=t.shift();if(!r)return;const s=r.split(i.BAGGAGE_KEY_PAIR_SEPARATOR);if(s.length!==2)return;const o=decodeURIComponent(s[0].trim());const a=decodeURIComponent(s[1].trim());let l;if(t.length>0){l=(0,n.baggageEntryMetadataFromString)(t.join(i.BAGGAGE_PROPERTIES_SEPARATOR))}return{key:o,value:a,metadata:l}}t.parsePairKeyValue=parsePairKeyValue;function parseKeyPairsIntoRecord(e){if(typeof e!=="string"||e.length===0)return{};return e.split(i.BAGGAGE_ITEMS_SEPARATOR).map((e=>parsePairKeyValue(e))).filter((e=>e!==undefined&&e.value.length>0)).reduce(((e,t)=>{e[t.key]=t.value;return e}),{})}t.parseKeyPairsIntoRecord=parseKeyPairsIntoRecord},8908:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isAttributeValue=t.isAttributeKey=t.sanitizeAttributes=void 0;const n=r(8720);function sanitizeAttributes(e){const t={};if(typeof e!=="object"||e==null){return t}for(const[r,i]of Object.entries(e)){if(!isAttributeKey(r)){n.diag.warn(`Invalid attribute key: ${r}`);continue}if(!isAttributeValue(i)){n.diag.warn(`Invalid attribute value set for key: ${r}`);continue}if(Array.isArray(i)){t[r]=i.slice()}else{t[r]=i}}return t}t.sanitizeAttributes=sanitizeAttributes;function isAttributeKey(e){return typeof e==="string"&&e.length>0}t.isAttributeKey=isAttributeKey;function isAttributeValue(e){if(e==null){return true}if(Array.isArray(e)){return isHomogeneousAttributeValueArray(e)}return isValidPrimitiveAttributeValue(e)}t.isAttributeValue=isAttributeValue;function isHomogeneousAttributeValueArray(e){let t;for(const r of e){if(r==null)continue;if(!t){if(isValidPrimitiveAttributeValue(r)){t=typeof r;continue}return false}if(typeof r===t){continue}return false}return true}function isValidPrimitiveAttributeValue(e){switch(typeof e){case"number":case"boolean":case"string":return true}return false}},5943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.globalErrorHandler=t.setGlobalErrorHandler=void 0;const n=r(1162);let i=(0,n.loggingErrorHandler)();function setGlobalErrorHandler(e){i=e}t.setGlobalErrorHandler=setGlobalErrorHandler;function globalErrorHandler(e){try{i(e)}catch(e){}}t.globalErrorHandler=globalErrorHandler},1162:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.loggingErrorHandler=void 0;const n=r(8720);function loggingErrorHandler(){return e=>{n.diag.error(stringifyException(e))}}t.loggingErrorHandler=loggingErrorHandler;function stringifyException(e){if(typeof e==="string"){return e}else{return JSON.stringify(flattenException(e))}}function flattenException(e){const t={};let r=e;while(r!==null){Object.getOwnPropertyNames(r).forEach((e=>{if(t[e])return;const n=r[e];if(n){t[e]=String(n)}}));r=Object.getPrototypeOf(r)}return t}},9750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isTimeInput=t.isTimeInputHrTime=t.hrTimeToMicroseconds=t.hrTimeToMilliseconds=t.hrTimeToNanoseconds=t.hrTimeToTimeStamp=t.hrTimeDuration=t.timeInputToHrTime=t.hrTime=void 0;const n=r(2383);const i=9;const s=Math.pow(10,i);function numberToHrtime(e){const t=e/1e3;const r=Math.trunc(t);const n=Number((t-r).toFixed(i))*s;return[r,n]}function getTimeOrigin(){let e=n.otperformance.timeOrigin;if(typeof e!=="number"){const t=n.otperformance;e=t.timing&&t.timing.fetchStart}return e}function hrTime(e){const t=numberToHrtime(getTimeOrigin());const r=numberToHrtime(typeof e==="number"?e:n.otperformance.now());let i=t[0]+r[0];let o=t[1]+r[1];if(o>s){o-=s;i+=1}return[i,o]}t.hrTime=hrTime;function timeInputToHrTime(e){if(isTimeInputHrTime(e)){return e}else if(typeof e==="number"){if(e<getTimeOrigin()){return hrTime(e)}else{return numberToHrtime(e)}}else if(e instanceof Date){return numberToHrtime(e.getTime())}else{throw TypeError("Invalid input type")}}t.timeInputToHrTime=timeInputToHrTime;function hrTimeDuration(e,t){let r=t[0]-e[0];let n=t[1]-e[1];if(n<0){r-=1;n+=s}return[r,n]}t.hrTimeDuration=hrTimeDuration;function hrTimeToTimeStamp(e){const t=i;const r=`${"0".repeat(t)}${e[1]}Z`;const n=r.substr(r.length-t-1);const s=new Date(e[0]*1e3).toISOString();return s.replace("000Z",n)}t.hrTimeToTimeStamp=hrTimeToTimeStamp;function hrTimeToNanoseconds(e){return e[0]*s+e[1]}t.hrTimeToNanoseconds=hrTimeToNanoseconds;function hrTimeToMilliseconds(e){return Math.round(e[0]*1e3+e[1]/1e6)}t.hrTimeToMilliseconds=hrTimeToMilliseconds;function hrTimeToMicroseconds(e){return Math.round(e[0]*1e6+e[1]/1e3)}t.hrTimeToMicroseconds=hrTimeToMicroseconds;function isTimeInputHrTime(e){return Array.isArray(e)&&e.length===2&&typeof e[0]==="number"&&typeof e[1]==="number"}t.isTimeInputHrTime=isTimeInputHrTime;function isTimeInput(e){return isTimeInputHrTime(e)||typeof e==="number"||e instanceof Date}t.isTimeInput=isTimeInput},9652:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},8485:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.baggageUtils=void 0;i(r(9537),t);i(r(8908),t);i(r(5943),t);i(r(1162),t);i(r(9750),t);i(r(9652),t);i(r(577),t);i(r(7943),t);t.baggageUtils=r(1760);i(r(2383),t);i(r(5617),t);i(r(8708),t);i(r(1963),t);i(r(9259),t);i(r(8875),t);i(r(9971),t);i(r(8302),t);i(r(1717),t);i(r(9665),t);i(r(1599),t);i(r(9651),t);i(r(348),t);i(r(5572),t);i(r(4394),t);i(r(4630),t);i(r(7820),t);i(r(7943),t)},7849:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateValue=t.validateKey=void 0;const r="[_0-9a-z-*/]";const n=`[a-z]${r}{0,255}`;const i=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`;const s=new RegExp(`^(?:${n}|${i})$`);const o=/^[ -~]{0,255}[!-~]$/;const a=/,|=/;function validateKey(e){return s.test(e)}t.validateKey=validateKey;function validateValue(e){return o.test(e)&&!a.test(e)}t.validateValue=validateValue},5760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t._globalThis=void 0;t._globalThis=typeof globalThis==="object"?globalThis:typeof self==="object"?self:typeof window==="object"?window:typeof global==="object"?global:{}},2383:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(4708),t)},8799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RandomIdGenerator=void 0;const r=8;const n=16;class RandomIdGenerator{constructor(){this.generateTraceId=getIdGenerator(n);this.generateSpanId=getIdGenerator(r)}}t.RandomIdGenerator=RandomIdGenerator;const i=Buffer.allocUnsafe(n);function getIdGenerator(e){return function generateId(){for(let t=0;t<e/4;t++){i.writeUInt32BE(Math.random()*2**32>>>0,t*4)}for(let t=0;t<e;t++){if(i[t]>0){break}else if(t===e-1){i[e-1]=1}}return i.toString("hex",0,e)}}},9709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getEnv=void 0;const n=r(2037);const i=r(9651);function getEnv(){const e=(0,i.parseEnvironment)(process.env);return Object.assign({HOSTNAME:n.hostname()},i.DEFAULT_ENVIRONMENT,e)}t.getEnv=getEnv},8924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t._globalThis=void 0;t._globalThis=typeof globalThis==="object"?globalThis:global},1443:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.hexToBase64=void 0;function intValue(e){if(e>=48&&e<=57){return e-48}if(e>=97&&e<=102){return e-87}return e-55}const r=Buffer.alloc(8);const n=Buffer.alloc(16);function hexToBase64(e){let t;if(e.length===16){t=r}else if(e.length===32){t=n}else{t=Buffer.alloc(e.length/2)}let i=0;for(let r=0;r<e.length;r+=2){const n=intValue(e.charCodeAt(r));const s=intValue(e.charCodeAt(r+1));t.writeUInt8(n<<4|s,i++)}return t.toString("base64")}t.hexToBase64=hexToBase64},4708:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(9709),t);i(r(8924),t);i(r(1443),t);i(r(8799),t);i(r(5894),t);i(r(8254),t);i(r(6157),t)},5894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.otperformance=void 0;const n=r(4074);t.otperformance=n.performance},8254:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SDK_INFO=void 0;const n=r(7943);const i=r(3190);t.SDK_INFO={[i.SemanticResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[i.SemanticResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[i.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE]:i.TelemetrySdkLanguageValues.NODEJS,[i.SemanticResourceAttributes.TELEMETRY_SDK_VERSION]:n.VERSION}},6157:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.unrefTimer=void 0;function unrefTimer(e){e.unref()}t.unrefTimer=unrefTimer},5617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompositePropagator=void 0;const n=r(8720);class CompositePropagator{constructor(e={}){var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[];this._fields=Array.from(new Set(this._propagators.map((e=>typeof e.fields==="function"?e.fields():[])).reduce(((e,t)=>e.concat(t)),[])))}inject(e,t,r){for(const i of this._propagators){try{i.inject(e,t,r)}catch(e){n.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}}}extract(e,t,r){return this._propagators.reduce(((e,i)=>{try{return i.extract(e,t,r)}catch(e){n.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${e.message}`)}return e}),e)}fields(){return this._fields.slice()}}t.CompositePropagator=CompositePropagator},1963:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},1599:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TraceState=void 0;const n=r(7849);const i=32;const s=512;const o=",";const a="=";class TraceState{constructor(e){this._internalState=new Map;if(e)this._parse(e)}set(e,t){const r=this._clone();if(r._internalState.has(e)){r._internalState.delete(e)}r._internalState.set(e,t);return r}unset(e){const t=this._clone();t._internalState.delete(e);return t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce(((e,t)=>{e.push(t+a+this.get(t));return e}),[]).join(o)}_parse(e){if(e.length>s)return;this._internalState=e.split(o).reverse().reduce(((e,t)=>{const r=t.trim();const i=r.indexOf(a);if(i!==-1){const s=r.slice(0,i);const o=r.slice(i+1,t.length);if((0,n.validateKey)(s)&&(0,n.validateValue)(o)){e.set(s,o)}else{}}return e}),new Map);if(this._internalState.size>i){this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,i))}}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const e=new TraceState;e._internalState=new Map(this._internalState);return e}}t.TraceState=TraceState},8708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.W3CTraceContextPropagator=t.parseTraceParent=t.TRACE_STATE_HEADER=t.TRACE_PARENT_HEADER=void 0;const n=r(8720);const i=r(9665);const s=r(1599);t.TRACE_PARENT_HEADER="traceparent";t.TRACE_STATE_HEADER="tracestate";const o="00";const a="(?!ff)[\\da-f]{2}";const l="(?![0]{32})[\\da-f]{32}";const c="(?![0]{16})[\\da-f]{16}";const u="[\\da-f]{2}";const d=new RegExp(`^\\s?(${a})-(${l})-(${c})-(${u})(-.*)?\\s?$`);function parseTraceParent(e){const t=d.exec(e);if(!t)return null;if(t[1]==="00"&&t[5])return null;return{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}t.parseTraceParent=parseTraceParent;class W3CTraceContextPropagator{inject(e,r,s){const a=n.trace.getSpanContext(e);if(!a||(0,i.isTracingSuppressed)(e)||!(0,n.isSpanContextValid)(a))return;const l=`${o}-${a.traceId}-${a.spanId}-0${Number(a.traceFlags||n.TraceFlags.NONE).toString(16)}`;s.set(r,t.TRACE_PARENT_HEADER,l);if(a.traceState){s.set(r,t.TRACE_STATE_HEADER,a.traceState.serialize())}}extract(e,r,i){const o=i.get(r,t.TRACE_PARENT_HEADER);if(!o)return e;const a=Array.isArray(o)?o[0]:o;if(typeof a!=="string")return e;const l=parseTraceParent(a);if(!l)return e;l.isRemote=true;const c=i.get(r,t.TRACE_STATE_HEADER);if(c){const e=Array.isArray(c)?c.join(","):c;l.traceState=new s.TraceState(typeof e==="string"?e:undefined)}return n.trace.setSpanContext(e,l)}fields(){return[t.TRACE_PARENT_HEADER,t.TRACE_STATE_HEADER]}}t.W3CTraceContextPropagator=W3CTraceContextPropagator},9259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getRPCMetadata=t.deleteRPCMetadata=t.setRPCMetadata=t.RPCType=void 0;const n=r(8720);const i=(0,n.createContextKey)("OpenTelemetry SDK Context Key RPC_METADATA");var s;(function(e){e["HTTP"]="http"})(s=t.RPCType||(t.RPCType={}));function setRPCMetadata(e,t){return e.setValue(i,t)}t.setRPCMetadata=setRPCMetadata;function deleteRPCMetadata(e){return e.deleteValue(i)}t.deleteRPCMetadata=deleteRPCMetadata;function getRPCMetadata(e){return e.getValue(i)}t.getRPCMetadata=getRPCMetadata},8875:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AlwaysOffSampler=void 0;const n=r(8720);class AlwaysOffSampler{shouldSample(){return{decision:n.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}t.AlwaysOffSampler=AlwaysOffSampler},9971:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AlwaysOnSampler=void 0;const n=r(8720);class AlwaysOnSampler{shouldSample(){return{decision:n.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}t.AlwaysOnSampler=AlwaysOnSampler},8302:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ParentBasedSampler=void 0;const n=r(8720);const i=r(5943);const s=r(8875);const o=r(9971);class ParentBasedSampler{constructor(e){var t,r,n,a;this._root=e.root;if(!this._root){(0,i.globalErrorHandler)(new Error("ParentBasedSampler must have a root sampler configured"));this._root=new o.AlwaysOnSampler}this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new o.AlwaysOnSampler;this._remoteParentNotSampled=(r=e.remoteParentNotSampled)!==null&&r!==void 0?r:new s.AlwaysOffSampler;this._localParentSampled=(n=e.localParentSampled)!==null&&n!==void 0?n:new o.AlwaysOnSampler;this._localParentNotSampled=(a=e.localParentNotSampled)!==null&&a!==void 0?a:new s.AlwaysOffSampler}shouldSample(e,t,r,i,s,o){const a=n.trace.getSpanContext(e);if(!a||!(0,n.isSpanContextValid)(a)){return this._root.shouldSample(e,t,r,i,s,o)}if(a.isRemote){if(a.traceFlags&n.TraceFlags.SAMPLED){return this._remoteParentSampled.shouldSample(e,t,r,i,s,o)}return this._remoteParentNotSampled.shouldSample(e,t,r,i,s,o)}if(a.traceFlags&n.TraceFlags.SAMPLED){return this._localParentSampled.shouldSample(e,t,r,i,s,o)}return this._localParentNotSampled.shouldSample(e,t,r,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}t.ParentBasedSampler=ParentBasedSampler},1717:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TraceIdRatioBasedSampler=void 0;const n=r(8720);class TraceIdRatioBasedSampler{constructor(e=0){this._ratio=e;this._ratio=this._normalize(e);this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(e,t){return{decision:(0,n.isValidTraceId)(t)&&this._accumulate(t)<this._upperBound?n.SamplingDecision.RECORD_AND_SAMPLED:n.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(e){if(typeof e!=="number"||isNaN(e))return 0;return e>=1?1:e<=0?0:e}_accumulate(e){let t=0;for(let r=0;r<e.length/8;r++){const n=r*8;const i=parseInt(e.slice(n,n+8),16);t=(t^i)>>>0}return t}}t.TraceIdRatioBasedSampler=TraceIdRatioBasedSampler},9665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isTracingSuppressed=t.unsuppressTracing=t.suppressTracing=void 0;const n=r(8720);const i=(0,n.createContextKey)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function suppressTracing(e){return e.setValue(i,true)}t.suppressTracing=suppressTracing;function unsuppressTracing(e){return e.deleteValue(i)}t.unsuppressTracing=unsuppressTracing;function isTracingSuppressed(e){return e.getValue(i)===true}t.isTracingSuppressed=isTracingSuppressed},7820:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BindOnceFuture=void 0;const n=r(4155);class BindOnceFuture{constructor(e,t){this._callback=e;this._that=t;this._isCalled=false;this._deferred=new n.Deferred}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=true;try{Promise.resolve(this._callback.call(this._that,...e)).then((e=>this._deferred.resolve(e)),(e=>this._deferred.reject(e)))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}}t.BindOnceFuture=BindOnceFuture},9651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getEnvWithoutDefaults=t.parseEnvironment=t.DEFAULT_ENVIRONMENT=t.DEFAULT_ATTRIBUTE_COUNT_LIMIT=t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=void 0;const n=r(8720);const i=r(5572);const s=r(5760);const o=",";const a=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function isEnvVarANumber(e){return a.indexOf(e)>-1}const l=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function isEnvVarAList(e){return l.indexOf(e)>-1}t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT=Infinity;t.DEFAULT_ATTRIBUTE_COUNT_LIMIT=128;t.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:n.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_ATTRIBUTE_COUNT_LIMIT:t.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:t.DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:t.DEFAULT_ATTRIBUTE_COUNT_LIMIT,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:i.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:""};function parseNumber(e,t,r,n=-Infinity,i=Infinity){if(typeof r[e]!=="undefined"){const s=Number(r[e]);if(!isNaN(s)){if(s<n){t[e]=n}else if(s>i){t[e]=i}else{t[e]=s}}}}function parseStringList(e,t,r,n=o){const i=r[e];if(typeof i==="string"){t[e]=i.split(n).map((e=>e.trim()))}}const c={ALL:n.DiagLogLevel.ALL,VERBOSE:n.DiagLogLevel.VERBOSE,DEBUG:n.DiagLogLevel.DEBUG,INFO:n.DiagLogLevel.INFO,WARN:n.DiagLogLevel.WARN,ERROR:n.DiagLogLevel.ERROR,NONE:n.DiagLogLevel.NONE};function setLogLevelFromEnv(e,t,r){const n=r[e];if(typeof n==="string"){const r=c[n.toUpperCase()];if(r!=null){t[e]=r}}}function parseEnvironment(e){const r={};for(const n in t.DEFAULT_ENVIRONMENT){const t=n;switch(t){case"OTEL_LOG_LEVEL":setLogLevelFromEnv(t,r,e);break;default:if(isEnvVarANumber(t)){parseNumber(t,r,e)}else if(isEnvVarAList(t)){parseStringList(t,r,e)}else{const n=e[t];if(typeof n!=="undefined"&&n!==null){r[t]=String(n)}}}}return r}t.parseEnvironment=parseEnvironment;function getEnvWithoutDefaults(){return typeof process!=="undefined"?parseEnvironment(process.env):parseEnvironment(s._globalThis)}t.getEnvWithoutDefaults=getEnvWithoutDefaults},3603:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isPlainObject=void 0;const r="[object Object]";const n="[object Null]";const i="[object Undefined]";const s=Function.prototype;const o=s.toString;const a=o.call(Object);const l=overArg(Object.getPrototypeOf,Object);const c=Object.prototype;const u=c.hasOwnProperty;const d=Symbol?Symbol.toStringTag:undefined;const f=c.toString;function overArg(e,t){return function(r){return e(t(r))}}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!==r){return false}const t=l(e);if(t===null){return true}const n=u.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&o.call(n)===a}t.isPlainObject=isPlainObject;function isObjectLike(e){return e!=null&&typeof e=="object"}function baseGetTag(e){if(e==null){return e===undefined?i:n}return d&&d in Object(e)?getRawTag(e):objectToString(e)}function getRawTag(e){const t=u.call(e,d),r=e[d];let n=false;try{e[d]=undefined;n=true}catch(e){}const i=f.call(e);if(n){if(t){e[d]=r}else{delete e[d]}}return i}function objectToString(e){return f.call(e)}},348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.merge=void 0;const n=r(3603);const i=20;function merge(...e){let t=e.shift();const r=new WeakMap;while(e.length>0){t=mergeTwoObjects(t,e.shift(),0,r)}return t}t.merge=merge;function takeValue(e){if(isArray(e)){return e.slice()}return e}function mergeTwoObjects(e,t,r=0,n){let s;if(r>i){return undefined}r++;if(isPrimitive(e)||isPrimitive(t)||isFunction(t)){s=takeValue(t)}else if(isArray(e)){s=e.slice();if(isArray(t)){for(let e=0,r=t.length;e<r;e++){s.push(takeValue(t[e]))}}else if(isObject(t)){const e=Object.keys(t);for(let r=0,n=e.length;r<n;r++){const n=e[r];s[n]=takeValue(t[n])}}}else if(isObject(e)){if(isObject(t)){if(!shouldMerge(e,t)){return t}s=Object.assign({},e);const i=Object.keys(t);for(let o=0,a=i.length;o<a;o++){const a=i[o];const l=t[a];if(isPrimitive(l)){if(typeof l==="undefined"){delete s[a]}else{s[a]=l}}else{const i=s[a];const o=l;if(wasObjectReferenced(e,a,n)||wasObjectReferenced(t,a,n)){delete s[a]}else{if(isObject(i)&&isObject(o)){const r=n.get(i)||[];const s=n.get(o)||[];r.push({obj:e,key:a});s.push({obj:t,key:a});n.set(i,r);n.set(o,s)}s[a]=mergeTwoObjects(s[a],l,r,n)}}}}else{s=t}}return s}function wasObjectReferenced(e,t,r){const n=r.get(e[t])||[];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(i.key===t&&i.obj===e){return true}}return false}function isArray(e){return Array.isArray(e)}function isFunction(e){return typeof e==="function"}function isObject(e){return!isPrimitive(e)&&!isArray(e)&&!isFunction(e)&&typeof e==="object"}function isPrimitive(e){return typeof e==="string"||typeof e==="number"||typeof e==="boolean"||typeof e==="undefined"||e instanceof Date||e instanceof RegExp||e===null}function shouldMerge(e,t){if(!(0,n.isPlainObject)(e)||!(0,n.isPlainObject)(t)){return false}return true}},4155:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Deferred=void 0;class Deferred{constructor(){this._promise=new Promise(((e,t)=>{this._resolve=e;this._reject=t}))}get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}}t.Deferred=Deferred},5572:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TracesSamplerValues=void 0;var r;(function(e){e["AlwaysOff"]="always_off";e["AlwaysOn"]="always_on";e["ParentBasedAlwaysOff"]="parentbased_always_off";e["ParentBasedAlwaysOn"]="parentbased_always_on";e["ParentBasedTraceIdRatio"]="parentbased_traceidratio";e["TraceIdRatio"]="traceidratio"})(r=t.TracesSamplerValues||(t.TracesSamplerValues={}))},4394:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isUrlIgnored=t.urlMatches=void 0;function urlMatches(e,t){if(typeof t==="string"){return e===t}else{return!!e.match(t)}}t.urlMatches=urlMatches;function isUrlIgnored(e,t){if(!t){return false}for(const r of t){if(urlMatches(e,r)){return true}}return false}t.isUrlIgnored=isUrlIgnored},4630:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isWrapped=void 0;function isWrapped(e){return typeof e==="function"&&typeof e.__original==="function"&&typeof e.__unwrap==="function"&&e.__wrapped===true}t.isWrapped=isWrapped},7943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.VERSION=void 0;t.VERSION="1.6.0"},2902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPTraceExporter=void 0;const n=r(8485);const i=r(1823);const s=r(8231);const o=r(3057);class OTLPTraceExporter extends s.OTLPGRPCExporterNodeBase{constructor(e={}){super(e);const t=n.baggageUtils.parseKeyPairsIntoRecord((0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_HEADERS);this.metadata||(this.metadata=new i.Metadata);for(const[e,r]of Object.entries(t)){this.metadata.set(e,r)}}convert(e){return(0,o.createExportTraceServiceRequest)(e)}getDefaultUrl(e){return(0,s.validateAndNormalizeUrl)(this.getUrlFromConfig(e))}getServiceClientType(){return s.ServiceClientType.SPANS}getServiceProtoPath(){return"opentelemetry/proto/collector/trace/v1/trace_service.proto"}getUrlFromConfig(e){if(typeof e.url==="string"){return e.url}return(0,n.getEnv)().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT||(0,n.getEnv)().OTEL_EXPORTER_OTLP_ENDPOINT||s.DEFAULT_COLLECTOR_URL}}t.OTLPTraceExporter=OTLPTraceExporter},3126:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(2902),t)},5858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPExporterBase=void 0;const n=r(8720);const i=r(8485);const s=r(2601);class OTLPExporterBase{constructor(e={}){this._sendingPromises=[];this.url=this.getDefaultUrl(e);if(typeof e.hostname==="string"){this.hostname=e.hostname}this.shutdown=this.shutdown.bind(this);this._shutdownOnce=new i.BindOnceFuture(this._shutdown,this);this._concurrencyLimit=typeof e.concurrencyLimit==="number"?e.concurrencyLimit:Infinity;this.timeoutMillis=(0,s.configureExporterTimeout)(e.timeoutMillis);this.onInit(e)}export(e,t){if(this._shutdownOnce.isCalled){t({code:i.ExportResultCode.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){t({code:i.ExportResultCode.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then((()=>{t({code:i.ExportResultCode.SUCCESS})})).catch((e=>{t({code:i.ExportResultCode.FAILED,error:e})}))}_export(e){return new Promise(((t,r)=>{try{n.diag.debug("items to be sent",e);this.send(e,t,r)}catch(e){r(e)}}))}shutdown(){return this._shutdownOnce.call()}_shutdown(){n.diag.debug("shutdown started");this.onShutdown();return Promise.all(this._sendingPromises).then((()=>{}))}}t.OTLPExporterBase=OTLPExporterBase},519:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(5858),t);i(r(6176),t);i(r(5604),t);i(r(2601),t)},1412:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPExporterBrowserBase=void 0;const n=r(5858);const i=r(2601);const s=r(3266);const o=r(8720);const a=r(8485);class OTLPExporterBrowserBase extends n.OTLPExporterBase{constructor(e={}){super(e);this._useXHR=false;this._useXHR=!!e.headers||typeof navigator.sendBeacon!=="function";if(this._useXHR){this._headers=Object.assign({},(0,i.parseHeaders)(e.headers),a.baggageUtils.parseKeyPairsIntoRecord((0,a.getEnv)().OTEL_EXPORTER_OTLP_HEADERS))}else{this._headers={}}}onInit(){window.addEventListener("unload",this.shutdown)}onShutdown(){window.removeEventListener("unload",this.shutdown)}send(e,t,r){if(this._shutdownOnce.isCalled){o.diag.debug("Shutdown already started. Cannot send objects");return}const n=this.convert(e);const i=JSON.stringify(n);const a=new Promise(((e,t)=>{if(this._useXHR){(0,s.sendWithXhr)(i,this.url,this._headers,this.timeoutMillis,e,t)}else{(0,s.sendWithBeacon)(i,this.url,{type:"application/json"},e,t)}})).then(t,r);this._sendingPromises.push(a);const popPromise=()=>{const e=this._sendingPromises.indexOf(a);this._sendingPromises.splice(e,1)};a.then(popPromise,popPromise)}}t.OTLPExporterBrowserBase=OTLPExporterBrowserBase},3876:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(1412),t)},3266:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.sendWithXhr=t.sendWithBeacon=void 0;const n=r(8720);const i=r(5604);function sendWithBeacon(e,t,r,s,o){if(navigator.sendBeacon(t,new Blob([e],r))){n.diag.debug("sendBeacon - can send",e);s()}else{const t=new i.OTLPExporterError(`sendBeacon - cannot send ${e}`);o(t)}}t.sendWithBeacon=sendWithBeacon;function sendWithXhr(e,t,r,s,o,a){let l;const c=setTimeout((()=>{l=true;u.abort()}),s);const u=new XMLHttpRequest;u.open("POST",t);const d={Accept:"application/json","Content-Type":"application/json"};Object.entries(Object.assign(Object.assign({},d),r)).forEach((([e,t])=>{u.setRequestHeader(e,t)}));u.send(e);u.onreadystatechange=()=>{if(u.readyState===XMLHttpRequest.DONE){if(u.status>=200&&u.status<=299){clearTimeout(c);n.diag.debug("xhr success",e);o()}else if(l){const e=new i.OTLPExporterError("Request Timeout",u.status);a(e)}else{const e=new i.OTLPExporterError(`Failed to export with XHR (status: ${u.status})`,u.status);clearTimeout(c);a(e)}}}}t.sendWithXhr=sendWithXhr},6176:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.OTLPExporterBrowserBase=void 0;i(r(2643),t);var s=r(3876);Object.defineProperty(t,"OTLPExporterBrowserBase",{enumerable:true,get:function(){return s.OTLPExporterBrowserBase}})},8154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPExporterNodeBase=void 0;const n=r(5858);const i=r(2601);const s=r(512);const o=r(8720);const a=r(8485);class OTLPExporterNodeBase extends n.OTLPExporterBase{constructor(e={}){super(e);this.DEFAULT_HEADERS={};if(e.metadata){o.diag.warn("Metadata cannot be set when using http")}this.headers=Object.assign(this.DEFAULT_HEADERS,(0,i.parseHeaders)(e.headers),a.baggageUtils.parseKeyPairsIntoRecord((0,a.getEnv)().OTEL_EXPORTER_OTLP_HEADERS));this.agent=(0,s.createHttpAgent)(e);this.compression=(0,s.configureCompression)(e.compression)}onInit(e){}send(e,t,r){if(this._shutdownOnce.isCalled){o.diag.debug("Shutdown already started. Cannot send objects");return}const n=this.convert(e);const i=new Promise(((e,t)=>{(0,s.sendWithHttp)(this,JSON.stringify(n),"application/json",e,t)})).then(t,r);this._sendingPromises.push(i);const popPromise=()=>{const e=this._sendingPromises.indexOf(i);this._sendingPromises.splice(e,1)};i.then(popPromise,popPromise)}onShutdown(){}}t.OTLPExporterNodeBase=OTLPExporterNodeBase},2643:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(8154),t);i(r(512),t);i(r(84),t)},84:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompressionAlgorithm=void 0;var r;(function(e){e["NONE"]="none";e["GZIP"]="gzip"})(r=t.CompressionAlgorithm||(t.CompressionAlgorithm={}))},512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configureCompression=t.createHttpAgent=t.sendWithHttp=void 0;const n=r(7310);const i=r(3685);const s=r(5687);const o=r(9796);const a=r(2781);const l=r(8720);const c=r(84);const u=r(8485);const d=r(5604);function sendWithHttp(e,t,r,a,u){const f=e.timeoutMillis;const h=new n.URL(e.url);let p;const m=Number(process.versions.node.split(".")[0]);const g=setTimeout((()=>{p=true;if(m>=14){b.destroy()}else{b.abort()}}),f);const y={hostname:h.hostname,port:h.port,path:h.pathname,method:"POST",headers:Object.assign({"Content-Type":r},e.headers),agent:e.agent};const v=h.protocol==="http:"?i.request:s.request;const b=v(y,(e=>{let t="";e.on("data",(e=>t+=e));e.on("aborted",(()=>{if(p){const e=new d.OTLPExporterError("Request Timeout");u(e)}}));e.on("end",(()=>{if(!p){if(e.statusCode&&e.statusCode<299){l.diag.debug(`statusCode: ${e.statusCode}`,t);a()}else{const r=new d.OTLPExporterError(e.statusMessage,e.statusCode,t);u(r)}clearTimeout(g)}}))}));b.on("error",(e=>{if(p){const t=new d.OTLPExporterError("Request Timeout",e.code);u(t)}else{clearTimeout(g);u(e)}}));switch(e.compression){case c.CompressionAlgorithm.GZIP:{b.setHeader("Content-Encoding","gzip");const e=readableFromBuffer(t);e.on("error",u).pipe(o.createGzip()).on("error",u).pipe(b);break}default:b.end(t);break}}t.sendWithHttp=sendWithHttp;function readableFromBuffer(e){const t=new a.Readable;t.push(e);t.push(null);return t}function createHttpAgent(e){if(e.httpAgentOptions&&e.keepAlive===false){l.diag.warn("httpAgentOptions is used only when keepAlive is true");return undefined}if(e.keepAlive===false||!e.url)return undefined;try{const t=new n.URL(e.url);const r=t.protocol==="http:"?i.Agent:s.Agent;return new r(Object.assign({keepAlive:true},e.httpAgentOptions))}catch(e){l.diag.error(`collector exporter failed to create http agent. err: ${e.message}`);return undefined}}t.createHttpAgent=createHttpAgent;function configureCompression(e){if(e){return e}else{const e=(0,u.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,u.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION;return e===c.CompressionAlgorithm.GZIP?c.CompressionAlgorithm.GZIP:c.CompressionAlgorithm.NONE}}t.configureCompression=configureCompression},5604:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPExporterError=void 0;class OTLPExporterError extends Error{constructor(e,t,r){super(e);this.name="OTLPExporterError";this.data=r;this.code=t}}t.OTLPExporterError=OTLPExporterError},2601:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.invalidTimeout=t.configureExporterTimeout=t.appendRootPathToUrlIfNeeded=t.appendResourcePathToUrl=t.parseHeaders=void 0;const n=r(8720);const i=r(8485);const s=1e4;function parseHeaders(e={}){const t={};Object.entries(e).forEach((([e,r])=>{if(typeof r!=="undefined"){t[e]=String(r)}else{n.diag.warn(`Header "${e}" has wrong value and will be ignored`)}}));return t}t.parseHeaders=parseHeaders;function appendResourcePathToUrl(e,t){if(!e.endsWith("/")){e=e+"/"}return e+t}t.appendResourcePathToUrl=appendResourcePathToUrl;function appendRootPathToUrlIfNeeded(e,t){if(!e.includes(t)&&!e.endsWith("/")){e=e+"/"}return e}t.appendRootPathToUrlIfNeeded=appendRootPathToUrlIfNeeded;function configureExporterTimeout(e){if(typeof e==="number"){if(e<=0){return invalidTimeout(e,s)}return e}else{return getExporterTimeoutFromEnv()}}t.configureExporterTimeout=configureExporterTimeout;function getExporterTimeoutFromEnv(){var e;const t=Number((e=(0,i.getEnv)().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:(0,i.getEnv)().OTEL_EXPORTER_OTLP_TIMEOUT);if(t<=0){return invalidTimeout(t,s)}else{return t}}function invalidTimeout(e,t){n.diag.warn("Timeout must be greater than 0",e);return t}t.invalidTimeout=invalidTimeout},1131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.OTLPGRPCExporterNodeBase=void 0;const n=r(8720);const i=r(1823);const s=r(8485);const o=r(9861);const a=r(519);class OTLPGRPCExporterNodeBase extends a.OTLPExporterBase{constructor(e={}){super(e);this.grpcQueue=[];this.serviceClient=undefined;if(e.headers){n.diag.warn("Headers cannot be set when using grpc")}const t=s.baggageUtils.parseKeyPairsIntoRecord((0,s.getEnv)().OTEL_EXPORTER_OTLP_HEADERS);this.metadata=e.metadata||new i.Metadata;for(const[e,r]of Object.entries(t)){this.metadata.set(e,r)}this.compression=(0,o.configureCompression)(e.compression)}_sendPromise(e,t,r){const n=new Promise(((t,r)=>{this._send(this,e,t,r)})).then(t,r);this._sendingPromises.push(n);const popPromise=()=>{const e=this._sendingPromises.indexOf(n);this._sendingPromises.splice(e,1)};n.then(popPromise,popPromise)}onInit(e){setImmediate((()=>{const{onInit:t}=r(9861);t(this,e)}))}send(e,t,i){if(this._shutdownOnce.isCalled){n.diag.debug("Shutdown already started. Cannot send objects");return}if(!this._send){setImmediate((()=>{const{send:n}=r(9861);this._send=n;this._sendPromise(e,t,i)}))}else{this._sendPromise(e,t,i)}}onShutdown(){if(this.serviceClient){this.serviceClient.close()}}}t.OTLPGRPCExporterNodeBase=OTLPGRPCExporterNodeBase},8231:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.GrpcCompressionAlgorithm=t.validateAndNormalizeUrl=t.DEFAULT_COLLECTOR_URL=t.ServiceClientType=void 0;i(r(1131),t);var s=r(9720);Object.defineProperty(t,"ServiceClientType",{enumerable:true,get:function(){return s.ServiceClientType}});var o=r(9861);Object.defineProperty(t,"DEFAULT_COLLECTOR_URL",{enumerable:true,get:function(){return o.DEFAULT_COLLECTOR_URL}});Object.defineProperty(t,"validateAndNormalizeUrl",{enumerable:true,get:function(){return o.validateAndNormalizeUrl}});Object.defineProperty(t,"GrpcCompressionAlgorithm",{enumerable:true,get:function(){return o.GrpcCompressionAlgorithm}})},9720:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ServiceClientType=void 0;var r;(function(e){e[e["SPANS"]=0]="SPANS";e[e["METRICS"]=1]="METRICS"})(r=t.ServiceClientType||(t.ServiceClientType={}))},9861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.configureCompression=t.GrpcCompressionAlgorithm=t.useSecureConnection=t.configureSecurity=t.validateAndNormalizeUrl=t.send=t.onInit=t.DEFAULT_COLLECTOR_URL=void 0;const n=r(1823);const i=r(4278);const s=r(8720);const o=r(8485);const a=r(1017);const l=r(7310);const c=r(7147);const u=r(9720);const d=r(519);t.DEFAULT_COLLECTOR_URL="http://localhost:4317";function onInit(e,t){e.grpcQueue=[];const s=configureSecurity(t.credentials,e.getUrlFromConfig(t));const a=[r.ab+"protos"];i.load(e.getServiceProtoPath(),{keepCase:false,longs:String,enums:String,defaults:true,oneofs:true,includeDirs:a}).then((t=>{const r=n.loadPackageDefinition(t);const i={"grpc.default_compression_algorithm":e.compression};if(e.getServiceClientType()===u.ServiceClientType.SPANS){e.serviceClient=new r.opentelemetry.proto.collector.trace.v1.TraceService(e.url,s,i)}else{e.serviceClient=new r.opentelemetry.proto.collector.metrics.v1.MetricsService(e.url,s,i)}if(e.grpcQueue.length>0){const t=e.grpcQueue.splice(0);t.forEach((t=>{e.send(t.objects,t.onSuccess,t.onError)}))}})).catch((e=>{(0,o.globalErrorHandler)(e)}))}t.onInit=onInit;function send(e,t,r,i){if(e.serviceClient){const o=e.convert(t);const a=Date.now()+e.timeoutMillis;e.serviceClient.export(o,e.metadata||new n.Metadata,{deadline:a},(e=>{if(e){s.diag.error("Service request",o);i(e)}else{s.diag.debug("Objects sent");r()}}))}else{e.grpcQueue.push({objects:t,onSuccess:r,onError:i})}}t.send=send;function validateAndNormalizeUrl(e){var t;const r=e.match(/^([\w]{1,8}):\/\//);if(!r){e=`https://${e}`}const n=new l.URL(e);if(n.pathname&&n.pathname!=="/"){s.diag.warn("URL path should not be set when using grpc, the path part of the URL will be ignored.")}if(n.protocol!==""&&!((t=n.protocol)===null||t===void 0?void 0:t.match(/^(http)s?:$/))){s.diag.warn("URL protocol should be http(s)://. Using http://.")}return n.host}t.validateAndNormalizeUrl=validateAndNormalizeUrl;function configureSecurity(e,r){let i;if(e){return e}else if(r.startsWith("https://")){i=false}else if(r.startsWith("http://")||r===t.DEFAULT_COLLECTOR_URL){i=true}else{i=getSecurityFromEnv()}if(i){return n.credentials.createInsecure()}else{return useSecureConnection()}}t.configureSecurity=configureSecurity;function getSecurityFromEnv(){const e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_INSECURE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_INSECURE;if(e){return e.toLowerCase()==="true"}else{return false}}function useSecureConnection(){const e=retrieveRootCert();const t=retrievePrivateKey();const r=retrieveCertChain();return n.credentials.createSsl(e,t,r)}t.useSecureConnection=useSecureConnection;function retrieveRootCert(){const e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CERTIFICATE;if(e){try{return c.readFileSync(a.resolve(process.cwd(),e))}catch(e){s.diag.warn("Failed to read root certificate file");return undefined}}else{return undefined}}function retrievePrivateKey(){const e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CLIENT_KEY;if(e){try{return c.readFileSync(a.resolve(process.cwd(),e))}catch(e){s.diag.warn("Failed to read client certificate private key file");return undefined}}else{return undefined}}function retrieveCertChain(){const e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE||(0,o.getEnv)().OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE;if(e){try{return c.readFileSync(a.resolve(process.cwd(),e))}catch(e){s.diag.warn("Failed to read client certificate chain file");return undefined}}else{return undefined}}function toGrpcCompression(e){if(e===d.CompressionAlgorithm.NONE)return f.NONE;else if(e===d.CompressionAlgorithm.GZIP)return f.GZIP;return f.NONE}var f;(function(e){e[e["NONE"]=0]="NONE";e[e["GZIP"]=2]="GZIP"})(f=t.GrpcCompressionAlgorithm||(t.GrpcCompressionAlgorithm={}));function configureCompression(e){if(e){return toGrpcCompression(e)}else{const e=(0,o.getEnv)().OTEL_EXPORTER_OTLP_TRACES_COMPRESSION||(0,o.getEnv)().OTEL_EXPORTER_OTLP_COMPRESSION;return e==="gzip"?f.GZIP:f.NONE}}t.configureCompression=configureCompression},5835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.bufToHex=t.hexToBuf=t.toAnyValue=t.toKeyValue=t.toAttributes=void 0;function toAttributes(e){return Object.keys(e).map((t=>toKeyValue(t,e[t])))}t.toAttributes=toAttributes;function toKeyValue(e,t){return{key:e,value:toAnyValue(t)}}t.toKeyValue=toKeyValue;function toAnyValue(e){const t=typeof e;if(t==="string")return{stringValue:e};if(t==="number"){if(!Number.isInteger(e))return{doubleValue:e};return{intValue:e}}if(t==="boolean")return{boolValue:e};if(e instanceof Uint8Array)return{bytesValue:e};if(Array.isArray(e))return{arrayValue:{values:e.map(toAnyValue)}};if(t==="object"&&e!=null)return{kvlistValue:{values:Object.entries(e).map((([e,t])=>toKeyValue(e,t)))}};return{}}t.toAnyValue=toAnyValue;function hexToBuf(e){var t;const r=(t=e.match(/[\da-f]{2}/gi))===null||t===void 0?void 0:t.map((e=>parseInt(e,16)));return r&&new Uint8Array(r)}t.hexToBuf=hexToBuf;function i2hex(e){return("0"+e.toString(16)).slice(-2)}function bufToHex(e){if(e==null||e.length===0)return undefined;return Array.from(e).map(i2hex).join("")}t.bufToHex=bufToHex},4304:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},3057:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.createExportMetricsServiceRequest=t.createExportTraceServiceRequest=void 0;i(r(4304),t);i(r(9217),t);i(r(5954),t);i(r(3658),t);var s=r(4178);Object.defineProperty(t,"createExportTraceServiceRequest",{enumerable:true,get:function(){return s.createExportTraceServiceRequest}});var o=r(5094);Object.defineProperty(t,"createExportMetricsServiceRequest",{enumerable:true,get:function(){return o.createExportMetricsServiceRequest}})},5094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createExportMetricsServiceRequest=void 0;const n=r(5640);function createExportMetricsServiceRequest(e){return{resourceMetrics:e.map((e=>(0,n.toResourceMetrics)(e)))}}t.createExportMetricsServiceRequest=createExportMetricsServiceRequest},5640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toMetric=t.toScopeMetrics=t.toResourceMetrics=void 0;const n=r(2180);const i=r(8485);const s=r(4936);const o=r(5835);function toResourceMetrics(e){return{resource:{attributes:(0,o.toAttributes)(e.resource.attributes),droppedAttributesCount:0},schemaUrl:undefined,scopeMetrics:toScopeMetrics(e.scopeMetrics)}}t.toResourceMetrics=toResourceMetrics;function toScopeMetrics(e){return Array.from(e.map((e=>{const t={scope:{name:e.scope.name,version:e.scope.version},metrics:e.metrics.map((e=>toMetric(e))),schemaUrl:e.scope.schemaUrl};return t})))}t.toScopeMetrics=toScopeMetrics;function toMetric(e){const t={name:e.descriptor.name,description:e.descriptor.description,unit:e.descriptor.unit};const r=toAggregationTemporality(e.aggregationTemporality);if(e.dataPointType===s.DataPointType.SUM){t.sum={aggregationTemporality:r,isMonotonic:e.isMonotonic,dataPoints:toSingularDataPoints(e)}}else if(e.dataPointType===s.DataPointType.GAUGE){t.gauge={dataPoints:toSingularDataPoints(e)}}else if(e.dataPointType===s.DataPointType.HISTOGRAM){t.histogram={aggregationTemporality:r,dataPoints:toHistogramDataPoints(e)}}return t}t.toMetric=toMetric;function toSingularDataPoint(e,t){const r={attributes:(0,o.toAttributes)(e.attributes),startTimeUnixNano:(0,i.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,i.hrTimeToNanoseconds)(e.endTime)};if(t===n.ValueType.INT){r.asInt=e.value}else if(t===n.ValueType.DOUBLE){r.asDouble=e.value}return r}function toSingularDataPoints(e){return e.dataPoints.map((t=>toSingularDataPoint(t,e.descriptor.valueType)))}function toHistogramDataPoints(e){return e.dataPoints.map((e=>{const t=e.value;return{attributes:(0,o.toAttributes)(e.attributes),bucketCounts:t.buckets.counts,explicitBounds:t.buckets.boundaries,count:t.count,sum:t.sum,min:t.min,max:t.max,startTimeUnixNano:(0,i.hrTimeToNanoseconds)(e.startTime),timeUnixNano:(0,i.hrTimeToNanoseconds)(e.endTime)}}))}function toAggregationTemporality(e){if(e===s.AggregationTemporality.DELTA){return 1}if(e===s.AggregationTemporality.CUMULATIVE){return 2}return 0}},9217:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},5954:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},4178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createExportTraceServiceRequest=void 0;const n=r(5835);const i=r(5561);function createExportTraceServiceRequest(e,t){return{resourceSpans:spanRecordsToResourceSpans(e,t)}}t.createExportTraceServiceRequest=createExportTraceServiceRequest;function createResourceMap(e){const t=new Map;for(const r of e){let e=t.get(r.resource);if(!e){e=new Map;t.set(r.resource,e)}const n=`${r.instrumentationLibrary.name}@${r.instrumentationLibrary.version||""}:${r.instrumentationLibrary.schemaUrl||""}`;let i=e.get(n);if(!i){i=[];e.set(n,i)}i.push(r)}return t}function spanRecordsToResourceSpans(e,t){const r=createResourceMap(e);const s=[];const o=r.entries();let a=o.next();while(!a.done){const[e,r]=a.value;const l=[];const c=r.values();let u=c.next();while(!u.done){const e=u.value;if(e.length>0){const{name:r,version:n,schemaUrl:s}=e[0].instrumentationLibrary;const o=e.map((e=>(0,i.sdkSpanToOtlpSpan)(e,t)));l.push({scope:{name:r,version:n},spans:o,schemaUrl:s})}u=c.next()}const d={resource:{attributes:(0,n.toAttributes)(e.attributes),droppedAttributesCount:0},scopeSpans:l,schemaUrl:undefined};s.push(d);a=o.next()}return s}},5561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.toOtlpSpanEvent=t.toOtlpLink=t.sdkSpanToOtlpSpan=void 0;const n=r(8485);const i=r(5835);const s=r(8485);function sdkSpanToOtlpSpan(e,t){const r=e.spanContext();const o=e.status;const a=t?e.parentSpanId:e.parentSpanId!=null?s.hexToBase64(e.parentSpanId):undefined;return{traceId:t?r.traceId:s.hexToBase64(r.traceId),spanId:t?r.spanId:s.hexToBase64(r.spanId),parentSpanId:a,name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.startTime),endTimeUnixNano:(0,n.hrTimeToNanoseconds)(e.endTime),attributes:(0,i.toAttributes)(e.attributes),droppedAttributesCount:0,events:e.events.map(toOtlpSpanEvent),droppedEventsCount:0,status:{code:o.code,message:o.message},links:e.links.map((e=>toOtlpLink(e,t))),droppedLinksCount:0}}t.sdkSpanToOtlpSpan=sdkSpanToOtlpSpan;function toOtlpLink(e,t){return{attributes:e.attributes?(0,i.toAttributes)(e.attributes):[],spanId:t?e.context.spanId:s.hexToBase64(e.context.spanId),traceId:t?e.context.traceId:s.hexToBase64(e.context.traceId),droppedAttributesCount:0}}t.toOtlpLink=toOtlpLink;function toOtlpSpanEvent(e){return{attributes:e.attributes?(0,i.toAttributes)(e.attributes):[],name:e.name,timeUnixNano:(0,n.hrTimeToNanoseconds)(e.time),droppedAttributesCount:0}}t.toOtlpSpanEvent=toOtlpSpanEvent},3658:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ESpanKind=void 0;var r;(function(e){e[e["SPAN_KIND_UNSPECIFIED"]=0]="SPAN_KIND_UNSPECIFIED";e[e["SPAN_KIND_INTERNAL"]=1]="SPAN_KIND_INTERNAL";e[e["SPAN_KIND_SERVER"]=2]="SPAN_KIND_SERVER";e[e["SPAN_KIND_CLIENT"]=3]="SPAN_KIND_CLIENT";e[e["SPAN_KIND_PRODUCER"]=4]="SPAN_KIND_PRODUCER";e[e["SPAN_KIND_CONSUMER"]=5]="SPAN_KIND_CONSUMER"})(r=t.ESpanKind||(t.ESpanKind={}))},8440:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isDescriptorCompatibleWith=t.createInstrumentDescriptorWithView=t.createInstrumentDescriptor=t.InstrumentType=void 0;const n=r(2180);var i;(function(e){e["COUNTER"]="COUNTER";e["HISTOGRAM"]="HISTOGRAM";e["UP_DOWN_COUNTER"]="UP_DOWN_COUNTER";e["OBSERVABLE_COUNTER"]="OBSERVABLE_COUNTER";e["OBSERVABLE_GAUGE"]="OBSERVABLE_GAUGE";e["OBSERVABLE_UP_DOWN_COUNTER"]="OBSERVABLE_UP_DOWN_COUNTER"})(i=t.InstrumentType||(t.InstrumentType={}));function createInstrumentDescriptor(e,t,r){var i,s,o;return{name:e,type:t,description:(i=r===null||r===void 0?void 0:r.description)!==null&&i!==void 0?i:"",unit:(s=r===null||r===void 0?void 0:r.unit)!==null&&s!==void 0?s:"",valueType:(o=r===null||r===void 0?void 0:r.valueType)!==null&&o!==void 0?o:n.ValueType.DOUBLE}}t.createInstrumentDescriptor=createInstrumentDescriptor;function createInstrumentDescriptorWithView(e,t){var r,n;return{name:(r=e.name)!==null&&r!==void 0?r:t.name,description:(n=e.description)!==null&&n!==void 0?n:t.description,type:t.type,unit:t.unit,valueType:t.valueType}}t.createInstrumentDescriptorWithView=createInstrumentDescriptorWithView;function isDescriptorCompatibleWith(e,t){return e.name===t.name&&e.unit===t.unit&&e.type===t.type&&e.valueType===t.valueType}t.isDescriptorCompatibleWith=isDescriptorCompatibleWith},4483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isObservableInstrument=t.ObservableUpDownCounterInstrument=t.ObservableGaugeInstrument=t.ObservableCounterInstrument=t.ObservableInstrument=t.HistogramInstrument=t.CounterInstrument=t.UpDownCounterInstrument=t.SyncInstrument=void 0;const n=r(8720);const i=r(2180);const s=r(8485);class SyncInstrument{constructor(e,t){this._writableMetricStorage=e;this._descriptor=t}_record(e,t={},r=n.context.active()){if(this._descriptor.valueType===i.ValueType.INT&&!Number.isInteger(e)){n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`);e=Math.trunc(e)}this._writableMetricStorage.record(e,t,r,(0,s.hrTime)())}}t.SyncInstrument=SyncInstrument;class UpDownCounterInstrument extends SyncInstrument{add(e,t,r){this._record(e,t,r)}}t.UpDownCounterInstrument=UpDownCounterInstrument;class CounterInstrument extends SyncInstrument{add(e,t,r){if(e<0){n.diag.warn(`negative value provided to counter ${this._descriptor.name}: ${e}`);return}this._record(e,t,r)}}t.CounterInstrument=CounterInstrument;class HistogramInstrument extends SyncInstrument{record(e,t,r){if(e<0){n.diag.warn(`negative value provided to histogram ${this._descriptor.name}: ${e}`);return}this._record(e,t,r)}}t.HistogramInstrument=HistogramInstrument;class ObservableInstrument{constructor(e,t,r){this._observableRegistry=r;this._descriptor=e;this._metricStorages=t}addCallback(e){this._observableRegistry.addCallback(e,this)}removeCallback(e){this._observableRegistry.removeCallback(e,this)}}t.ObservableInstrument=ObservableInstrument;class ObservableCounterInstrument extends ObservableInstrument{}t.ObservableCounterInstrument=ObservableCounterInstrument;class ObservableGaugeInstrument extends ObservableInstrument{}t.ObservableGaugeInstrument=ObservableGaugeInstrument;class ObservableUpDownCounterInstrument extends ObservableInstrument{}t.ObservableUpDownCounterInstrument=ObservableUpDownCounterInstrument;function isObservableInstrument(e){return e instanceof ObservableInstrument}t.isObservableInstrument=isObservableInstrument},327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Meter=void 0;const n=r(8440);const i=r(4483);class Meter{constructor(e){this._meterSharedState=e}createHistogram(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.HISTOGRAM,t);const s=this._meterSharedState.registerMetricStorage(r);return new i.HistogramInstrument(s,r)}createCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.COUNTER,t);const s=this._meterSharedState.registerMetricStorage(r);return new i.CounterInstrument(s,r)}createUpDownCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.UP_DOWN_COUNTER,t);const s=this._meterSharedState.registerMetricStorage(r);return new i.UpDownCounterInstrument(s,r)}createObservableGauge(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_GAUGE,t);const s=this._meterSharedState.registerAsyncMetricStorage(r);return new i.ObservableGaugeInstrument(r,s,this._meterSharedState.observableRegistry)}createObservableCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_COUNTER,t);const s=this._meterSharedState.registerAsyncMetricStorage(r);return new i.ObservableCounterInstrument(r,s,this._meterSharedState.observableRegistry)}createObservableUpDownCounter(e,t){const r=(0,n.createInstrumentDescriptor)(e,n.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER,t);const s=this._meterSharedState.registerAsyncMetricStorage(r);return new i.ObservableUpDownCounterInstrument(r,s,this._meterSharedState.observableRegistry)}addBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)}removeBatchObservableCallback(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)}}t.Meter=Meter},2159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MeterProvider=void 0;const n=r(8720);const i=r(2180);const s=r(8314);const o=r(1193);const a=r(8175);class MeterProvider{constructor(e){var t;this._shutdown=false;this._sharedState=new o.MeterProviderSharedState((t=e===null||e===void 0?void 0:e.resource)!==null&&t!==void 0?t:s.Resource.empty());if((e===null||e===void 0?void 0:e.views)!=null&&e.views.length>0){for(const t of e.views){this._sharedState.viewRegistry.addView(t)}}}getMeter(e,t="",r={}){if(this._shutdown){n.diag.warn("A shutdown MeterProvider cannot provide a Meter");return i.NOOP_METER}return this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:r.schemaUrl}).meter}addMetricReader(e){const t=new a.MetricCollector(this._sharedState,e);e.setMetricProducer(t);this._sharedState.metricCollectors.push(t)}async shutdown(e){if(this._shutdown){n.diag.warn("shutdown may only be called once per MeterProvider");return}this._shutdown=true;await Promise.all(this._sharedState.metricCollectors.map((t=>t.shutdown(e))))}async forceFlush(e){if(this._shutdown){n.diag.warn("invalid attempt to force flush after MeterProvider shutdown");return}await Promise.all(this._sharedState.metricCollectors.map((t=>t.forceFlush(e))))}}t.MeterProvider=MeterProvider},6702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.BatchObservableResultImpl=t.ObservableResultImpl=void 0;const n=r(8720);const i=r(2180);const s=r(383);const o=r(4483);class ObservableResultImpl{constructor(e){this._descriptor=e;this._buffer=new s.AttributeHashMap}observe(e,t={}){if(this._descriptor.valueType===i.ValueType.INT&&!Number.isInteger(e)){n.diag.warn(`INT value type cannot accept a floating-point value for ${this._descriptor.name}, ignoring the fractional digits.`);e=Math.trunc(e)}this._buffer.set(t,e)}}t.ObservableResultImpl=ObservableResultImpl;class BatchObservableResultImpl{constructor(){this._buffer=new Map}observe(e,t,r={}){if(!(0,o.isObservableInstrument)(e)){return}let a=this._buffer.get(e);if(a==null){a=new s.AttributeHashMap;this._buffer.set(e,a)}if(e._descriptor.valueType===i.ValueType.INT&&!Number.isInteger(t)){n.diag.warn(`INT value type cannot accept a floating-point value for ${e._descriptor.name}, ignoring the fractional digits.`);t=Math.trunc(t)}a.set(r,t)}}t.BatchObservableResultImpl=BatchObservableResultImpl},4696:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DropAggregator=void 0;const n=r(3825);class DropAggregator{constructor(){this.kind=n.AggregatorKind.DROP}createAccumulation(){return undefined}merge(e,t){return undefined}diff(e,t){return undefined}toMetricData(e,t,r,n){return undefined}}t.DropAggregator=DropAggregator},6761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HistogramAggregator=t.HistogramAccumulation=void 0;const n=r(3825);const i=r(3838);const s=r(8440);function createNewEmptyCheckpoint(e){const t=e.map((()=>0));t.push(0);return{buckets:{boundaries:e,counts:t},sum:0,count:0,hasMinMax:false,min:Infinity,max:-Infinity}}class HistogramAccumulation{constructor(e,t,r=true,n=createNewEmptyCheckpoint(t)){this.startTime=e;this._boundaries=t;this._recordMinMax=r;this._current=n}record(e){this._current.count+=1;this._current.sum+=e;if(this._recordMinMax){this._current.min=Math.min(e,this._current.min);this._current.max=Math.max(e,this._current.max);this._current.hasMinMax=true}for(let t=0;t<this._boundaries.length;t++){if(e<this._boundaries[t]){this._current.buckets.counts[t]+=1;return}}this._current.buckets.counts[this._boundaries.length]+=1}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}t.HistogramAccumulation=HistogramAccumulation;class HistogramAggregator{constructor(e,t){this._boundaries=e;this._recordMinMax=t;this.kind=n.AggregatorKind.HISTOGRAM}createAccumulation(e){return new HistogramAccumulation(e,this._boundaries,this._recordMinMax)}merge(e,t){const r=e.toPointValue();const n=t.toPointValue();const i=r.buckets.counts;const s=n.buckets.counts;const o=new Array(i.length);for(let e=0;e<i.length;e++){o[e]=i[e]+s[e]}let a=Infinity;let l=-Infinity;if(this._recordMinMax){if(r.hasMinMax&&n.hasMinMax){a=Math.min(r.min,n.min);l=Math.max(r.max,n.max)}else if(r.hasMinMax){a=r.min;l=r.max}else if(n.hasMinMax){a=n.min;l=n.max}}return new HistogramAccumulation(e.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:o},count:r.count+n.count,sum:r.sum+n.sum,hasMinMax:this._recordMinMax&&(r.hasMinMax||n.hasMinMax),min:a,max:l})}diff(e,t){const r=e.toPointValue();const n=t.toPointValue();const i=r.buckets.counts;const s=n.buckets.counts;const o=new Array(i.length);for(let e=0;e<i.length;e++){o[e]=s[e]-i[e]}return new HistogramAccumulation(t.startTime,r.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:r.buckets.boundaries,counts:o},count:n.count-r.count,sum:n.sum-r.sum,hasMinMax:false,min:Infinity,max:-Infinity})}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.DataPointType.HISTOGRAM,dataPoints:r.map((([t,r])=>{const i=r.toPointValue();const o=e.type===s.InstrumentType.UP_DOWN_COUNTER||e.type===s.InstrumentType.OBSERVABLE_GAUGE||e.type===s.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:t,startTime:r.startTime,endTime:n,value:{min:i.hasMinMax?i.min:undefined,max:i.hasMinMax?i.max:undefined,sum:!o?i.sum:undefined,buckets:i.buckets,count:i.count}}}))}}}t.HistogramAggregator=HistogramAggregator},7598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LastValueAggregator=t.LastValueAccumulation=void 0;const n=r(3825);const i=r(8485);const s=r(3838);class LastValueAccumulation{constructor(e,t=0,r=[0,0]){this.startTime=e;this._current=t;this.sampleTime=r}record(e){this._current=e;this.sampleTime=(0,i.hrTime)()}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}t.LastValueAccumulation=LastValueAccumulation;class LastValueAggregator{constructor(){this.kind=n.AggregatorKind.LAST_VALUE}createAccumulation(e){return new LastValueAccumulation(e)}merge(e,t){const r=(0,i.hrTimeToMicroseconds)(t.sampleTime)>=(0,i.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new LastValueAccumulation(e.startTime,r.toPointValue(),r.sampleTime)}diff(e,t){const r=(0,i.hrTimeToMicroseconds)(t.sampleTime)>=(0,i.hrTimeToMicroseconds)(e.sampleTime)?t:e;return new LastValueAccumulation(t.startTime,r.toPointValue(),r.sampleTime)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:s.DataPointType.GAUGE,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()})))}}}t.LastValueAggregator=LastValueAggregator},8177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SumAggregator=t.SumAccumulation=void 0;const n=r(3825);const i=r(3838);class SumAccumulation{constructor(e,t,r=0,n=false){this.startTime=e;this.monotonic=t;this._current=r;this.reset=n}record(e){if(this.monotonic&&e<0){return}this._current+=e}setStartTime(e){this.startTime=e}toPointValue(){return this._current}}t.SumAccumulation=SumAccumulation;class SumAggregator{constructor(e){this.monotonic=e;this.kind=n.AggregatorKind.SUM}createAccumulation(e){return new SumAccumulation(e,this.monotonic)}merge(e,t){const r=e.toPointValue();const n=t.toPointValue();if(t.reset){return new SumAccumulation(t.startTime,this.monotonic,n,t.reset)}return new SumAccumulation(e.startTime,this.monotonic,r+n)}diff(e,t){const r=e.toPointValue();const n=t.toPointValue();if(this.monotonic&&r>n){return new SumAccumulation(t.startTime,this.monotonic,n,true)}return new SumAccumulation(t.startTime,this.monotonic,n-r)}toMetricData(e,t,r,n){return{descriptor:e,aggregationTemporality:t,dataPointType:i.DataPointType.SUM,dataPoints:r.map((([e,t])=>({attributes:e,startTime:t.startTime,endTime:n,value:t.toPointValue()}))),isMonotonic:this.monotonic}}}t.SumAggregator=SumAggregator},6828:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});i(r(4696),t);i(r(6761),t);i(r(7598),t);i(r(8177),t)},3825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AggregatorKind=void 0;var r;(function(e){e[e["DROP"]=0]="DROP";e[e["SUM"]=1]="SUM";e[e["LAST_VALUE"]=2]="LAST_VALUE";e[e["HISTOGRAM"]=3]="HISTOGRAM"})(r=t.AggregatorKind||(t.AggregatorKind={}))},8709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AggregationTemporality=void 0;var r;(function(e){e[e["DELTA"]=0]="DELTA";e[e["CUMULATIVE"]=1]="CUMULATIVE"})(r=t.AggregationTemporality||(t.AggregationTemporality={}))},7019:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConsoleMetricExporter=void 0;const n=r(8485);const i=r(8709);class ConsoleMetricExporter{constructor(){this._shutdown=false}export(e,t){if(this._shutdown){setImmediate(t,{code:n.ExportResultCode.FAILED});return}return ConsoleMetricExporter._sendMetrics(e,t)}forceFlush(){return Promise.resolve()}selectAggregationTemporality(e){return i.AggregationTemporality.CUMULATIVE}shutdown(){this._shutdown=true;return Promise.resolve()}static _sendMetrics(e,t){for(const t of e.scopeMetrics){for(const e of t.metrics){console.dir({descriptor:e.descriptor,dataPointType:e.dataPointType,dataPoints:e.dataPoints})}}t({code:n.ExportResultCode.SUCCESS})}}t.ConsoleMetricExporter=ConsoleMetricExporter},7651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InMemoryMetricExporter=void 0;const n=r(8485);class InMemoryMetricExporter{constructor(e){this._shutdown=false;this._metrics=[];this._aggregationTemporality=e}export(e,t){if(this._shutdown){setTimeout((()=>t({code:n.ExportResultCode.FAILED})),0);return}this._metrics.push(e);setTimeout((()=>t({code:n.ExportResultCode.SUCCESS})),0)}getMetrics(){return this._metrics}forceFlush(){return Promise.resolve()}reset(){this._metrics=[]}selectAggregationTemporality(e){return this._aggregationTemporality}shutdown(){this._shutdown=true;return Promise.resolve()}}t.InMemoryMetricExporter=InMemoryMetricExporter},3838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DataPointType=void 0;var r;(function(e){e[e["HISTOGRAM"]=0]="HISTOGRAM";e[e["EXPONENTIAL_HISTOGRAM"]=1]="EXPONENTIAL_HISTOGRAM";e[e["GAUGE"]=2]="GAUGE";e[e["SUM"]=3]="SUM"})(r=t.DataPointType||(t.DataPointType={}))},6357:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true})},4866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetricReader=void 0;const n=r(8720);const i=r(4916);class MetricReader{constructor(){this._shutdown=false}setMetricProducer(e){if(this._metricProducer){throw new Error("MetricReader can not be bound to a MeterProvider again.")}this._metricProducer=e;this.onInitialized()}onInitialized(){}async collect(e){if(this._metricProducer===undefined){throw new Error("MetricReader is not bound to a MetricProducer")}if(this._shutdown){throw new Error("MetricReader is shutdown")}return this._metricProducer.collect({timeoutMillis:e===null||e===void 0?void 0:e.timeoutMillis})}async shutdown(e){if(this._shutdown){n.diag.error("Cannot call shutdown twice.");return}if((e===null||e===void 0?void 0:e.timeoutMillis)==null){await this.onShutdown()}else{await(0,i.callWithTimeout)(this.onShutdown(),e.timeoutMillis)}this._shutdown=true}async forceFlush(e){if(this._shutdown){n.diag.warn("Cannot forceFlush on already shutdown MetricReader.");return}if((e===null||e===void 0?void 0:e.timeoutMillis)==null){await this.onForceFlush();return}await(0,i.callWithTimeout)(this.onForceFlush(),e.timeoutMillis)}}t.MetricReader=MetricReader},359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PeriodicExportingMetricReader=void 0;const n=r(8720);const i=r(8485);const s=r(4866);const o=r(4916);class PeriodicExportingMetricReader extends s.MetricReader{constructor(e){var t,r;super();if(e.exportIntervalMillis!==undefined&&e.exportIntervalMillis<=0){throw Error("exportIntervalMillis must be greater than 0")}if(e.exportTimeoutMillis!==undefined&&e.exportTimeoutMillis<=0){throw Error("exportTimeoutMillis must be greater than 0")}if(e.exportTimeoutMillis!==undefined&&e.exportIntervalMillis!==undefined&&e.exportIntervalMillis<e.exportTimeoutMillis){throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis")}this._exportInterval=(t=e.exportIntervalMillis)!==null&&t!==void 0?t:6e4;this._exportTimeout=(r=e.exportTimeoutMillis)!==null&&r!==void 0?r:3e4;this._exporter=e.exporter}async _runOnce(){const{resourceMetrics:e,errors:t}=await this.collect({});if(t.length>0){n.diag.error("PeriodicExportingMetricReader: metrics collection errors",...t)}return new Promise(((t,r)=>{this._exporter.export(e,(e=>{var n;if(e.code!==i.ExportResultCode.SUCCESS){r((n=e.error)!==null&&n!==void 0?n:new Error(`PeriodicExportingMetricReader: metrics export failed (error ${e.error})`))}else{t()}}))}))}onInitialized(){this._interval=setInterval((async()=>{try{await(0,o.callWithTimeout)(this._runOnce(),this._exportTimeout)}catch(e){if(e instanceof o.TimeoutError){n.diag.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout);return}(0,i.globalErrorHandler)(e)}}),this._exportInterval);(0,i.unrefTimer)(this._interval)}async onForceFlush(){await this._exporter.forceFlush()}async onShutdown(){if(this._interval){clearInterval(this._interval)}await this._exporter.shutdown()}selectAggregationTemporality(e){return this._exporter.selectAggregationTemporality(e)}}t.PeriodicExportingMetricReader=PeriodicExportingMetricReader},4936:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){if(n===undefined)n=r;Object.defineProperty(e,n,{enumerable:true,get:function(){return t[r]}})}:function(e,t,r,n){if(n===undefined)n=r;e[n]=t[r]});var i=this&&this.__exportStar||function(e,t){for(var r in e)if(r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r))n(t,e,r)};Object.defineProperty(t,"__esModule",{value:true});t.TimeoutError=t.InstrumentType=void 0;i(r(8709),t);i(r(3838),t);i(r(6357),t);i(r(527),t);i(r(4866),t);i(r(359),t);i(r(7651),t);i(r(7019),t);var s=r(8440);Object.defineProperty(t,"InstrumentType",{enumerable:true,get:function(){return s.InstrumentType}});i(r(327),t);i(r(2159),t);i(r(6702),t);var o=r(4916);Object.defineProperty(t,"TimeoutError",{enumerable:true,get:function(){return o.TimeoutError}});i(r(1943),t);i(r(5697),t)},3241:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AsyncMetricStorage=void 0;const n=r(6204);const i=r(9563);const s=r(5205);const o=r(383);class AsyncMetricStorage extends n.MetricStorage{constructor(e,t,r){super(e);this._attributesProcessor=r;this._deltaMetricStorage=new i.DeltaMetricProcessor(t);this._temporalMetricStorage=new s.TemporalMetricProcessor(t)}record(e,t){const r=new o.AttributeHashMap;Array.from(e.entries()).forEach((([e,t])=>{r.set(this._attributesProcessor.process(e),t)}));this._deltaMetricStorage.batchCumulate(r,t)}collect(e,t,r){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,t,this._instrumentDescriptor,n,r)}}t.AsyncMetricStorage=AsyncMetricStorage},9563:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeltaMetricProcessor=void 0;const n=r(383);class DeltaMetricProcessor{constructor(e){this._aggregator=e;this._activeCollectionStorage=new n.AttributeHashMap;this._cumulativeMemoStorage=new n.AttributeHashMap}record(e,t,r,n){const i=this._activeCollectionStorage.getOrDefault(t,(()=>this._aggregator.createAccumulation(n)));i===null||i===void 0?void 0:i.record(e)}batchCumulate(e,t){Array.from(e.entries()).forEach((([e,r,n])=>{const i=this._aggregator.createAccumulation(t);i===null||i===void 0?void 0:i.record(r);let s=i;if(this._cumulativeMemoStorage.has(e,n)){const t=this._cumulativeMemoStorage.get(e,n);s=this._aggregator.diff(t,i)}this._cumulativeMemoStorage.set(e,i,n);this._activeCollectionStorage.set(e,s,n)}))}collect(){const e=this._activeCollectionStorage;this._activeCollectionStorage=new n.AttributeHashMap;return e}}t.DeltaMetricProcessor=DeltaMetricProcessor},383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AttributeHashMap=t.HashMap=void 0;const n=r(4916);class HashMap{constructor(e){this._hash=e;this._valueMap=new Map;this._keyMap=new Map}get(e,t){t!==null&&t!==void 0?t:t=this._hash(e);return this._valueMap.get(t)}getOrDefault(e,t){const r=this._hash(e);if(this._valueMap.has(r)){return this._valueMap.get(r)}const n=t();if(!this._keyMap.has(r)){this._keyMap.set(r,e)}this._valueMap.set(r,n);return n}set(e,t,r){r!==null&&r!==void 0?r:r=this._hash(e);if(!this._keyMap.has(r)){this._keyMap.set(r,e)}this._valueMap.set(r,t)}has(e,t){t!==null&&t!==void 0?t:t=this._hash(e);return this._valueMap.has(t)}*keys(){const e=this._keyMap.entries();let t=e.next();while(t.done!==true){yield[t.value[1],t.value[0]];t=e.next()}}*entries(){const e=this._valueMap.entries();let t=e.next();while(t.done!==true){yield[this._keyMap.get(t.value[0]),t.value[1],t.value[0]];t=e.next()}}get size(){return this._valueMap.size}}t.HashMap=HashMap;class AttributeHashMap extends HashMap{constructor(){super(n.hashAttributes)}}t.AttributeHashMap=AttributeHashMap},1193:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MeterProviderSharedState=void 0;const n=r(4916);const i=r(3725);const s=r(8527);class MeterProviderSharedState{constructor(e){this.resource=e;this.viewRegistry=new i.ViewRegistry;this.metricCollectors=[];this.meterSharedStates=new Map}getMeterSharedState(e){const t=(0,n.instrumentationScopeId)(e);let r=this.meterSharedStates.get(t);if(r==null){r=new s.MeterSharedState(this,e);this.meterSharedStates.set(t,r)}return r}}t.MeterProviderSharedState=MeterProviderSharedState},8527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MeterSharedState=void 0;const n=r(8440);const i=r(327);const s=r(4916);const o=r(3241);const a=r(5784);const l=r(4102);const c=r(1927);const u=r(6947);class MeterSharedState{constructor(e,t){this._meterProviderSharedState=e;this._instrumentationScope=t;this._metricStorageRegistry=new a.MetricStorageRegistry;this.observableRegistry=new c.ObservableRegistry;this.meter=new i.Meter(this)}registerMetricStorage(e){const t=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope);const r=t.map((t=>{const r=(0,n.createInstrumentDescriptorWithView)(t,e);const i=t.aggregation.createAggregator(r);const s=new u.SyncMetricStorage(r,i,t.attributesProcessor);return this._metricStorageRegistry.register(s)})).filter(s.isNotNullish);if(r.length===1){return r[0]}return new l.MultiMetricStorage(r)}registerAsyncMetricStorage(e){const t=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope);const r=t.map((t=>{const r=(0,n.createInstrumentDescriptorWithView)(t,e);const i=t.aggregation.createAggregator(r);const s=new o.AsyncMetricStorage(r,i,t.attributesProcessor);return this._metricStorageRegistry.register(s)})).filter(s.isNotNullish);return r}async collect(e,t,r){const n=await this.observableRegistry.observe(t,r===null||r===void 0?void 0:r.timeoutMillis);const i=Array.from(this._metricStorageRegistry.getStorages()).map((r=>r.collect(e,this._meterProviderSharedState.metricCollectors,t))).filter(s.isNotNullish);return{scopeMetrics:{scope:this._instrumentationScope,metrics:i.filter(s.isNotNullish)},errors:n}}}t.MeterSharedState=MeterSharedState},8175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetricCollector=void 0;const n=r(8485);const i=r(4916);class MetricCollector{constructor(e,t){this._sharedState=e;this._metricReader=t}async collect(e){const t=(0,n.hrTime)();const r=Array.from(this._sharedState.meterSharedStates.values()).map((r=>r.collect(this,t,e)));const s=await Promise.all(r);return{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:s.map((e=>e.scopeMetrics))},errors:(0,i.FlatMap)(s,(e=>e.errors))}}async forceFlush(e){await this._metricReader.forceFlush(e)}async shutdown(e){await this._metricReader.shutdown(e)}selectAggregationTemporality(e){return this._metricReader.selectAggregationTemporality(e)}}t.MetricCollector=MetricCollector},6204:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetricStorage=void 0;const n=r(8440);class MetricStorage{constructor(e){this._instrumentDescriptor=e}getInstrumentDescriptor(){return this._instrumentDescriptor}updateDescription(e){this._instrumentDescriptor=(0,n.createInstrumentDescriptor)(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})}}t.MetricStorage=MetricStorage},5784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MetricStorageRegistry=void 0;const n=r(8440);const i=r(8720);const s=r(5712);class MetricStorageRegistry{constructor(){this._metricStorageRegistry=new Map}static create(){return new MetricStorageRegistry}getStorages(){let e=[];for(const t of this._metricStorageRegistry.values()){e=e.concat(t)}return e}register(e){const t=e.getInstrumentDescriptor();const r=this._metricStorageRegistry.get(t.name);if(r===undefined){this._metricStorageRegistry.set(t.name,[e]);return e}let o=null;for(const e of r){const r=e.getInstrumentDescriptor();if((0,n.isDescriptorCompatibleWith)(r,t)){if(r.description!==t.description){if(t.description.length>r.description.length){e.updateDescription(t.description)}i.diag.warn("A view or instrument with the name ",t.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",(0,s.getIncompatibilityDetails)(r,t),"The longer description will be used.\nTo resolve the conflict:",(0,s.getConflictResolutionRecipe)(r,t))}o=e}else{i.diag.warn("A view or instrument with the name ",t.name," has already been registered and is incompatible with another registered view.\n","Details:\n",(0,s.getIncompatibilityDetails)(r,t),"To resolve the conflict:\n",(0,s.getConflictResolutionRecipe)(r,t))}}if(o!=null){return o}r.push(e);return e}}t.MetricStorageRegistry=MetricStorageRegistry},4102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MultiMetricStorage=void 0;class MultiMetricStorage{constructor(e){this._backingStorages=e}record(e,t,r,n){this._backingStorages.forEach((i=>{i.record(e,t,r,n)}))}}t.MultiMetricStorage=MultiMetricStorage},1927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ObservableRegistry=void 0;const n=r(8720);const i=r(4483);const s=r(6702);const o=r(4916);class ObservableRegistry{constructor(){this._callbacks=[];this._batchCallbacks=[]}addCallback(e,t){const r=this._findCallback(e,t);if(r>=0){return}this._callbacks.push({callback:e,instrument:t})}removeCallback(e,t){const r=this._findCallback(e,t);if(r<0){return}this._callbacks.splice(r,1)}addBatchCallback(e,t){const r=new Set(t.filter(i.isObservableInstrument));if(r.size===0){n.diag.error("BatchObservableCallback is not associated with valid instruments",t);return}const s=this._findBatchCallback(e,r);if(s>=0){return}this._batchCallbacks.push({callback:e,instruments:r})}removeBatchCallback(e,t){const r=new Set(t.filter(i.isObservableInstrument));const n=this._findBatchCallback(e,r);if(n<0){return}this._batchCallbacks.splice(n,1)}async observe(e,t){const r=this._observeCallbacks(e,t);const n=this._observeBatchCallbacks(e,t);const i=await(0,o.PromiseAllSettled)([...r,...n]);const s=i.filter(o.isPromiseAllSettledRejectionResult).map((e=>e.reason));return s}_observeCallbacks(e,t){return this._callbacks.map((async({callback:r,instrument:n})=>{const i=new s.ObservableResultImpl(n._descriptor);let a=Promise.resolve(r(i));if(t!=null){a=(0,o.callWithTimeout)(a,t)}await a;n._metricStorages.forEach((t=>{t.record(i._buffer,e)}))}))}_observeBatchCallbacks(e,t){return this._batchCallbacks.map((async({callback:r,instruments:n})=>{const i=new s.BatchObservableResultImpl;let a=Promise.resolve(r(i));if(t!=null){a=(0,o.callWithTimeout)(a,t)}await a;n.forEach((t=>{const r=i._buffer.get(t);if(r==null){return}t._metricStorages.forEach((t=>{t.record(r,e)}))}))}))}_findCallback(e,t){return this._callbacks.findIndex((r=>r.callback===e&&r.instrument===t))}_findBatchCallback(e,t){return this._batchCallbacks.findIndex((r=>r.callback===e&&(0,o.setEquals)(r.instruments,t)))}}t.ObservableRegistry=ObservableRegistry},6947:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SyncMetricStorage=void 0;const n=r(6204);const i=r(9563);const s=r(5205);class SyncMetricStorage extends n.MetricStorage{constructor(e,t,r){super(e);this._attributesProcessor=r;this._deltaMetricStorage=new i.DeltaMetricProcessor(t);this._temporalMetricStorage=new s.TemporalMetricProcessor(t)}record(e,t,r,n){t=this._attributesProcessor.process(t,r);this._deltaMetricStorage.record(e,t,r,n)}collect(e,t,r){const n=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(e,t,this._instrumentDescriptor,n,r)}}t.SyncMetricStorage=SyncMetricStorage},5205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TemporalMetricProcessor=void 0;const n=r(8709);const i=r(383);class TemporalMetricProcessor{constructor(e){this._aggregator=e;this._unreportedAccumulations=new Map;this._reportHistory=new Map}buildMetrics(e,t,r,i,s){this._stashAccumulations(t,i);const o=this._getMergedUnreportedAccumulations(e);let a=o;let l;if(this._reportHistory.has(e)){const t=this._reportHistory.get(e);const r=t.collectionTime;l=t.aggregationTemporality;if(l===n.AggregationTemporality.CUMULATIVE){a=TemporalMetricProcessor.merge(t.accumulations,o,this._aggregator)}else{a=TemporalMetricProcessor.calibrateStartTime(t.accumulations,o,r)}}else{l=e.selectAggregationTemporality(r.type)}this._reportHistory.set(e,{accumulations:a,collectionTime:s,aggregationTemporality:l});return this._aggregator.toMetricData(r,l,AttributesMapToAccumulationRecords(a),s)}_stashAccumulations(e,t){e.forEach((e=>{let r=this._unreportedAccumulations.get(e);if(r===undefined){r=[];this._unreportedAccumulations.set(e,r)}r.push(t)}))}_getMergedUnreportedAccumulations(e){let t=new i.AttributeHashMap;const r=this._unreportedAccumulations.get(e);this._unreportedAccumulations.set(e,[]);if(r===undefined){return t}for(const e of r){t=TemporalMetricProcessor.merge(t,e,this._aggregator)}return t}static merge(e,t,r){const n=e;const i=t.entries();let s=i.next();while(s.done!==true){const[t,o,a]=s.value;if(e.has(t,a)){const i=e.get(t,a);const s=r.merge(i,o);n.set(t,s,a)}else{n.set(t,o,a)}s=i.next()}return n}static calibrateStartTime(e,t,r){for(const[n,i]of e.keys()){const e=t.get(n,i);e===null||e===void 0?void 0:e.setStartTime(r)}return t}}t.TemporalMetricProcessor=TemporalMetricProcessor;function AttributesMapToAccumulationRecords(e){return Array.from(e.entries())}},4916:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.setEquals=t.FlatMap=t.isPromiseAllSettledRejectionResult=t.PromiseAllSettled=t.callWithTimeout=t.TimeoutError=t.instrumentationScopeId=t.hashAttributes=t.isNotNullish=void 0;function isNotNullish(e){return e!==undefined&&e!==null}t.isNotNullish=isNotNullish;function hashAttributes(e){let t=Object.keys(e);if(t.length===0)return"";t=t.sort();return JSON.stringify(t.map((t=>[t,e[t]])))}t.hashAttributes=hashAttributes;function instrumentationScopeId(e){var t,r;return`${e.name}:${(t=e.version)!==null&&t!==void 0?t:""}:${(r=e.schemaUrl)!==null&&r!==void 0?r:""}`}t.instrumentationScopeId=instrumentationScopeId;class TimeoutError extends Error{constructor(e){super(e);Object.setPrototypeOf(this,TimeoutError.prototype)}}t.TimeoutError=TimeoutError;function callWithTimeout(e,t){let r;const n=new Promise((function timeoutFunction(e,n){r=setTimeout((function timeoutHandler(){n(new TimeoutError("Operation timed out."))}),t)}));return Promise.race([e,n]).then((e=>{clearTimeout(r);return e}),(e=>{clearTimeout(r);throw e}))}t.callWithTimeout=callWithTimeout;async function PromiseAllSettled(e){return Promise.all(e.map((async e=>{try{const t=await e;return{status:"fulfilled",value:t}}catch(e){return{status:"rejected",reason:e}}})))}t.PromiseAllSettled=PromiseAllSettled;function isPromiseAllSettledRejectionResult(e){return e.status==="rejected"}t.isPromiseAllSettledRejectionResult=isPromiseAllSettledRejectionResult;function FlatMap(e,t){const r=[];e.forEach((e=>{r.push(...t(e))}));return r}t.FlatMap=FlatMap;function setEquals(e,t){if(e.size!==t.size){return false}for(const r of e){if(!t.has(r)){return false}}return true}t.setEquals=setEquals},1943:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DefaultAggregation=t.ExplicitBucketHistogramAggregation=t.HistogramAggregation=t.LastValueAggregation=t.SumAggregation=t.DropAggregation=t.Aggregation=void 0;const n=r(8720);const i=r(6828);const s=r(8440);class Aggregation{static Drop(){return o}static Sum(){return a}static LastValue(){return l}static Histogram(){return c}static Default(){return u}}t.Aggregation=Aggregation;class DropAggregation extends Aggregation{createAggregator(e){return DropAggregation.DEFAULT_INSTANCE}}t.DropAggregation=DropAggregation;DropAggregation.DEFAULT_INSTANCE=new i.DropAggregator;class SumAggregation extends Aggregation{createAggregator(e){switch(e.type){case s.InstrumentType.COUNTER:case s.InstrumentType.OBSERVABLE_COUNTER:case s.InstrumentType.HISTOGRAM:{return SumAggregation.MONOTONIC_INSTANCE}default:{return SumAggregation.NON_MONOTONIC_INSTANCE}}}}t.SumAggregation=SumAggregation;SumAggregation.MONOTONIC_INSTANCE=new i.SumAggregator(true);SumAggregation.NON_MONOTONIC_INSTANCE=new i.SumAggregator(false);class LastValueAggregation extends Aggregation{createAggregator(e){return LastValueAggregation.DEFAULT_INSTANCE}}t.LastValueAggregation=LastValueAggregation;LastValueAggregation.DEFAULT_INSTANCE=new i.LastValueAggregator;class HistogramAggregation extends Aggregation{createAggregator(e){return HistogramAggregation.DEFAULT_INSTANCE}}t.HistogramAggregation=HistogramAggregation;HistogramAggregation.DEFAULT_INSTANCE=new i.HistogramAggregator([0,5,10,25,50,75,100,250,500,1e3],true);class ExplicitBucketHistogramAggregation extends Aggregation{constructor(e,t=true){super();this._recordMinMax=t;if(e===undefined||e.length===0){throw new Error("HistogramAggregator should be created with boundaries.")}e=e.concat();e=e.sort(((e,t)=>e-t));const r=e.lastIndexOf(-Infinity);let n=e.indexOf(Infinity);if(n===-1){n=undefined}this._boundaries=e.slice(r+1,n)}createAggregator(e){return new i.HistogramAggregator(this._boundaries,this._recordMinMax)}}t.ExplicitBucketHistogramAggregation=ExplicitBucketHistogramAggregation;class DefaultAggregation extends Aggregation{_resolve(e){switch(e.type){case s.InstrumentType.COUNTER:case s.InstrumentType.UP_DOWN_COUNTER:case s.InstrumentType.OBSERVABLE_COUNTER:case s.InstrumentType.OBSERVABLE_UP_DOWN_COUNTER:{return a}case s.InstrumentType.OBSERVABLE_GAUGE:{return l}case s.InstrumentType.HISTOGRAM:{return c}}n.diag.warn(`Unable to recognize instrument type: ${e.type}`);return o}createAggregator(e){return this._resolve(e).createAggregator(e)}}t.DefaultAggregation=DefaultAggregation;const o=new DropAggregation;const a=new SumAggregation;const l=new LastValueAggregation;const c=new HistogramAggregation;const u=new DefaultAggregation},2848:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FilteringAttributesProcessor=t.NoopAttributesProcessor=t.AttributesProcessor=void 0;class AttributesProcessor{static Noop(){return r}}t.AttributesProcessor=AttributesProcessor;class NoopAttributesProcessor extends AttributesProcessor{process(e,t){return e}}t.NoopAttributesProcessor=NoopAttributesProcessor;class FilteringAttributesProcessor extends AttributesProcessor{constructor(e){super();this._allowedAttributeNames=e}process(e,t){const r={};Object.keys(e).filter((e=>this._allowedAttributeNames.includes(e))).forEach((t=>r[t]=e[t]));return r}}t.FilteringAttributesProcessor=FilteringAttributesProcessor;const r=new NoopAttributesProcessor},2791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InstrumentSelector=void 0;const n=r(4045);class InstrumentSelector{constructor(e){var t;this._nameFilter=new n.PatternPredicate((t=e===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:"*");this._type=e===null||e===void 0?void 0:e.type}getType(){return this._type}getNameFilter(){return this._nameFilter}}t.InstrumentSelector=InstrumentSelector},6846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MeterSelector=void 0;const n=r(4045);class MeterSelector{constructor(e){this._nameFilter=new n.ExactPredicate(e===null||e===void 0?void 0:e.name);this._versionFilter=new n.ExactPredicate(e===null||e===void 0?void 0:e.version);this._schemaUrlFilter=new n.ExactPredicate(e===null||e===void 0?void 0:e.schemaUrl)}getNameFilter(){return this._nameFilter}getVersionFilter(){return this._versionFilter}getSchemaUrlFilter(){return this._schemaUrlFilter}}t.MeterSelector=MeterSelector},4045:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExactPredicate=t.PatternPredicate=void 0;const r=/[\^$\\.+?()[\]{}|]/g;class PatternPredicate{constructor(e){if(e==="*"){this._matchAll=true;this._regexp=/.*/}else{this._matchAll=false;this._regexp=new RegExp(PatternPredicate.escapePattern(e))}}match(e){if(this._matchAll){return true}return this._regexp.test(e)}static escapePattern(e){return`^${e.replace(r,"\\$&").replace("*",".*")}$`}static hasWildcard(e){return e.includes("*")}}t.PatternPredicate=PatternPredicate;class ExactPredicate{constructor(e){this._matchAll=e===undefined;this._pattern=e}match(e){if(this._matchAll){return true}if(e===this._pattern){return true}return false}}t.ExactPredicate=ExactPredicate},5712:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.getConflictResolutionRecipe=t.getDescriptionResolutionRecipe=t.getTypeConflictResolutionRecipe=t.getUnitConflictResolutionRecipe=t.getValueTypeConflictResolutionRecipe=t.getIncompatibilityDetails=void 0;function getIncompatibilityDetails(e,t){let r="";if(e.unit!==t.unit){r+=`\t- Unit '${e.unit}' does not match '${t.unit}'\n`}if(e.type!==t.type){r+=`\t- Type '${e.type}' does not match '${t.type}'\n`}if(e.valueType!==t.valueType){r+=`\t- Value Type '${e.valueType}' does not match '${t.valueType}'\n`}if(e.description!==t.description){r+=`\t- Description '${e.description}' does not match '${t.description}'\n`}return r}t.getIncompatibilityDetails=getIncompatibilityDetails;function getValueTypeConflictResolutionRecipe(e,t){return`\t- use valueType '${e.valueType}' on instrument creation or use an instrument name other than '${t.name}'`}t.getValueTypeConflictResolutionRecipe=getValueTypeConflictResolutionRecipe;function getUnitConflictResolutionRecipe(e,t){return`\t- use unit '${e.unit}' on instrument creation or use an instrument name other than '${t.name}'`}t.getUnitConflictResolutionRecipe=getUnitConflictResolutionRecipe;function getTypeConflictResolutionRecipe(e,t){const r={name:t.name,type:t.type};const n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'`}t.getTypeConflictResolutionRecipe=getTypeConflictResolutionRecipe;function getDescriptionResolutionRecipe(e,t){const r={name:t.name,type:t.type};const n=JSON.stringify(r);return`\t- create a new view with a name other than '${e.name}' and InstrumentSelector '${n}'\n    \t- OR - create a new view with the name ${e.name} and description '${e.description}' and InstrumentSelector ${n}\n    \t- OR - create a new view with the name ${t.name} and description '${e.description}' and InstrumentSelector ${n}`}t.getDescriptionResolutionRecipe=getDescriptionResolutionRecipe;function getConflictResolutionRecipe(e,t){if(e.valueType!==t.valueType){return getValueTypeConflictResolutionRecipe(e,t)}if(e.unit!==t.unit){return getUnitConflictResolutionRecipe(e,t)}if(e.type!==t.type){return getTypeConflictResolutionRecipe(e,t)}if(e.description!==t.description){return getDescriptionResolutionRecipe(e,t)}return""}t.getConflictResolutionRecipe=getConflictResolutionRecipe},5697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.View=void 0;const n=r(4045);const i=r(2848);const s=r(2791);const o=r(6846);const a=r(1943);function isSelectorNotProvided(e){return e.instrumentName==null&&e.instrumentType==null&&e.meterName==null&&e.meterVersion==null&&e.meterSchemaUrl==null}class View{constructor(e){var t;if(isSelectorNotProvided(e)){throw new Error("Cannot create view with no selector arguments supplied")}if(e.name!=null&&((e===null||e===void 0?void 0:e.instrumentName)==null||n.PatternPredicate.hasWildcard(e.instrumentName))){throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.")}if(e.attributeKeys!=null){this.attributesProcessor=new i.FilteringAttributesProcessor(e.attributeKeys)}else{this.attributesProcessor=i.AttributesProcessor.Noop()}this.name=e.name;this.description=e.description;this.aggregation=(t=e.aggregation)!==null&&t!==void 0?t:a.Aggregation.Default();this.instrumentSelector=new s.InstrumentSelector({name:e.instrumentName,type:e.instrumentType});this.meterSelector=new o.MeterSelector({name:e.meterName,version:e.meterVersion,schemaUrl:e.meterSchemaUrl})}}t.View=View},3725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ViewRegistry=void 0;const n=r(5697);class ViewRegistry{constructor(){this._registeredViews=[]}addView(e){this._registeredViews.push(e)}findViews(e,t){const r=this._registeredViews.filter((r=>this._matchInstrument(r.instrumentSelector,e)&&this._matchMeter(r.meterSelector,t)));if(r.length===0){return[ViewRegistry.DEFAULT_VIEW]}return r}_matchInstrument(e,t){return(e.getType()===undefined||t.type===e.getType())&&e.getNameFilter().match(t.name)}_matchMeter(e,t){return e.getNameFilter().match(t.name)&&(t.version===undefined||e.getVersionFilter().match(t.version))&&(t.schemaUrl===undefined||e.getSchemaUrlFilter().match(t.schemaUrl))}}t.ViewRegistry=ViewRegistry;ViewRegistry.DEFAULT_VIEW=new n.View({instrumentName:"*"})},6499:e=>{"use strict";e.exports=asPromise;function asPromise(e,t){var r=new Array(arguments.length-1),n=0,i=2,s=true;while(i<arguments.length)r[n++]=arguments[i++];return new Promise((function executor(i,o){r[n]=function callback(e){if(s){s=false;if(e)o(e);else{var t=new Array(arguments.length-1),r=0;while(r<t.length)t[r++]=arguments[r];i.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){if(s){s=false;o(e)}}}))}},4250:(e,t)=>{"use strict";var r=t;r.length=function length(e){var t=e.length;if(!t)return 0;var r=0;while(--t%4>1&&e.charAt(t)==="=")++r;return Math.ceil(e.length*3)/4-r};var n=new Array(64);var i=new Array(123);for(var s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function encode(e,t,r){var i=null,s=[];var o=0,a=0,l;while(t<r){var c=e[t++];switch(a){case 0:s[o++]=n[c>>2];l=(c&3)<<4;a=1;break;case 1:s[o++]=n[l|c>>4];l=(c&15)<<2;a=2;break;case 2:s[o++]=n[l|c>>6];s[o++]=n[c&63];a=0;break}if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(a){s[o++]=n[l];s[o++]=61;if(a===1)s[o++]=61}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};var o="invalid encoding";r.decode=function decode(e,t,r){var n=r;var s=0,a;for(var l=0;l<e.length;){var c=e.charCodeAt(l++);if(c===61&&s>1)break;if((c=i[c])===undefined)throw Error(o);switch(s){case 0:a=c;s=1;break;case 1:t[r++]=a<<2|(c&48)>>4;a=c;s=2;break;case 2:t[r++]=(a&15)<<4|(c&60)>>2;a=c;s=3;break;case 3:t[r++]=(a&3)<<6|c;s=0;break}}if(s===1)throw Error(o);return r-n};r.test=function test(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9748:e=>{"use strict";e.exports=codegen;function codegen(e,t){if(typeof e==="string"){t=e;e=undefined}var r=[];function Codegen(e){if(typeof e!=="string"){var t=toString();if(codegen.verbose)console.log("codegen: "+t);t="return "+t;if(e){var n=Object.keys(e),i=new Array(n.length+1),s=new Array(n.length),o=0;while(o<n.length){i[o]=n[o];s[o]=e[n[o++]]}i[o]=t;return Function.apply(null,i).apply(null,s)}return Function(t)()}var a=new Array(arguments.length-1),l=0;while(l<a.length)a[l]=arguments[++l];l=0;e=e.replace(/%([%dfijs])/g,(function replace(e,t){var r=a[l++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}));if(l!==a.length)throw Error("parameter count mismatch");r.push(e);return Codegen}function toString(n){return"function "+(n||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}Codegen.toString=toString;return Codegen}codegen.verbose=false},400:e=>{"use strict";e.exports=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function on(e,t,r){(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this});return this};EventEmitter.prototype.off=function off(e,t){if(e===undefined)this._listeners={};else{if(t===undefined)this._listeners[e]=[];else{var r=this._listeners[e];for(var n=0;n<r.length;)if(r[n].fn===t)r.splice(n,1);else++n}}return this};EventEmitter.prototype.emit=function emit(e){var t=this._listeners[e];if(t){var r=[],n=1;for(;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},530:(e,t,r)=>{"use strict";e.exports=fetch;var n=r(6499),i=r(2830);var s=i("fs");function fetch(e,t,r){if(typeof t==="function"){r=t;t={}}else if(!t)t={};if(!r)return n(fetch,this,e,t);if(!t.xhr&&s&&s.readFile)return s.readFile(e,(function fetchReadFileCallback(n,i){return n&&typeof XMLHttpRequest!=="undefined"?fetch.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}));return fetch.xhr(e,t,r)}fetch.xhr=function fetch_xhr(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function fetchOnReadyStateChange(){if(n.readyState!==4)return undefined;if(n.status!==0&&n.status!==200)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(n.responseText.charCodeAt(i)&255)}return r(null,typeof Uint8Array!=="undefined"?new Uint8Array(e):e)}return r(null,n.responseText)};if(t.binary){if("overrideMimeType"in n)n.overrideMimeType("text/plain; charset=x-user-defined");n.responseType="arraybuffer"}n.open("GET",e);n.send()}},3046:e=>{"use strict";e.exports=factory(factory);function factory(e){if(typeof Float32Array!=="undefined")(function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function writeFloat_f32_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3]}function writeFloat_f32_rev(e,n,i){t[0]=e;n[i]=r[3];n[i+1]=r[2];n[i+2]=r[1];n[i+3]=r[0]}e.writeFloatLE=n?writeFloat_f32_cpy:writeFloat_f32_rev;e.writeFloatBE=n?writeFloat_f32_rev:writeFloat_f32_cpy;function readFloat_f32_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];return t[0]}function readFloat_f32_rev(e,n){r[3]=e[n];r[2]=e[n+1];r[1]=e[n+2];r[0]=e[n+3];return t[0]}e.readFloatLE=n?readFloat_f32_cpy:readFloat_f32_rev;e.readFloatBE=n?readFloat_f32_rev:readFloat_f32_cpy})();else(function(){function writeFloat_ieee754(e,t,r,n){var i=t<0?1:0;if(i)t=-t;if(t===0)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),o=Math.round(t*Math.pow(2,-s)*8388608)&8388607;e((i<<31|s+127<<23|o)>>>0,r,n)}}e.writeFloatLE=writeFloat_ieee754.bind(null,writeUintLE);e.writeFloatBE=writeFloat_ieee754.bind(null,writeUintBE);function readFloat_ieee754(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,o=n&8388607;return s===255?o?NaN:i*Infinity:s===0?i*1401298464324817e-60*o:i*Math.pow(2,s-150)*(o+8388608)}e.readFloatLE=readFloat_ieee754.bind(null,readUintLE);e.readFloatBE=readFloat_ieee754.bind(null,readUintBE)})();if(typeof Float64Array!=="undefined")(function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function writeDouble_f64_cpy(e,n,i){t[0]=e;n[i]=r[0];n[i+1]=r[1];n[i+2]=r[2];n[i+3]=r[3];n[i+4]=r[4];n[i+5]=r[5];n[i+6]=r[6];n[i+7]=r[7]}function writeDouble_f64_rev(e,n,i){t[0]=e;n[i]=r[7];n[i+1]=r[6];n[i+2]=r[5];n[i+3]=r[4];n[i+4]=r[3];n[i+5]=r[2];n[i+6]=r[1];n[i+7]=r[0]}e.writeDoubleLE=n?writeDouble_f64_cpy:writeDouble_f64_rev;e.writeDoubleBE=n?writeDouble_f64_rev:writeDouble_f64_cpy;function readDouble_f64_cpy(e,n){r[0]=e[n];r[1]=e[n+1];r[2]=e[n+2];r[3]=e[n+3];r[4]=e[n+4];r[5]=e[n+5];r[6]=e[n+6];r[7]=e[n+7];return t[0]}function readDouble_f64_rev(e,n){r[7]=e[n];r[6]=e[n+1];r[5]=e[n+2];r[4]=e[n+3];r[3]=e[n+4];r[2]=e[n+5];r[1]=e[n+6];r[0]=e[n+7];return t[0]}e.readDoubleLE=n?readDouble_f64_cpy:readDouble_f64_rev;e.readDoubleBE=n?readDouble_f64_rev:readDouble_f64_cpy})();else(function(){function writeDouble_ieee754(e,t,r,n,i,s){var o=n<0?1:0;if(o)n=-n;if(n===0){e(0,i,s+t);e(1/n>0?0:2147483648,i,s+r)}else if(isNaN(n)){e(0,i,s+t);e(2146959360,i,s+r)}else if(n>17976931348623157e292){e(0,i,s+t);e((o<<31|2146435072)>>>0,i,s+r)}else{var a;if(n<22250738585072014e-324){a=n/5e-324;e(a>>>0,i,s+t);e((o<<31|a/4294967296)>>>0,i,s+r)}else{var l=Math.floor(Math.log(n)/Math.LN2);if(l===1024)l=1023;a=n*Math.pow(2,-l);e(a*4503599627370496>>>0,i,s+t);e((o<<31|l+1023<<20|a*1048576&1048575)>>>0,i,s+r)}}}e.writeDoubleLE=writeDouble_ieee754.bind(null,writeUintLE,0,4);e.writeDoubleBE=writeDouble_ieee754.bind(null,writeUintBE,4,0);function readDouble_ieee754(e,t,r,n,i){var s=e(n,i+t),o=e(n,i+r);var a=(o>>31)*2+1,l=o>>>20&2047,c=4294967296*(o&1048575)+s;return l===2047?c?NaN:a*Infinity:l===0?a*5e-324*c:a*Math.pow(2,l-1075)*(c+4503599627370496)}e.readDoubleLE=readDouble_ieee754.bind(null,readUintLE,0,4);e.readDoubleBE=readDouble_ieee754.bind(null,readUintBE,4,0)})();return e}function writeUintLE(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24;t[r+1]=e>>>16&255;t[r+2]=e>>>8&255;t[r+3]=e&255}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}},2830:module=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},2770:(e,t)=>{"use strict";var r=t;var n=r.isAbsolute=function isAbsolute(e){return/^(?:\/|\w+:)/.test(e)};var i=r.normalize=function normalize(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=n(e),i="";if(r)i=t.shift()+"/";for(var s=0;s<t.length;){if(t[s]===".."){if(s>0&&t[s-1]!=="..")t.splice(--s,2);else if(r)t.splice(s,1);else++s}else if(t[s]===".")t.splice(s,1);else++s}return i+t.join("/")};r.resolve=function resolve(e,t,r){if(!r)t=i(t);if(n(t))return t;if(!r)e=i(e);return(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t}},9044:e=>{"use strict";e.exports=pool;function pool(e,t,r){var n=r||8192;var i=n>>>1;var s=null;var o=n;return function pool_alloc(r){if(r<1||r>i)return e(r);if(o+r>n){s=e(n);o=0}var a=t.call(s,o,o+=r);if(o&7)o=(o|7)+1;return a}}},5247:(e,t)=>{"use strict";var r=t;r.length=function utf8_length(e){var t=0,r=0;for(var n=0;n<e.length;++n){r=e.charCodeAt(n);if(r<128)t+=1;else if(r<2048)t+=2;else if((r&64512)===55296&&(e.charCodeAt(n+1)&64512)===56320){++n;t+=4}else t+=3}return t};r.read=function utf8_read(e,t,r){var n=r-t;if(n<1)return"";var i=null,s=[],o=0,a;while(t<r){a=e[t++];if(a<128)s[o++]=a;else if(a>191&&a<224)s[o++]=(a&31)<<6|e[t++]&63;else if(a>239&&a<365){a=((a&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536;s[o++]=55296+(a>>10);s[o++]=56320+(a&1023)}else s[o++]=(a&15)<<12|(e[t++]&63)<<6|e[t++]&63;if(o>8191){(i||(i=[])).push(String.fromCharCode.apply(String,s));o=0}}if(i){if(o)i.push(String.fromCharCode.apply(String,s.slice(0,o)));return i.join("")}return String.fromCharCode.apply(String,s.slice(0,o))};r.write=function utf8_write(e,t,r){var n=r,i,s;for(var o=0;o<e.length;++o){i=e.charCodeAt(o);if(i<128){t[r++]=i}else if(i<2048){t[r++]=i>>6|192;t[r++]=i&63|128}else if((i&64512)===55296&&((s=e.charCodeAt(o+1))&64512)===56320){i=65536+((i&1023)<<10)+(s&1023);++o;t[r++]=i>>18|240;t[r++]=i>>12&63|128;t[r++]=i>>6&63|128;t[r++]=i&63|128}else{t[r++]=i>>12|224;t[r++]=i>>6&63|128;t[r++]=i&63|128}}return r-n}},5276:e=>{var t=1/0;var r="[object Symbol]";var n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g;var s="\\ud800-\\udfff",o="\\u0300-\\u036f\\ufe20-\\ufe23",a="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",u="\\xac\\xb1\\xd7\\xf7",d="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",f="\\u2000-\\u206f",h=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="A-Z\\xc0-\\xd6\\xd8-\\xde",m="\\ufe0e\\ufe0f",g=u+d+f+h;var y="['’]",v="["+s+"]",b="["+g+"]",S="["+o+a+"]",_="\\d+",T="["+l+"]",E="["+c+"]",O="[^"+s+g+_+l+c+p+"]",C="\\ud83c[\\udffb-\\udfff]",R="(?:"+S+"|"+C+")",A="[^"+s+"]",w="(?:\\ud83c[\\udde6-\\uddff]){2}",P="[\\ud800-\\udbff][\\udc00-\\udfff]",N="["+p+"]",I="\\u200d";var M="(?:"+E+"|"+O+")",k="(?:"+N+"|"+O+")",D="(?:"+y+"(?:d|ll|m|re|s|t|ve))?",x="(?:"+y+"(?:D|LL|M|RE|S|T|VE))?",L=R+"?",j="["+m+"]?",B="(?:"+I+"(?:"+[A,w,P].join("|")+")"+j+L+")*",F=j+L+B,U="(?:"+[T,w,P].join("|")+")"+F,V="(?:"+[A+S+"?",S,w,P,v].join("|")+")";var z=RegExp(y,"g");var H=RegExp(S,"g");var G=RegExp(C+"(?="+C+")|"+V+F,"g");var W=RegExp([N+"?"+E+"+"+D+"(?="+[b,N,"$"].join("|")+")",k+"+"+x+"(?="+[b,N+M,"$"].join("|")+")",N+"?"+M+"+"+D,N+"+"+x,_,U].join("|"),"g");var $=RegExp("["+I+s+o+a+m+"]");var q=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var J={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"};var K=typeof global=="object"&&global&&global.Object===Object&&global;var Y=typeof self=="object"&&self&&self.Object===Object&&self;var X=K||Y||Function("return this")();function arrayReduce(e,t,r,n){var i=-1,s=e?e.length:0;if(n&&s){r=e[++i]}while(++i<s){r=t(r,e[i],i,e)}return r}function asciiToArray(e){return e.split("")}function asciiWords(e){return e.match(n)||[]}function basePropertyOf(e){return function(t){return e==null?undefined:e[t]}}var Z=basePropertyOf(J);function hasUnicode(e){return $.test(e)}function hasUnicodeWord(e){return q.test(e)}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function unicodeToArray(e){return e.match(G)||[]}function unicodeWords(e){return e.match(W)||[]}var Q=Object.prototype;var ee=Q.toString;var te=X.Symbol;var re=te?te.prototype:undefined,ne=re?re.toString:undefined;function baseSlice(e,t,r){var n=-1,i=e.length;if(t<0){t=-t>i?0:i+t}r=r>i?i:r;if(r<0){r+=i}i=t>r?0:r-t>>>0;t>>>=0;var s=Array(i);while(++n<i){s[n]=e[n+t]}return s}function baseToString(e){if(typeof e=="string"){return e}if(isSymbol(e)){return ne?ne.call(e):""}var r=e+"";return r=="0"&&1/e==-t?"-0":r}function castSlice(e,t,r){var n=e.length;r=r===undefined?n:r;return!t&&r>=n?e:baseSlice(e,t,r)}function createCaseFirst(e){return function(t){t=toString(t);var r=hasUnicode(t)?stringToArray(t):undefined;var n=r?r[0]:t.charAt(0);var i=r?castSlice(r,1).join(""):t.slice(1);return n[e]()+i}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(z,"")),e,"")}}function isObjectLike(e){return!!e&&typeof e=="object"}function isSymbol(e){return typeof e=="symbol"||isObjectLike(e)&&ee.call(e)==r}function toString(e){return e==null?"":baseToString(e)}var ie=createCompounder((function(e,t,r){t=t.toLowerCase();return e+(r?capitalize(t):t)}));function capitalize(e){return se(toString(e).toLowerCase())}function deburr(e){e=toString(e);return e&&e.replace(i,Z).replace(H,"")}var se=createCaseFirst("toUpperCase");function words(e,t,r){e=toString(e);t=r?undefined:t;if(t===undefined){return hasUnicodeWord(e)?unicodeWords(e):asciiWords(e)}return e.match(t)||[]}e.exports=ie},4389:e=>{e.exports=Long;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Long(e,t,r){this.low=e|0;this.high=t|0;this.unsigned=!!r}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:true});function isLong(e){return(e&&e["__isLong__"])===true}Long.isLong=isLong;var r={};var n={};function fromInt(e,t){var i,s,o;if(t){e>>>=0;if(o=0<=e&&e<256){s=n[e];if(s)return s}i=fromBits(e,(e|0)<0?-1:0,true);if(o)n[e]=i;return i}else{e|=0;if(o=-128<=e&&e<128){s=r[e];if(s)return s}i=fromBits(e,e<0?-1:0,false);if(o)r[e]=i;return i}}Long.fromInt=fromInt;function fromNumber(e,t){if(isNaN(e))return t?f:d;if(t){if(e<0)return f;if(e>=l)return y}else{if(e<=-c)return v;if(e+1>=c)return g}if(e<0)return fromNumber(-e,t).neg();return fromBits(e%a|0,e/a|0,t)}Long.fromNumber=fromNumber;function fromBits(e,t,r){return new Long(e,t,r)}Long.fromBits=fromBits;var i=Math.pow;function fromString(e,t,r){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return d;if(typeof t==="number"){r=t,t=false}else{t=!!t}r=r||10;if(r<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");else if(n===0){return fromString(e.substring(1),t,r).neg()}var s=fromNumber(i(r,8));var o=d;for(var a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+l),r);if(l<8){var u=fromNumber(i(r,l));o=o.mul(u).add(fromNumber(c))}else{o=o.mul(s);o=o.add(fromNumber(c))}}o.unsigned=t;return o}Long.fromString=fromString;function fromValue(e,t){if(typeof e==="number")return fromNumber(e,t);if(typeof e==="string")return fromString(e,t);return fromBits(e.low,e.high,typeof t==="boolean"?t:e.unsigned)}Long.fromValue=fromValue;var s=1<<16;var o=1<<24;var a=s*s;var l=a*a;var c=l/2;var u=fromInt(o);var d=fromInt(0);Long.ZERO=d;var f=fromInt(0,true);Long.UZERO=f;var h=fromInt(1);Long.ONE=h;var p=fromInt(1,true);Long.UONE=p;var m=fromInt(-1);Long.NEG_ONE=m;var g=fromBits(4294967295|0,2147483647|0,false);Long.MAX_VALUE=g;var y=fromBits(4294967295|0,4294967295|0,true);Long.MAX_UNSIGNED_VALUE=y;var v=fromBits(0,2147483648|0,false);Long.MIN_VALUE=v;var b=Long.prototype;b.toInt=function toInt(){return this.unsigned?this.low>>>0:this.low};b.toNumber=function toNumber(){if(this.unsigned)return(this.high>>>0)*a+(this.low>>>0);return this.high*a+(this.low>>>0)};b.toString=function toString(e){e=e||10;if(e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(v)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}else return"-"+this.neg().toString(e)}var s=fromNumber(i(e,6),this.unsigned),o=this;var a="";while(true){var l=o.div(s),c=o.sub(l.mul(s)).toInt()>>>0,u=c.toString(e);o=l;if(o.isZero())return u+a;else{while(u.length<6)u="0"+u;a=""+u+a}}};b.getHighBits=function getHighBits(){return this.high};b.getHighBitsUnsigned=function getHighBitsUnsigned(){return this.high>>>0};b.getLowBits=function getLowBits(){return this.low};b.getLowBitsUnsigned=function getLowBitsUnsigned(){return this.low>>>0};b.getNumBitsAbs=function getNumBitsAbs(){if(this.isNegative())return this.eq(v)?64:this.neg().getNumBitsAbs();var e=this.high!=0?this.high:this.low;for(var t=31;t>0;t--)if((e&1<<t)!=0)break;return this.high!=0?t+33:t+1};b.isZero=function isZero(){return this.high===0&&this.low===0};b.eqz=b.isZero;b.isNegative=function isNegative(){return!this.unsigned&&this.high<0};b.isPositive=function isPositive(){return this.unsigned||this.high>=0};b.isOdd=function isOdd(){return(this.low&1)===1};b.isEven=function isEven(){return(this.low&1)===0};b.equals=function equals(e){if(!isLong(e))e=fromValue(e);if(this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1)return false;return this.high===e.high&&this.low===e.low};b.eq=b.equals;b.notEquals=function notEquals(e){return!this.eq(e)};b.neq=b.notEquals;b.ne=b.notEquals;b.lessThan=function lessThan(e){return this.comp(e)<0};b.lt=b.lessThan;b.lessThanOrEqual=function lessThanOrEqual(e){return this.comp(e)<=0};b.lte=b.lessThanOrEqual;b.le=b.lessThanOrEqual;b.greaterThan=function greaterThan(e){return this.comp(e)>0};b.gt=b.greaterThan;b.greaterThanOrEqual=function greaterThanOrEqual(e){return this.comp(e)>=0};b.gte=b.greaterThanOrEqual;b.ge=b.greaterThanOrEqual;b.compare=function compare(e){if(!isLong(e))e=fromValue(e);if(this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();if(t&&!r)return-1;if(!t&&r)return 1;if(!this.unsigned)return this.sub(e).isNegative()?-1:1;return e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1};b.comp=b.compare;b.negate=function negate(){if(!this.unsigned&&this.eq(v))return v;return this.not().add(h)};b.neg=b.negate;b.add=function add(e){if(!isLong(e))e=fromValue(e);var t=this.high>>>16;var r=this.high&65535;var n=this.low>>>16;var i=this.low&65535;var s=e.high>>>16;var o=e.high&65535;var a=e.low>>>16;var l=e.low&65535;var c=0,u=0,d=0,f=0;f+=i+l;d+=f>>>16;f&=65535;d+=n+a;u+=d>>>16;d&=65535;u+=r+o;c+=u>>>16;u&=65535;c+=t+s;c&=65535;return fromBits(d<<16|f,c<<16|u,this.unsigned)};b.subtract=function subtract(e){if(!isLong(e))e=fromValue(e);return this.add(e.neg())};b.sub=b.subtract;b.multiply=function multiply(e){if(this.isZero())return d;if(!isLong(e))e=fromValue(e);if(t){var r=t.mul(this.low,this.high,e.low,e.high);return fromBits(r,t.get_high(),this.unsigned)}if(e.isZero())return d;if(this.eq(v))return e.isOdd()?v:d;if(e.eq(v))return this.isOdd()?v:d;if(this.isNegative()){if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg()}else if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(u)&&e.lt(u))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16;var i=this.high&65535;var s=this.low>>>16;var o=this.low&65535;var a=e.high>>>16;var l=e.high&65535;var c=e.low>>>16;var f=e.low&65535;var h=0,p=0,m=0,g=0;g+=o*f;m+=g>>>16;g&=65535;m+=s*f;p+=m>>>16;m&=65535;m+=o*c;p+=m>>>16;m&=65535;p+=i*f;h+=p>>>16;p&=65535;p+=s*c;h+=p>>>16;p&=65535;p+=o*l;h+=p>>>16;p&=65535;h+=n*f+i*c+s*l+o*a;h&=65535;return fromBits(m<<16|g,h<<16|p,this.unsigned)};b.mul=b.multiply;b.divide=function divide(e){if(!isLong(e))e=fromValue(e);if(e.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1){return this}var r=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high);return fromBits(r,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?f:d;var n,s,o;if(!this.unsigned){if(this.eq(v)){if(e.eq(h)||e.eq(m))return v;else if(e.eq(v))return h;else{var a=this.shr(1);n=a.div(e).shl(1);if(n.eq(d)){return e.isNegative()?h:m}else{s=this.sub(e.mul(n));o=n.add(s.div(e));return o}}}else if(e.eq(v))return this.unsigned?f:d;if(this.isNegative()){if(e.isNegative())return this.neg().div(e.neg());return this.neg().div(e).neg()}else if(e.isNegative())return this.div(e.neg()).neg();o=d}else{if(!e.unsigned)e=e.toUnsigned();if(e.gt(this))return f;if(e.gt(this.shru(1)))return p;o=f}s=this;while(s.gte(e)){n=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));var l=Math.ceil(Math.log(n)/Math.LN2),c=l<=48?1:i(2,l-48),u=fromNumber(n),g=u.mul(e);while(g.isNegative()||g.gt(s)){n-=c;u=fromNumber(n,this.unsigned);g=u.mul(e)}if(u.isZero())u=h;o=o.add(u);s=s.sub(g)}return o};b.div=b.divide;b.modulo=function modulo(e){if(!isLong(e))e=fromValue(e);if(t){var r=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high);return fromBits(r,t.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};b.mod=b.modulo;b.rem=b.modulo;b.not=function not(){return fromBits(~this.low,~this.high,this.unsigned)};b.and=function and(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low&e.low,this.high&e.high,this.unsigned)};b.or=function or(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low|e.low,this.high|e.high,this.unsigned)};b.xor=function xor(e){if(!isLong(e))e=fromValue(e);return fromBits(this.low^e.low,this.high^e.high,this.unsigned)};b.shiftLeft=function shiftLeft(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned);else return fromBits(0,this.low<<e-32,this.unsigned)};b.shl=b.shiftLeft;b.shiftRight=function shiftRight(e){if(isLong(e))e=e.toInt();if((e&=63)===0)return this;else if(e<32)return fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned);else return fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};b.shr=b.shiftRight;b.shiftRightUnsigned=function shiftRightUnsigned(e){if(isLong(e))e=e.toInt();e&=63;if(e===0)return this;else{var t=this.high;if(e<32){var r=this.low;return fromBits(r>>>e|t<<32-e,t>>>e,this.unsigned)}else if(e===32)return fromBits(t,0,this.unsigned);else return fromBits(t>>>e-32,0,this.unsigned)}};b.shru=b.shiftRightUnsigned;b.shr_u=b.shiftRightUnsigned;b.toSigned=function toSigned(){if(!this.unsigned)return this;return fromBits(this.low,this.high,false)};b.toUnsigned=function toUnsigned(){if(this.unsigned)return this;return fromBits(this.low,this.high,true)};b.toBytes=function toBytes(e){return e?this.toBytesLE():this.toBytesBE()};b.toBytesLE=function toBytesLE(){var e=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};b.toBytesBE=function toBytesBE(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function fromBytes(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)};Long.fromBytesLE=function fromBytesLE(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)};Long.fromBytesBE=function fromBytesBE(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},7298:(e,t,r)=>{"use strict";var n=r(8571);e.exports=t=n.descriptor=n.Root.fromJSON(r(7270)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,o=n.Enum,a=n.Type,l=n.Field,c=n.MapField,u=n.OneOf,d=n.Service,f=n.Method;s.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.FileDescriptorSet.decode(e);var r=new s;if(e.file){var n,i;for(var c=0,u;c<e.file.length;++c){i=r;if((n=e.file[c])["package"]&&n["package"].length)i=r.define(n["package"]);if(n.name&&n.name.length)r.files.push(i.filename=n.name);if(n.messageType)for(u=0;u<n.messageType.length;++u)i.add(a.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(o.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var f=fromDescriptorOptions(n.options,t.FileOptions);if(f){var h=Object.keys(f);for(u=0;u<h.length;++u)i.setOption(h[u],f[h[u]])}}}return r};s.prototype.toDescriptor=function toDescriptor(e){var r=t.FileDescriptorSet.create();Root_toDescriptorRecursive(this,r.file,e);return r};function Root_toDescriptorRecursive(e,r,n){var c=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});if(n)c.syntax=n;if(!(e instanceof s))c["package"]=e.fullName.substring(1);for(var u=0,f;u<e.nestedArray.length;++u)if((f=e._nestedArray[u])instanceof a)c.messageType.push(f.toDescriptor(n));else if(f instanceof o)c.enumType.push(f.toDescriptor());else if(f instanceof l)c.extension.push(f.toDescriptor(n));else if(f instanceof d)c.service.push(f.toDescriptor());else if(f instanceof i)Root_toDescriptorRecursive(f,r,n);c.options=toDescriptorOptions(e.options,t.FileOptions);if(c.messageType.length+c.enumType.length+c.extension.length+c.service.length)r.push(c)}var h=0;a.fromDescriptor=function fromDescriptor(e,r){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);var n=new a(e.name.length?e.name:"Type"+h++,fromDescriptorOptions(e.options,t.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)n.add(u.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=l.fromDescriptor(e.field[i],r);n.add(s);if(e.field[i].hasOwnProperty("oneofIndex"))n.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)n.add(l.fromDescriptor(e.extension[i],r));if(e.nestedType)for(i=0;i<e.nestedType.length;++i){n.add(a.fromDescriptor(e.nestedType[i],r));if(e.nestedType[i].options&&e.nestedType[i].options.mapEntry)n.setOption("map_entry",true)}if(e.enumType)for(i=0;i<e.enumType.length;++i)n.add(o.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length){n.extensions=[];for(i=0;i<e.extensionRange.length;++i)n.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end])}if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){n.reserved=[];if(e.reservedRange)for(i=0;i<e.reservedRange.length;++i)n.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)n.reserved.push(e.reservedName[i])}return n};a.prototype.toDescriptor=function toDescriptor(e){var r=t.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var i;r.field.push(i=this._fieldsArray[n].toDescriptor(e));if(this._fieldsArray[n]instanceof c){var s=toDescriptorType(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),u=toDescriptorType(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=u===11||u===14?this._fieldsArray[n].resolvedType&&shortname(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:undefined;r.nestedType.push(t.DescriptorProto.create({name:i.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:u,typeName:d})],options:t.MessageOptions.create({mapEntry:true})}))}}for(n=0;n<this.oneofsArray.length;++n)r.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n){if(this._nestedArray[n]instanceof l)r.field.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof a)r.nestedType.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof o)r.enumType.push(this._nestedArray[n].toDescriptor())}if(this.extensions)for(n=0;n<this.extensions.length;++n)r.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)if(typeof this.reserved[n]==="string")r.reservedName.push(this.reserved[n]);else r.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));r.options=toDescriptorOptions(this.options,t.MessageOptions);return r};var p=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function fromDescriptor(e,r){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);if(typeof e.number!=="number")throw Error("missing field id");var n;if(e.typeName&&e.typeName.length)n=e.typeName;else n=fromDescriptorType(e.type);var i;switch(e.label){case 1:i=undefined;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;if(e.extendee!==undefined){s=s.length?s:undefined}var o=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);o.options=fromDescriptorOptions(e.options,t.FieldOptions);if(e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=true;break;case"false":case"FALSE":a=false;break;default:var c=p.exec(a);if(c)a=parseInt(a);break}o.setOption("default",a)}if(packableDescriptorType(e.type)){if(r==="proto3"){if(e.options&&!e.options.packed)o.setOption("packed",false)}else if(!(e.options&&e.options.packed))o.setOption("packed",false)}return o};l.prototype.toDescriptor=function toDescriptor(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map){r.type=11;r.typeName=n.util.ucFirst(this.name);r.label=3}else{switch(r.type=toDescriptorType(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?shortname(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1;break}}r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend;if(this.partOf)if((r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");if(this.options){r.options=toDescriptorOptions(this.options,t.FieldOptions);if(this.options["default"]!=null)r.defaultValue=String(this.options["default"])}if(e==="proto3"){if(!this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=false}else if(this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=true;return r};var m=0;o.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.EnumDescriptorProto.decode(e);var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new o(e.name&&e.name.length?e.name:"Enum"+m++,r,fromDescriptorOptions(e.options,t.EnumOptions))};o.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:toDescriptorOptions(this.options,t.EnumOptions)})};var g=0;u.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.OneofDescriptorProto.decode(e);return new u(e.name&&e.name.length?e.name:"oneof"+g++)};u.prototype.toDescriptor=function toDescriptor(){return t.OneofDescriptorProto.create({name:this.name})};var y=0;d.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.ServiceDescriptorProto.decode(e);var r=new d(e.name&&e.name.length?e.name:"Service"+y++,fromDescriptorOptions(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(f.fromDescriptor(e.method[n]));return r};d.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:toDescriptorOptions(this.options,t.ServiceOptions)})};var v=0;f.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.MethodDescriptorProto.decode(e);return new f(e.name&&e.name.length?e.name:"Method"+v++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),fromDescriptorOptions(e.options,t.MethodOptions))};f.prototype.toDescriptor=function toDescriptor(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:toDescriptorOptions(this.options,t.MethodOptions)})};function fromDescriptorType(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function packableDescriptorType(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return true}return false}function toDescriptorType(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof a)return t.group?10:11;throw Error("illegal type: "+e)}function fromDescriptorOptions(e,t){if(!e)return undefined;var r=[];for(var i=0,s,a,l;i<t.fieldsArray.length;++i)if((a=(s=t._fieldsArray[i]).name)!=="uninterpretedOption")if(e.hasOwnProperty(a)){l=e[a];if(s.resolvedType instanceof o&&typeof l==="number"&&s.resolvedType.valuesById[l]!==undefined)l=s.resolvedType.valuesById[l];r.push(underScore(a),l)}return r.length?n.util.toObject(r):undefined}function toDescriptorOptions(e,t){if(!e)return undefined;var r=[];for(var i=0,s=Object.keys(e),o,a;i<s.length;++i){a=e[o=s[i]];if(o==="default")continue;var l=t.fields[o];if(!l&&!(l=t.fields[o=n.util.camelCase(o)]))continue;r.push(o,a)}return r.length?t.fromObject(n.util.toObject(r)):undefined}function shortname(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,a=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)while(o<r.length&&a<l&&r[o]===n[a]){var c=t.lookup(r[o++],true);if(c!==null&&c!==t)break;++a}else for(;o<r.length&&a<l&&r[o]===n[a];++o,++a);return n.slice(a).join(".")}function underScore(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,(function(e,t){return"_"+t.toLowerCase()}))}},8571:(e,t,r)=>{"use strict";e.exports=r(7672)},1997:e=>{"use strict";e.exports=common;var t=/\/|\./;function common(e,r){if(!t.test(e)){e="google/protobuf/"+e+".proto";r={nested:{google:{nested:{protobuf:{nested:r}}}}}}common[e]=r}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;common("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:r});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function get(e){return common[e]||null}},8420:(e,t,r)=>{"use strict";var n=t;var i=r(1759),s=r(5041);function genValuePartial_fromObject(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a){if(t.repeated&&s[o[a]]===t.typeDefault)e("default:");e("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break")}e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var l=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":l=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n);break}}return e}n.fromObject=function fromObject(e){var t=e.fieldsArray;var r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),a=s.safeProp(o.name);if(o.map){r("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[ks[i]]")("}")("}")}else if(o.repeated){r("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[i]")("}")("}")}else{if(!(o.resolvedType instanceof i))r("if(d%s!=null){",a);genValuePartial_fromObject(r,o,n,a);if(!(o.resolvedType instanceof i))r("}")}}return r("return m")};function genValuePartial_toObject(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i)e("d%s=o.enums===String?types[%i].values[m%s]:m%s",n,r,n,n);else e("d%s=types[%i].toObject(m%s,o)",n,r,n)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n);break}}return e}n.toObject=function toObject(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}");var n=[],o=[],a=[],l=0;for(;l<t.length;++l)if(!t[l].partOf)(t[l].resolve().repeated?n:t[l].map?o:a).push(t[l]);if(n.length){r("if(o.arrays||o.defaults){");for(l=0;l<n.length;++l)r("d%s=[]",s.safeProp(n[l].name));r("}")}if(o.length){r("if(o.objects||o.defaults){");for(l=0;l<o.length;++l)r("d%s={}",s.safeProp(o[l].name));r("}")}if(a.length){r("if(o.defaults){");for(l=0;l<a.length;++l){var c=a[l],u=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",u,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var d="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",u,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else r("d%s=%j",u,c.typeDefault)}r("}")}var f=false;for(l=0;l<t.length;++l){var c=t[l],h=e._fieldsArray.indexOf(c),u=s.safeProp(c.name);if(c.map){if(!f){f=true;r("var ks2")}r("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){");genValuePartial_toObject(r,c,h,u+"[ks2[j]]")("}")}else if(c.repeated){r("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u);genValuePartial_toObject(r,c,h,u+"[j]")("}")}else{r("if(m%s!=null&&m.hasOwnProperty(%j)){",u,c.name);genValuePartial_toObject(r,c,h,u);if(c.partOf)r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)}r("}")}return r("return d")}},4895:(e,t,r)=>{"use strict";e.exports=decoder;var n=r(1759),i=r(992),s=r(5041);function missing(e){return"missing required '"+e.name+"'"}function decoder(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");if(e.group)t("if((t&7)===4)")("break");t("switch(t>>>3){");var r=0;for(;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),a=o.resolvedType instanceof n?"int32":o.type,l="m"+s.safeProp(o.name);t("case %i:",o.id);if(o.map){t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos");if(i.defaults[o.keyType]!==undefined)t("k=%j",i.defaults[o.keyType]);else t("k=null");if(i.defaults[a]!==undefined)t("value=%j",i.defaults[a]);else t("value=null");t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:");if(i.basic[a]===undefined)t("value=types[%i].decode(r,r.uint32())",r);else t("value=r.%s()",a);t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}");if(i.long[o.keyType]!==undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=value',l);else t("%s[k]=value",l)}else if(o.repeated){t("if(!(%s&&%s.length))",l,l)("%s=[]",l);if(i.packed[a]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,a)("}else");if(i.basic[a]===undefined)t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r);else t("%s.push(r.%s())",l,a)}else if(i.basic[a]===undefined)t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r);else t("%s=r.%s()",l,a);t("break")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];if(c.required)t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",missing(c))}return t("return m")}},5895:(e,t,r)=>{"use strict";e.exports=encoder;var n=r(1759),i=r(992),s=r(5041);function genTypePartial(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function encoder(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var r,o;var a=e.fieldsArray.slice().sort(s.compareFieldsById);for(var r=0;r<a.length;++r){var l=a[r].resolve(),c=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof n?"int32":l.type,d=i.basic[u];o="m"+s.safeProp(l.name);if(l.map){t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType);if(d===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,o);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,u,o);t("}")("}")}else if(l.repeated){t("if(%s!=null&&%s.length){",o,o);if(l.packed&&i.packed[u]!==undefined){t("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",u,o)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",o);if(d===undefined)genTypePartial(t,l,c,o+"[i]");else t("w.uint32(%i).%s(%s[i])",(l.id<<3|d)>>>0,u,o)}t("}")}else{if(l.optional)t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,l.name);if(d===undefined)genTypePartial(t,l,c,o);else t("w.uint32(%i).%s(%s)",(l.id<<3|d)>>>0,u,o)}}return t("return w")}},1759:(e,t,r)=>{"use strict";e.exports=Enum;var n=r(5232);((Enum.prototype=Object.create(n.prototype)).constructor=Enum).className="Enum";var i=r(8873),s=r(5041);function Enum(e,t,r,i,s){n.call(this,e,r);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=i;this.comments=s||{};this.reserved=undefined;if(t)for(var o=Object.keys(t),a=0;a<o.length;++a)if(typeof t[o[a]]==="number")this.valuesById[this.values[o[a]]=t[o[a]]]=o[a]}Enum.fromJSON=function fromJSON(e,t){var r=new Enum(e,t.values,t.options,t.comment,t.comments);r.reserved=t.reserved;return r};Enum.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])};Enum.prototype.add=function add(e,t,r){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;this.comments[e]=r||null;return this};Enum.prototype.remove=function remove(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);delete this.valuesById[t];delete this.values[e];delete this.comments[e];return this};Enum.prototype.isReservedId=function isReservedId(e){return i.isReservedId(this.reserved,e)};Enum.prototype.isReservedName=function isReservedName(e){return i.isReservedName(this.reserved,e)}},5082:(e,t,r)=>{"use strict";e.exports=Field;var n=r(5232);((Field.prototype=Object.create(n.prototype)).constructor=Field).className="Field";var i=r(1759),s=r(992),o=r(5041);var a;var l=/^required|optional|repeated$/;Field.fromJSON=function fromJSON(e,t){return new Field(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)};function Field(e,t,r,i,a,c,u){if(o.isObject(i)){u=a;c=i;i=a=undefined}else if(o.isObject(a)){u=c;c=a;a=undefined}n.call(this,e,c);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(i!==undefined&&!l.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!o.isString(a))throw TypeError("extend must be a string");if(i==="proto3_optional"){i="optional"}this.rule=i&&i!=="optional"?i:undefined;this.type=r;this.id=t;this.extend=a||undefined;this.required=i==="required";this.optional=!this.required;this.repeated=i==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[r]!==undefined:false;this.bytes=r==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this._packed=null;this.comment=u}Object.defineProperty(Field.prototype,"packed",{get:function(){if(this._packed===null)this._packed=this.getOption("packed")!==false;return this._packed}});Field.prototype.setOption=function setOption(e,t,r){if(e==="packed")this._packed=null;return n.prototype.setOption.call(this,e,t,r)};Field.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return o.toObject(["rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};Field.prototype.resolve=function resolve(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof a)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof i&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed===true||this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof i))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var e;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=e}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof a)this.parent.ctor.prototype[this.name]=this.defaultValue;return n.prototype.resolve.call(this)};Field.d=function decorateField(e,t,r,n){if(typeof t==="function")t=o.decorateType(t).name;else if(t&&typeof t==="object")t=o.decorateEnum(t).name;return function fieldDecorator(i,s){o.decorateType(i.constructor).add(new Field(s,e,t,r,{default:n}))}};Field._configure=function configure(e){a=e}},7675:(e,t,r)=>{"use strict";var n=e.exports=r(6618);n.build="light";function load(e,t,r){if(typeof t==="function"){r=t;t=new n.Root}else if(!t)t=new n.Root;return t.load(e,r)}n.load=load;function loadSync(e,t){if(!t)t=new n.Root;return t.loadSync(e)}n.loadSync=loadSync;n.encoder=r(5895);n.decoder=r(4895);n.verifier=r(2572);n.converter=r(8420);n.ReflectionObject=r(5232);n.Namespace=r(8873);n.Root=r(1982);n.Enum=r(1759);n.Type=r(8741);n.Field=r(5082);n.OneOf=r(4727);n.MapField=r(6036);n.Service=r(9131);n.Method=r(8981);n.Message=r(83);n.wrappers=r(4593);n.types=r(992);n.util=r(5041);n.ReflectionObject._configure(n.Root);n.Namespace._configure(n.Type,n.Service,n.Enum);n.Root._configure(n.Type);n.Field._configure(n.Type)},6618:(e,t,r)=>{"use strict";var n=t;n.build="minimal";n.Writer=r(5802);n.BufferWriter=r(1132);n.Reader=r(151);n.BufferReader=r(9403);n.util=r(8181);n.rpc=r(9034);n.roots=r(4702);n.configure=configure;function configure(){n.util._configure();n.Writer._configure(n.BufferWriter);n.Reader._configure(n.BufferReader)}configure()},7672:(e,t,r)=>{"use strict";var n=e.exports=r(7675);n.build="full";n.tokenize=r(8406);n.parse=r(2267);n.common=r(1997);n.Root._configure(n.Type,n.parse,n.common)},6036:(e,t,r)=>{"use strict";e.exports=MapField;var n=r(5082);((MapField.prototype=Object.create(n.prototype)).constructor=MapField).className="MapField";var i=r(992),s=r(5041);function MapField(e,t,r,i,o,a){n.call(this,e,t,i,undefined,undefined,o,a);if(!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r;this.resolvedKeyType=null;this.map=true}MapField.fromJSON=function fromJSON(e,t){return new MapField(e,t.id,t.keyType,t.type,t.options,t.comment)};MapField.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};MapField.prototype.resolve=function resolve(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)};MapField.d=function decorateMapField(e,t,r){if(typeof r==="function")r=s.decorateType(r).name;else if(r&&typeof r==="object")r=s.decorateEnum(r).name;return function mapFieldDecorator(n,i){s.decorateType(n.constructor).add(new MapField(i,e,t,r))}}},83:(e,t,r)=>{"use strict";e.exports=Message;var n=r(8181);function Message(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}Message.create=function create(e){return this.$type.create(e)};Message.encode=function encode(e,t){return this.$type.encode(e,t)};Message.encodeDelimited=function encodeDelimited(e,t){return this.$type.encodeDelimited(e,t)};Message.decode=function decode(e){return this.$type.decode(e)};Message.decodeDelimited=function decodeDelimited(e){return this.$type.decodeDelimited(e)};Message.verify=function verify(e){return this.$type.verify(e)};Message.fromObject=function fromObject(e){return this.$type.fromObject(e)};Message.toObject=function toObject(e,t){return this.$type.toObject(e,t)};Message.prototype.toJSON=function toJSON(){return this.$type.toObject(this,n.toJSONOptions)}},8981:(e,t,r)=>{"use strict";e.exports=Method;var n=r(5232);((Method.prototype=Object.create(n.prototype)).constructor=Method).className="Method";var i=r(5041);function Method(e,t,r,s,o,a,l,c,u){if(i.isObject(o)){l=o;o=a=undefined}else if(i.isObject(a)){l=a;a=undefined}if(!(t===undefined||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l);this.type=t||"rpc";this.requestType=r;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=a?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=c;this.parsedOptions=u}Method.fromJSON=function fromJSON(e,t){return new Method(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};Method.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return i.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])};Method.prototype.resolve=function resolve(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return n.prototype.resolve.call(this)}},8873:(e,t,r)=>{"use strict";e.exports=Namespace;var n=r(5232);((Namespace.prototype=Object.create(n.prototype)).constructor=Namespace).className="Namespace";var i=r(5082),s=r(4727),o=r(5041);var a,l,c;Namespace.fromJSON=function fromJSON(e,t){return new Namespace(e,t.options).addJSON(t.nested)};function arrayToJSON(e,t){if(!(e&&e.length))return undefined;var r={};for(var n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}Namespace.arrayToJSON=arrayToJSON;Namespace.isReservedId=function isReservedId(e,t){if(e)for(var r=0;r<e.length;++r)if(typeof e[r]!=="string"&&e[r][0]<=t&&e[r][1]>t)return true;return false};Namespace.isReservedName=function isReservedName(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return true;return false};function Namespace(e,t){n.call(this,e,t);this.nested=undefined;this._nestedArray=null}function clearCache(e){e._nestedArray=null;return e}Object.defineProperty(Namespace.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=o.toArray(this.nested))}});Namespace.prototype.toJSON=function toJSON(e){return o.toObject(["options",this.options,"nested",arrayToJSON(this.nestedArray,e)])};Namespace.prototype.addJSON=function addJSON(e){var t=this;if(e){for(var r=Object.keys(e),n=0,s;n<r.length;++n){s=e[r[n]];t.add((s.fields!==undefined?a.fromJSON:s.values!==undefined?c.fromJSON:s.methods!==undefined?l.fromJSON:s.id!==undefined?i.fromJSON:Namespace.fromJSON)(r[n],s))}}return this};Namespace.prototype.get=function get(e){return this.nested&&this.nested[e]||null};Namespace.prototype.getEnum=function getEnum(e){if(this.nested&&this.nested[e]instanceof c)return this.nested[e].values;throw Error("no such enum: "+e)};Namespace.prototype.add=function add(e){if(!(e instanceof i&&e.extend!==undefined||e instanceof a||e instanceof c||e instanceof l||e instanceof Namespace||e instanceof s))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t){if(t instanceof Namespace&&e instanceof Namespace&&!(t instanceof a||t instanceof l)){var r=t.nestedArray;for(var n=0;n<r.length;++n)e.add(r[n]);this.remove(t);if(!this.nested)this.nested={};e.setOptions(t.options,true)}else throw Error("duplicate name '"+e.name+"' in "+this)}}this.nested[e.name]=e;e.onAdd(this);return clearCache(this)};Namespace.prototype.remove=function remove(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);delete this.nested[e.name];if(!Object.keys(this.nested).length)this.nested=undefined;e.onRemove(this);return clearCache(this)};Namespace.prototype.define=function define(e,t){if(o.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");var r=this;while(e.length>0){var n=e.shift();if(r.nested&&r.nested[n]){r=r.nested[n];if(!(r instanceof Namespace))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Namespace(n))}if(t)r.addJSON(t);return r};Namespace.prototype.resolveAll=function resolveAll(){var e=this.nestedArray,t=0;while(t<e.length)if(e[t]instanceof Namespace)e[t++].resolveAll();else e[t++].resolve();return this.resolve()};Namespace.prototype.lookup=function lookup(e,t,r){if(typeof t==="boolean"){r=t;t=undefined}else if(t&&!Array.isArray(t))t=[t];if(o.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(e.length===1){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof Namespace&&(n=n.lookup(e.slice(1),t,true)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof Namespace&&(n=this._nestedArray[i].lookup(e,t,true)))return n;if(this.parent===null||r)return null;return this.parent.lookup(e,t)};Namespace.prototype.lookupType=function lookupType(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t};Namespace.prototype.lookupEnum=function lookupEnum(e){var t=this.lookup(e,[c]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupTypeOrEnum=function lookupTypeOrEnum(e){var t=this.lookup(e,[a,c]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupService=function lookupService(e){var t=this.lookup(e,[l]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Namespace._configure=function(e,t,r){a=e;l=t;c=r}},5232:(e,t,r)=>{"use strict";e.exports=ReflectionObject;ReflectionObject.className="ReflectionObject";var n=r(5041);var i;function ReflectionObject(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t;this.parsedOptions=null;this.name=e;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(ReflectionObject.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});ReflectionObject.prototype.toJSON=function toJSON(){throw Error()};ReflectionObject.prototype.onAdd=function onAdd(e){if(this.parent&&this.parent!==e)this.parent.remove(this);this.parent=e;this.resolved=false;var t=e.root;if(t instanceof i)t._handleAdd(this)};ReflectionObject.prototype.onRemove=function onRemove(e){var t=e.root;if(t instanceof i)t._handleRemove(this);this.parent=null;this.resolved=false};ReflectionObject.prototype.resolve=function resolve(){if(this.resolved)return this;if(this.root instanceof i)this.resolved=true;return this};ReflectionObject.prototype.getOption=function getOption(e){if(this.options)return this.options[e];return undefined};ReflectionObject.prototype.setOption=function setOption(e,t,r){if(!r||!this.options||this.options[e]===undefined)(this.options||(this.options={}))[e]=t;return this};ReflectionObject.prototype.setParsedOption=function setParsedOption(e,t,r){if(!this.parsedOptions){this.parsedOptions=[]}var i=this.parsedOptions;if(r){var s=i.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];n.setProperty(o,r,t)}else{s={};s[e]=n.setProperty({},r,t);i.push(s)}}else{var a={};a[e]=t;i.push(a)}return this};ReflectionObject.prototype.setOptions=function setOptions(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this};ReflectionObject.prototype.toString=function toString(){var e=this.constructor.className,t=this.fullName;if(t.length)return e+" "+t;return e};ReflectionObject._configure=function(e){i=e}},4727:(e,t,r)=>{"use strict";e.exports=OneOf;var n=r(5232);((OneOf.prototype=Object.create(n.prototype)).constructor=OneOf).className="OneOf";var i=r(5082),s=r(5041);function OneOf(e,t,r,i){if(!Array.isArray(t)){r=t;t=undefined}n.call(this,e,r);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=i}OneOf.fromJSON=function fromJSON(e,t){return new OneOf(e,t.oneof,t.options,t.comment)};OneOf.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])};function addFieldsToParent(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}OneOf.prototype.add=function add(e){if(!(e instanceof i))throw TypeError("field must be a Field");if(e.parent&&e.parent!==this.parent)e.parent.remove(e);this.oneof.push(e.name);this.fieldsArray.push(e);e.partOf=this;addFieldsToParent(this);return this};OneOf.prototype.remove=function remove(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);this.fieldsArray.splice(t,1);t=this.oneof.indexOf(e.name);if(t>-1)this.oneof.splice(t,1);e.partOf=null;return this};OneOf.prototype.onAdd=function onAdd(e){n.prototype.onAdd.call(this,e);var t=this;for(var r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);if(i&&!i.partOf){i.partOf=t;t.fieldsArray.push(i)}}addFieldsToParent(this)};OneOf.prototype.onRemove=function onRemove(e){for(var t=0,r;t<this.fieldsArray.length;++t)if((r=this.fieldsArray[t]).parent)r.parent.remove(r);n.prototype.onRemove.call(this,e)};OneOf.d=function decorateOneOf(){var e=new Array(arguments.length),t=0;while(t<arguments.length)e[t]=arguments[t++];return function oneOfDecorator(t,r){s.decorateType(t.constructor).add(new OneOf(r,e));Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},2267:(e,t,r)=>{"use strict";e.exports=parse;parse.filename=null;parse.defaults={keepCase:false};var n=r(8406),i=r(1982),s=r(8741),o=r(5082),a=r(6036),l=r(4727),c=r(1759),u=r(9131),d=r(8981),f=r(992),h=r(5041);var p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(e,t,r){if(!(t instanceof i)){r=t;t=new i}if(!r)r=parse.defaults;var O=r.preferTrailingComment||false;var C=n(e,r.alternateCommentMode||false),R=C.next,A=C.push,w=C.peek,P=C.skip,N=C.cmnt;var I=true,M,k,D,x,L=false;var j=t;var B=r.keepCase?function(e){return e}:h.camelCase;function illegal(e,t,r){var n=parse.filename;if(!r)parse.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+C.line+")")}function readString(){var e=[],t;do{if((t=R())!=='"'&&t!=="'")throw illegal(t);e.push(R());P(t);t=w()}while(t==='"'||t==="'");return e.join("")}function readValue(e){var t=R();switch(t){case"'":case'"':A(t);return readString();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return parseNumber(t,true)}catch(r){if(e&&T.test(t))return t;throw illegal(t,"value")}}function readRanges(e,t){var r,n;do{if(t&&((r=w())==='"'||r==="'"))e.push(readString());else e.push([n=parseId(R()),P("to",true)?parseId(R()):n])}while(P(",",true));P(";")}function parseNumber(e,t){var r=1;if(e.charAt(0)==="-"){r=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return r*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw illegal(e,"number",t)}function parseId(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw illegal(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw illegal(e,"id")}function parsePackage(){if(M!==undefined)throw illegal("package");M=R();if(!T.test(M))throw illegal(M,"name");j=j.define(M);P(";")}function parseImport(){var e=w();var t;switch(e){case"weak":t=D||(D=[]);R();break;case"public":R();default:t=k||(k=[]);break}e=readString();P(";");t.push(e)}function parseSyntax(){P("=");x=readString();L=x==="proto3";if(!L&&x!=="proto2")throw illegal(x,"syntax");P(";")}function parseCommon(e,t){switch(t){case"option":parseOption(e,t);P(";");return true;case"message":parseType(e,t);return true;case"enum":parseEnum(e,t);return true;case"service":parseService(e,t);return true;case"extend":parseExtension(e,t);return true}return false}function ifBlock(e,t,r){var n=C.line;if(e){if(typeof e.comment!=="string"){e.comment=N()}e.filename=parse.filename}if(P("{",true)){var i;while((i=R())!=="}")t(i);P(";",true)}else{if(r)r();P(";");if(e&&(typeof e.comment!=="string"||O))e.comment=N(n)||e.comment}}function parseType(e,t){if(!_.test(t=R()))throw illegal(t,"type name");var r=new s(t);ifBlock(r,(function parseType_block(e){if(parseCommon(r,e))return;switch(e){case"map":parseMapField(r,e);break;case"required":case"repeated":parseField(r,e);break;case"optional":if(L){parseField(r,"proto3_optional")}else{parseField(r,"optional")}break;case"oneof":parseOneOf(r,e);break;case"extensions":readRanges(r.extensions||(r.extensions=[]));break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:if(!L||!T.test(e))throw illegal(e);A(e);parseField(r,"optional");break}}));e.add(r)}function parseField(e,t,r){var n=R();if(n==="group"){parseGroup(e,t);return}if(!T.test(n))throw illegal(n,"type");var i=R();if(!_.test(i))throw illegal(i,"name");i=B(i);P("=");var s=new o(i,parseId(R()),n,t,r);ifBlock(s,(function parseField_block(e){if(e==="option"){parseOption(s,e);P(";")}else throw illegal(e)}),(function parseField_line(){parseInlineOptions(s)}));if(t==="proto3_optional"){var a=new l("_"+i);s.setOption("proto3_optional",true);a.add(s);e.add(a)}else{e.add(s)}if(!L&&s.repeated&&(f.packed[n]!==undefined||f.basic[n]===undefined))s.setOption("packed",false,true)}function parseGroup(e,t){var r=R();if(!_.test(r))throw illegal(r,"name");var n=h.lcFirst(r);if(r===n)r=h.ucFirst(r);P("=");var i=parseId(R());var a=new s(r);a.group=true;var l=new o(n,i,r,t);l.filename=parse.filename;ifBlock(a,(function parseGroup_block(e){switch(e){case"option":parseOption(a,e);P(";");break;case"required":case"repeated":parseField(a,e);break;case"optional":if(L){parseField(a,"proto3_optional")}else{parseField(a,"optional")}break;default:throw illegal(e)}}));e.add(a).add(l)}function parseMapField(e){P("<");var t=R();if(f.mapKey[t]===undefined)throw illegal(t,"type");P(",");var r=R();if(!T.test(r))throw illegal(r,"type");P(">");var n=R();if(!_.test(n))throw illegal(n,"name");P("=");var i=new a(B(n),parseId(R()),t,r);ifBlock(i,(function parseMapField_block(e){if(e==="option"){parseOption(i,e);P(";")}else throw illegal(e)}),(function parseMapField_line(){parseInlineOptions(i)}));e.add(i)}function parseOneOf(e,t){if(!_.test(t=R()))throw illegal(t,"name");var r=new l(B(t));ifBlock(r,(function parseOneOf_block(e){if(e==="option"){parseOption(r,e);P(";")}else{A(e);parseField(r,"optional")}}));e.add(r)}function parseEnum(e,t){if(!_.test(t=R()))throw illegal(t,"name");var r=new c(t);ifBlock(r,(function parseEnum_block(e){switch(e){case"option":parseOption(r,e);P(";");break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:parseEnumValue(r,e)}}));e.add(r)}function parseEnumValue(e,t){if(!_.test(t))throw illegal(t,"name");P("=");var r=parseId(R(),true),n={};ifBlock(n,(function parseEnumValue_block(e){if(e==="option"){parseOption(n,e);P(";")}else throw illegal(e)}),(function parseEnumValue_line(){parseInlineOptions(n)}));e.add(t,r,n.comment)}function parseOption(e,t){var r=P("(",true);if(!T.test(t=R()))throw illegal(t,"name");var n=t;var i=n;var s;if(r){P(")");n="("+n+")";i=n;t=w();if(E.test(t)){s=t.substr(1);n+=t;R()}}P("=");var o=parseOptionValue(e,n);setParsedOption(e,i,o,s)}function parseOptionValue(e,t){if(P("{",true)){var r={};while(!P("}",true)){if(!_.test(F=R()))throw illegal(F,"name");var n;var i=F;if(w()==="{")n=parseOptionValue(e,t+"."+F);else{P(":");if(w()==="{")n=parseOptionValue(e,t+"."+F);else{n=readValue(true);setOption(e,t+"."+F,n)}}var s=r[i];if(s)n=[].concat(s).concat(n);r[i]=n;P(",",true)}return r}var o=readValue(true);setOption(e,t,o);return o}function setOption(e,t,r){if(e.setOption)e.setOption(t,r)}function setParsedOption(e,t,r,n){if(e.setParsedOption)e.setParsedOption(t,r,n)}function parseInlineOptions(e){if(P("[",true)){do{parseOption(e,"option")}while(P(",",true));P("]")}return e}function parseService(e,t){if(!_.test(t=R()))throw illegal(t,"service name");var r=new u(t);ifBlock(r,(function parseService_block(e){if(parseCommon(r,e))return;if(e==="rpc")parseMethod(r,e);else throw illegal(e)}));e.add(r)}function parseMethod(e,t){var r=N();var n=t;if(!_.test(t=R()))throw illegal(t,"name");var i=t,s,o,a,l;P("(");if(P("stream",true))o=true;if(!T.test(t=R()))throw illegal(t);s=t;P(")");P("returns");P("(");if(P("stream",true))l=true;if(!T.test(t=R()))throw illegal(t);a=t;P(")");var c=new d(i,n,s,a,o,l);c.comment=r;ifBlock(c,(function parseMethod_block(e){if(e==="option"){parseOption(c,e);P(";")}else throw illegal(e)}));e.add(c)}function parseExtension(e,t){if(!T.test(t=R()))throw illegal(t,"reference");var r=t;ifBlock(null,(function parseExtension_block(t){switch(t){case"required":case"repeated":parseField(e,t,r);break;case"optional":if(L){parseField(e,"proto3_optional",r)}else{parseField(e,"optional",r)}break;default:if(!L||!T.test(t))throw illegal(t);A(t);parseField(e,"optional",r);break}}))}var F;while((F=R())!==null){switch(F){case"package":if(!I)throw illegal(F);parsePackage();break;case"import":if(!I)throw illegal(F);parseImport();break;case"syntax":if(!I)throw illegal(F);parseSyntax();break;case"option":parseOption(j,F);P(";");break;default:if(parseCommon(j,F)){I=false;continue}throw illegal(F)}}parse.filename=null;return{package:M,imports:k,weakImports:D,syntax:x,root:t}}},151:(e,t,r)=>{"use strict";e.exports=Reader;var n=r(8181);var i;var s=n.LongBits,o=n.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var a=typeof Uint8Array!=="undefined"?function create_typed_array(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function create_array(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};var l=function create(){return n.Buffer?function create_buffer_setup(e){return(Reader.create=function create_buffer(e){return n.Buffer.isBuffer(e)?new i(e):a(e)})(e)}:a};Reader.create=l();Reader.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var e=4294967295;return function read_uint32(){e=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return e}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new s(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=n.float.readFloatLE(this.buf,this.pos);this.pos+=4;return e};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return e};Reader.prototype.bytes=function read_bytes(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);this.pos+=e;if(Array.isArray(this.buf))return this.buf.slice(t,r);return t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)};Reader.prototype.string=function read_string(){var e=this.bytes();return o.read(e,0,e.length)};Reader.prototype.skip=function skip(e){if(typeof e==="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){i=e;Reader.create=l();i._configure();var t=n.Long?"toLong":"toNumber";n.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[t](false)},uint64:function read_uint64(){return readLongVarint.call(this)[t](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[t](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[t](false)}})}},9403:(e,t,r)=>{"use strict";e.exports=BufferReader;var n=r(151);(BufferReader.prototype=Object.create(n.prototype)).constructor=BufferReader;var i=r(8181);function BufferReader(e){n.call(this,e)}BufferReader._configure=function(){if(i.Buffer)BufferReader.prototype._slice=i.Buffer.prototype.slice};BufferReader.prototype.string=function read_string_buffer(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure()},1982:(e,t,r)=>{"use strict";e.exports=Root;var n=r(8873);((Root.prototype=Object.create(n.prototype)).constructor=Root).className="Root";var i=r(5082),s=r(1759),o=r(4727),a=r(5041);var l,c,u;function Root(e){n.call(this,"",e);this.deferred=[];this.files=[]}Root.fromJSON=function fromJSON(e,t){if(!t)t=new Root;if(e.options)t.setOptions(e.options);return t.addJSON(e.nested)};Root.prototype.resolvePath=a.path.resolve;Root.prototype.fetch=a.fetch;function SYNC(){}Root.prototype.load=function load(e,t,r){if(typeof t==="function"){r=t;t=undefined}var n=this;if(!r)return a.asPromise(load,n,e,t);var i=r===SYNC;function finish(e,t){if(!r)return;var n=r;r=null;if(i)throw e;n(e,t)}function getBundledFileName(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in u)return r}return null}function process(e,r){try{if(a.isString(r)&&r.charAt(0)==="{")r=JSON.parse(r);if(!a.isString(r))n.setOptions(r.options).addJSON(r.nested);else{c.filename=e;var o=c(r,n,t),l,u=0;if(o.imports)for(;u<o.imports.length;++u)if(l=getBundledFileName(o.imports[u])||n.resolvePath(e,o.imports[u]))fetch(l);if(o.weakImports)for(u=0;u<o.weakImports.length;++u)if(l=getBundledFileName(o.weakImports[u])||n.resolvePath(e,o.weakImports[u]))fetch(l,true)}}catch(e){finish(e)}if(!i&&!s)finish(null,n)}function fetch(e,t){if(n.files.indexOf(e)>-1)return;n.files.push(e);if(e in u){if(i)process(e,u[e]);else{++s;setTimeout((function(){--s;process(e,u[e])}))}return}if(i){var o;try{o=a.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)finish(e);return}process(e,o)}else{++s;n.fetch(e,(function(i,o){--s;if(!r)return;if(i){if(!t)finish(i);else if(!s)finish(null,n);return}process(e,o)}))}}var s=0;if(a.isString(e))e=[e];for(var o=0,l;o<e.length;++o)if(l=n.resolvePath("",e[o]))fetch(l);if(i)return n;if(!s)finish(null,n);return undefined};Root.prototype.loadSync=function loadSync(e,t){if(!a.isNode)throw Error("not supported");return this.load(e,t,SYNC)};Root.prototype.resolveAll=function resolveAll(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var d=/^[A-Z]/;function tryHandleExtension(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new i(t.fullName,t.id,t.type,t.rule,undefined,t.options);n.declaringField=t;t.extensionField=n;r.add(n);return true}return false}Root.prototype._handleAdd=function _handleAdd(e){if(e instanceof i){if(e.extend!==undefined&&!e.extensionField)if(!tryHandleExtension(this,e))this.deferred.push(e)}else if(e instanceof s){if(d.test(e.name))e.parent[e.name]=e.values}else if(!(e instanceof o)){if(e instanceof l)for(var t=0;t<this.deferred.length;)if(tryHandleExtension(this,this.deferred[t]))this.deferred.splice(t,1);else++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);if(d.test(e.name))e.parent[e.name]=e}};Root.prototype._handleRemove=function _handleRemove(e){if(e instanceof i){if(e.extend!==undefined){if(e.extensionField){e.extensionField.parent.remove(e.extensionField);e.extensionField=null}else{var t=this.deferred.indexOf(e);if(t>-1)this.deferred.splice(t,1)}}}else if(e instanceof s){if(d.test(e.name))delete e.parent[e.name]}else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);if(d.test(e.name))delete e.parent[e.name]}};Root._configure=function(e,t,r){l=e;c=t;u=r}},4702:e=>{"use strict";e.exports={}},9034:(e,t,r)=>{"use strict";var n=t;n.Service=r(4310)},4310:(e,t,r)=>{"use strict";e.exports=Service;var n=r(8181);(Service.prototype=Object.create(n.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function rpcCall(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(rpcCall,o,e,t,r,i);if(!o.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function rpcCallback(t,n){if(t){o.emit("error",t,e);return s(t)}if(n===null){o.end(true);return undefined}if(!(n instanceof r)){try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){o.emit("error",t,e);return s(t)}}o.emit("data",n,e);return s(null,n)}))}catch(t){o.emit("error",t,e);setTimeout((function(){s(t)}),0);return undefined}};Service.prototype.end=function end(e){if(this.rpcImpl){if(!e)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},9131:(e,t,r)=>{"use strict";e.exports=Service;var n=r(8873);((Service.prototype=Object.create(n.prototype)).constructor=Service).className="Service";var i=r(8981),s=r(5041),o=r(9034);function Service(e,t){n.call(this,e,t);this.methods={};this._methodsArray=null}Service.fromJSON=function fromJSON(e,t){var r=new Service(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));if(t.nested)r.addJSON(t.nested);r.comment=t.comment;return r};Service.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return s.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Object.defineProperty(Service.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function clearCache(e){e._methodsArray=null;return e}Service.prototype.get=function get(e){return this.methods[e]||n.prototype.get.call(this,e)};Service.prototype.resolveAll=function resolveAll(){var e=this.methodsArray;for(var t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)};Service.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i){this.methods[e.name]=e;e.parent=this;return clearCache(this)}return n.prototype.add.call(this,e)};Service.prototype.remove=function remove(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.methods[e.name];e.parent=null;return clearCache(this)}return n.prototype.remove.call(this,e)};Service.prototype.create=function create(e,t,r){var n=new o.Service(e,t,r);for(var i=0,a;i<this.methodsArray.length;++i){var l=s.lcFirst((a=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");n[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:a,q:a.resolvedRequestType.ctor,s:a.resolvedResponseType.ctor})}return n}},8406:e=>{"use strict";e.exports=tokenize;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,l=/\\(.?)/g;var c={0:"\0",r:"\r",n:"\n",t:"\t"};function unescape(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}}))}tokenize.unescape=unescape;function tokenize(e,l){e=e.toString();var c=0,u=e.length,d=1,f=null,h=null,p=0,m=false,g=false;var y=[];var v=null;function illegal(e){return Error("illegal "+e+" (line "+d+")")}function readString(){var t=v==="'"?n:r;t.lastIndex=c-1;var i=t.exec(e);if(!i)throw illegal("string");c=t.lastIndex;push(v);v=null;return unescape(i[1])}function charAt(t){return e.charAt(t)}function setComment(t,r,n){f=e.charAt(t++);p=d;m=false;g=n;var a;if(l){a=2}else{a=3}var c=t-a,u;do{if(--c<0||(u=e.charAt(c))==="\n"){m=true;break}}while(u===" "||u==="\t");var y=e.substring(t,r).split(o);for(var v=0;v<y.length;++v)y[v]=y[v].replace(l?s:i,"").trim();h=y.join("\n").trim()}function isDoubleSlashCommentLine(t){var r=findEndOfLine(t);var n=e.substring(t,r);var i=/^\s*\/{1,2}/.test(n);return i}function findEndOfLine(e){var t=e;while(t<u&&charAt(t)!=="\n"){t++}return t}function next(){if(y.length>0)return y.shift();if(v)return readString();var r,n,i,s,o,f=c===0;do{if(c===u)return null;r=false;while(a.test(i=charAt(c))){if(i==="\n"){f=true;++d}if(++c===u)return null}if(charAt(c)==="/"){if(++c===u){throw illegal("comment")}if(charAt(c)==="/"){if(!l){o=charAt(s=c+1)==="/";while(charAt(++c)!=="\n"){if(c===u){return null}}++c;if(o){setComment(s,c-1,f)}++d;r=true}else{s=c;o=false;if(isDoubleSlashCommentLine(c)){o=true;do{c=findEndOfLine(c);if(c===u){break}c++}while(isDoubleSlashCommentLine(c))}else{c=Math.min(u,findEndOfLine(c)+1)}if(o){setComment(s,c,f)}d++;r=true}}else if((i=charAt(c))==="*"){s=c+1;o=l||charAt(s)==="*";do{if(i==="\n"){++d}if(++c===u){throw illegal("comment")}n=i;i=charAt(c)}while(n!=="*"||i!=="/");++c;if(o){setComment(s,c-2,f)}r=true}else{return"/"}}}while(r);var h=c;t.lastIndex=0;var p=t.test(charAt(h++));if(!p)while(h<u&&!t.test(charAt(h)))++h;var m=e.substring(c,c=h);if(m==='"'||m==="'")v=m;return m}function push(e){y.push(e)}function peek(){if(!y.length){var e=next();if(e===null)return null;push(e)}return y[0]}function skip(e,t){var r=peek(),n=r===e;if(n){next();return true}if(!t)throw illegal("token '"+r+"', '"+e+"' expected");return false}function cmnt(e){var t=null;if(e===undefined){if(p===d-1&&(l||f==="*"||m)){t=g?h:null}}else{if(p<e){peek()}if(p===e&&!m&&(l||f==="/")){t=g?null:h}}return t}return Object.defineProperty({next:next,peek:peek,push:push,skip:skip,cmnt:cmnt},"line",{get:function(){return d}})}},8741:(e,t,r)=>{"use strict";e.exports=Type;var n=r(8873);((Type.prototype=Object.create(n.prototype)).constructor=Type).className="Type";var i=r(1759),s=r(4727),o=r(5082),a=r(6036),l=r(9131),c=r(83),u=r(151),d=r(5802),f=r(5041),h=r(5895),p=r(4895),m=r(2572),g=r(8420),y=r(4593);function Type(e,t){n.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(Type.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Type.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof c)){(e.prototype=new c).constructor=e;f.merge(e.prototype,t)}e.$type=e.prototype.$type=this;f.merge(e,c,true);this._ctor=e;var r=0;for(;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:f.oneOfGetter(this._oneofsArray[r].oneof),set:f.oneOfSetter(this._oneofsArray[r].oneof)};if(r)Object.defineProperties(e.prototype,n)}}});Type.generateConstructor=function generateConstructor(e){var t=f.codegen(["p"],e.name);for(var r=0,n;r<e.fieldsArray.length;++r)if((n=e._fieldsArray[r]).map)t("this%s={}",f.safeProp(n.name));else if(n.repeated)t("this%s=[]",f.safeProp(n.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function clearCache(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}Type.fromJSON=function fromJSON(e,t){var r=new Type(e,t.options);r.extensions=t.extensions;r.reserved=t.reserved;var c=Object.keys(t.fields),u=0;for(;u<c.length;++u)r.add((typeof t.fields[c[u]].keyType!=="undefined"?a.fromJSON:o.fromJSON)(c[u],t.fields[c[u]]));if(t.oneofs)for(c=Object.keys(t.oneofs),u=0;u<c.length;++u)r.add(s.fromJSON(c[u],t.oneofs[c[u]]));if(t.nested)for(c=Object.keys(t.nested),u=0;u<c.length;++u){var d=t.nested[c[u]];r.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?Type.fromJSON:d.values!==undefined?i.fromJSON:d.methods!==undefined?l.fromJSON:n.fromJSON)(c[u],d))}if(t.extensions&&t.extensions.length)r.extensions=t.extensions;if(t.reserved&&t.reserved.length)r.reserved=t.reserved;if(t.group)r.group=true;if(t.comment)r.comment=t.comment;return r};Type.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return f.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Type.prototype.resolveAll=function resolveAll(){var e=this.fieldsArray,t=0;while(t<e.length)e[t++].resolve();var r=this.oneofsArray;t=0;while(t<r.length)r[t++].resolve();return n.prototype.resolveAll.call(this)};Type.prototype.get=function get(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Type.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);if(e.parent)e.parent.remove(e);this.fields[e.name]=e;e.message=this;e.onAdd(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[e.name]=e;e.onAdd(this);return clearCache(this)}return n.prototype.add.call(this,e)};Type.prototype.remove=function remove(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.fields[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.oneofs[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}return n.prototype.remove.call(this,e)};Type.prototype.isReservedId=function isReservedId(e){return n.isReservedId(this.reserved,e)};Type.prototype.isReservedName=function isReservedName(e){return n.isReservedName(this.reserved,e)};Type.prototype.create=function create(e){return new this.ctor(e)};Type.prototype.setup=function setup(){var e=this.fullName,t=[];for(var r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:f});this.decode=p(this)({Reader:u,types:t,util:f});this.verify=m(this)({types:t,util:f});this.fromObject=g.fromObject(this)({types:t,util:f});this.toObject=g.toObject(this)({types:t,util:f});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject;this.fromObject=n.fromObject.bind(i);i.toObject=this.toObject;this.toObject=n.toObject.bind(i)}return this};Type.prototype.encode=function encode_setup(e,t){return this.setup().encode(e,t)};Type.prototype.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};Type.prototype.decode=function decode_setup(e,t){return this.setup().decode(e,t)};Type.prototype.decodeDelimited=function decodeDelimited(e){if(!(e instanceof u))e=u.create(e);return this.decode(e,e.uint32())};Type.prototype.verify=function verify_setup(e){return this.setup().verify(e)};Type.prototype.fromObject=function fromObject(e){return this.setup().fromObject(e)};Type.prototype.toObject=function toObject(e,t){return this.setup().toObject(e,t)};Type.d=function decorateType(e){return function typeDecorator(t){f.decorateType(t,e)}}},992:(e,t,r)=>{"use strict";var n=t;var i=r(5041);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function bake(e,t){var r=0,n={};t|=0;while(r<e.length)n[s[r+t]]=e[r++];return n}n.basic=bake([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);n.defaults=bake([0,0,0,0,0,0,0,0,0,0,0,0,false,"",i.emptyArray,null]);n.long=bake([0,0,0,1,1],7);n.mapKey=bake([0,0,0,5,5,0,0,0,1,1,0,2],2);n.packed=bake([1,5,0,0,0,5,5,0,0,0,1,1,0])},5041:(e,t,r)=>{"use strict";var n=e.exports=r(8181);var i=r(4702);var s,o;n.codegen=r(9748);n.fetch=r(530);n.path=r(2770);n.fs=n.inquire("fs");n.toArray=function toArray(e){if(e){var t=Object.keys(e),r=new Array(t.length),n=0;while(n<t.length)r[n]=e[t[n++]];return r}return[]};n.toObject=function toObject(e){var t={},r=0;while(r<e.length){var n=e[r++],i=e[r++];if(i!==undefined)t[n]=i}return t};var a=/\\/g,l=/"/g;n.isReserved=function isReserved(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};n.safeProp=function safeProp(e){if(!/^[$\w_]+$/.test(e)||n.isReserved(e))return'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]';return"."+e};n.ucFirst=function ucFirst(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;n.camelCase=function camelCase(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))};n.compareFieldsById=function compareFieldsById(e,t){return e.id-t.id};n.decorateType=function decorateType(e,t){if(e.$type){if(t&&e.$type.name!==t){n.decorateRoot.remove(e.$type);e.$type.name=t;n.decorateRoot.add(e.$type)}return e.$type}if(!s)s=r(8741);var i=new s(t||e.name);n.decorateRoot.add(i);i.ctor=e;Object.defineProperty(e,"$type",{value:i,enumerable:false});Object.defineProperty(e.prototype,"$type",{value:i,enumerable:false});return i};var u=0;n.decorateEnum=function decorateEnum(e){if(e.$type)return e.$type;if(!o)o=r(1759);var t=new o("Enum"+u++,e);n.decorateRoot.add(t);Object.defineProperty(e,"$type",{value:t,enumerable:false});return t};n.setProperty=function setProperty(e,t,r){function setProp(e,t,r){var n=t.shift();if(n==="__proto__"){return e}if(t.length>0){e[n]=setProp(e[n]||{},t,r)}else{var i=e[n];if(i)r=[].concat(i).concat(r);e[n]=r}return e}if(typeof e!=="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");t=t.split(".");return setProp(e,t,r)};Object.defineProperty(n,"decorateRoot",{get:function(){return i["decorated"]||(i["decorated"]=new(r(1982)))}})},9481:(e,t,r)=>{"use strict";e.exports=LongBits;var n=r(8181);function LongBits(e,t){this.lo=e>>>0;this.hi=t>>>0}var i=LongBits.zero=new LongBits(0,0);i.toNumber=function(){return 0};i.zzEncode=i.zzDecode=function(){return this};i.length=function(){return 1};var s=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(e){if(e===0)return i;var t=e<0;if(t)e=-e;var r=e>>>0,n=(e-r)/4294967296>>>0;if(t){n=~n>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++n>4294967295)n=0}}return new LongBits(r,n)};LongBits.from=function from(e){if(typeof e==="number")return LongBits.fromNumber(e);if(n.isString(e)){if(n.Long)e=n.Long.fromString(e);else return LongBits.fromNumber(parseInt(e,10))}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):i};LongBits.prototype.toNumber=function toNumber(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;if(!t)r=r+1>>>0;return-(t+r*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(e){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(e){if(e===s)return i;return new LongBits((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var e=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0;this.lo=(this.lo<<1^e)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var e=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0;this.hi=(this.hi>>>1^e)>>>0;return this};LongBits.prototype.length=function length(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},8181:function(e,t,r){"use strict";var n=t;n.asPromise=r(6499);n.base64=r(4250);n.EventEmitter=r(400);n.float=r(3046);n.inquire=r(2830);n.utf8=r(5247);n.pool=r(9044);n.LongBits=r(9481);n.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);n.global=n.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;n.emptyArray=Object.freeze?Object.freeze([]):[];n.emptyObject=Object.freeze?Object.freeze({}):{};n.isInteger=Number.isInteger||function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};n.isString=function isString(e){return typeof e==="string"||e instanceof String};n.isObject=function isObject(e){return e&&typeof e==="object"};n.isset=n.isSet=function isSet(e,t){var r=e[t];if(r!=null&&e.hasOwnProperty(t))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();n._Buffer_from=null;n._Buffer_allocUnsafe=null;n.newBuffer=function newBuffer(e){return typeof e==="number"?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):typeof Uint8Array==="undefined"?e:new Uint8Array(e)};n.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long");n.key2Re=/^true|false|0|1$/;n.key32Re=/^-?(?:0|[1-9][0-9]*)$/;n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;n.longToHash=function longToHash(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash};n.longFromHash=function longFromHash(e,t){var r=n.LongBits.fromHash(e);if(n.Long)return n.Long.fromBits(r.lo,r.hi,t);return r.toNumber(Boolean(t))};function merge(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}n.merge=merge;n.lcFirst=function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)};function newError(e){function CustomError(e,t){if(!(this instanceof CustomError))return new CustomError(e,t);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(t)merge(this,t)}(CustomError.prototype=Object.create(Error.prototype)).constructor=CustomError;Object.defineProperty(CustomError.prototype,"name",{get:function(){return e}});CustomError.prototype.toString=function toString(){return this.name+": "+this.message};return CustomError}n.newError=newError;n.ProtocolError=newError("ProtocolError");n.oneOfGetter=function getOneOf(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(t[e[r]]===1&&this[e[r]]!==undefined&&this[e[r]]!==null)return e[r]}};n.oneOfSetter=function setOneOf(e){return function(t){for(var r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}};n.toJSONOptions={longs:String,enums:String,bytes:String,json:true};n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function Buffer_from(t,r){return new e(t,r)};n._Buffer_allocUnsafe=e.allocUnsafe||function Buffer_allocUnsafe(t){return new e(t)}}},2572:(e,t,r)=>{"use strict";e.exports=verifier;var n=r(1759),i=r(5041);function invalid(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function genVerifyValue(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",invalid(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),o=0;o<s.length;++o)e("case %i:",t.resolvedType.values[s[o]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",invalid(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",invalid(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",invalid(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",invalid(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",invalid(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",invalid(t,"buffer"));break}}return e}function genVerifyKey(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",invalid(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",invalid(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",invalid(t,"boolean key"));break}return e}function verifier(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var r=e.oneofsArray,n={};if(r.length)t("var p={}");for(var s=0;s<e.fieldsArray.length;++s){var o=e._fieldsArray[s].resolve(),a="m"+i.safeProp(o.name);if(o.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",a,o.name);if(o.map){t("if(!util.isObject(%s))",a)("return%j",invalid(o,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){");genVerifyKey(t,o,"k[i]");genVerifyValue(t,o,s,a+"[k[i]]")("}")}else if(o.repeated){t("if(!Array.isArray(%s))",a)("return%j",invalid(o,"array"))("for(var i=0;i<%s.length;++i){",a);genVerifyValue(t,o,s,a+"[i]")("}")}else{if(o.partOf){var l=i.safeProp(o.partOf.name);if(n[o.partOf.name]===1)t("if(p%s===1)",l)("return%j",o.partOf.name+": multiple values");n[o.partOf.name]=1;t("p%s=1",l)}genVerifyValue(t,o,s,a)}if(o.optional)t("}")}return t("return null")}},4593:(e,t,r)=>{"use strict";var n=t;var i=r(83);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1);var r=this.lookup(t);if(r){var n=e["@type"].charAt(0)==="."?e["@type"].substr(1):e["@type"];if(n.indexOf("/")===-1){n="/"+n}return this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/";var n="";var s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1);n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);if(o)e=o.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t);var l=e.$type.fullName[0]==="."?e.$type.fullName.substr(1):e.$type.fullName;if(n===""){n=r}s=n+l;a["@type"]=s;return a}return this.toObject(e,t)}}},5802:(e,t,r)=>{"use strict";e.exports=Writer;var n=r(8181);var i;var s=n.LongBits,o=n.base64,a=n.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var l=function create(){return n.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new i})()}:function create_array(){return new Writer}};Writer.create=l();Writer.alloc=function alloc(e){return new n.Array(e)};if(n.Array!==Array)Writer.alloc=n.pool(Writer.alloc,n.Array.prototype.subarray);Writer.prototype._push=function push(e,t,r){this.tail=this.tail.next=new Op(e,t,r);this.len+=t;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(e){this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len;return this};Writer.prototype.int32=function write_int32(e){return e<0?this._push(writeVarint64,10,s.fromNumber(e)):this.uint32(e)};Writer.prototype.sint32=function write_sint32(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function write_uint64(e){var t=s.from(e);return this._push(writeVarint64,t.length(),t)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(e){var t=s.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer.prototype.bool=function write_bool(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function write_fixed32(e){return this._push(writeFixed32,4,e>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(e){var t=s.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(e){return this._push(n.float.writeFloatLE,4,e)};Writer.prototype.double=function write_double(e){return this._push(n.float.writeDoubleLE,8,e)};var c=n.Array.prototype.set?function writeBytes_set(e,t,r){t.set(e,r)}:function writeBytes_for(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function write_bytes(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(n.isString(e)){var r=Writer.alloc(t=o.length(e));o.decode(e,r,0);e=r}return this.uint32(t)._push(c,t,e)};Writer.prototype.string=function write_string(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var e=this.head,t=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=e.next;this.tail=t;this.len+=r}return this};Writer.prototype.finish=function finish(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e){e.fn(e.val,t,r);r+=e.len;e=e.next}return t};Writer._configure=function(e){i=e;Writer.create=l();i._configure()}},1132:(e,t,r)=>{"use strict";e.exports=BufferWriter;var n=r(5802);(BufferWriter.prototype=Object.create(n.prototype)).constructor=BufferWriter;var i=r(8181);function BufferWriter(){n.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=i._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(e,t,r){t.set(e,r)}:function writeBytesBuffer_copy(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}};BufferWriter.prototype.bytes=function write_bytes_buffer(e){if(i.isString(e))e=i._Buffer_from(e,"base64");var t=e.length>>>0;this.uint32(t);if(t)this._push(BufferWriter.writeBytesBuffer,t,e);return this};function writeStringBuffer(e,t,r){if(e.length<40)i.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function write_string_buffer(e){var t=i.Buffer.byteLength(e);this.uint32(t);if(t)this._push(writeStringBuffer,t,e);return this};BufferWriter._configure()},9180:(e,t,r)=>{"use strict";var n=r(631);e.exports=t=n.descriptor=n.Root.fromJSON(r(2903)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,o=n.Enum,a=n.Type,l=n.Field,c=n.MapField,u=n.OneOf,d=n.Service,f=n.Method;s.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.FileDescriptorSet.decode(e);var r=new s;if(e.file){var n,i;for(var c=0,u;c<e.file.length;++c){i=r;if((n=e.file[c])["package"]&&n["package"].length)i=r.define(n["package"]);if(n.name&&n.name.length)r.files.push(i.filename=n.name);if(n.messageType)for(u=0;u<n.messageType.length;++u)i.add(a.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(o.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(d.fromDescriptor(n.service[u]));var f=fromDescriptorOptions(n.options,t.FileOptions);if(f){var h=Object.keys(f);for(u=0;u<h.length;++u)i.setOption(h[u],f[h[u]])}}}return r};s.prototype.toDescriptor=function toDescriptor(e){var r=t.FileDescriptorSet.create();Root_toDescriptorRecursive(this,r.file,e);return r};function Root_toDescriptorRecursive(e,r,n){var c=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});if(n)c.syntax=n;if(!(e instanceof s))c["package"]=e.fullName.substring(1);for(var u=0,f;u<e.nestedArray.length;++u)if((f=e._nestedArray[u])instanceof a)c.messageType.push(f.toDescriptor(n));else if(f instanceof o)c.enumType.push(f.toDescriptor());else if(f instanceof l)c.extension.push(f.toDescriptor(n));else if(f instanceof d)c.service.push(f.toDescriptor());else if(f instanceof i)Root_toDescriptorRecursive(f,r,n);c.options=toDescriptorOptions(e.options,t.FileOptions);if(c.messageType.length+c.enumType.length+c.extension.length+c.service.length)r.push(c)}var h=0;a.fromDescriptor=function fromDescriptor(e,r){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);var n=new a(e.name.length?e.name:"Type"+h++,fromDescriptorOptions(e.options,t.MessageOptions)),i;if(e.oneofDecl)for(i=0;i<e.oneofDecl.length;++i)n.add(u.fromDescriptor(e.oneofDecl[i]));if(e.field)for(i=0;i<e.field.length;++i){var s=l.fromDescriptor(e.field[i],r);n.add(s);if(e.field[i].hasOwnProperty("oneofIndex"))n.oneofsArray[e.field[i].oneofIndex].add(s)}if(e.extension)for(i=0;i<e.extension.length;++i)n.add(l.fromDescriptor(e.extension[i],r));if(e.nestedType)for(i=0;i<e.nestedType.length;++i){n.add(a.fromDescriptor(e.nestedType[i],r));if(e.nestedType[i].options&&e.nestedType[i].options.mapEntry)n.setOption("map_entry",true)}if(e.enumType)for(i=0;i<e.enumType.length;++i)n.add(o.fromDescriptor(e.enumType[i]));if(e.extensionRange&&e.extensionRange.length){n.extensions=[];for(i=0;i<e.extensionRange.length;++i)n.extensions.push([e.extensionRange[i].start,e.extensionRange[i].end])}if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){n.reserved=[];if(e.reservedRange)for(i=0;i<e.reservedRange.length;++i)n.reserved.push([e.reservedRange[i].start,e.reservedRange[i].end]);if(e.reservedName)for(i=0;i<e.reservedName.length;++i)n.reserved.push(e.reservedName[i])}return n};a.prototype.toDescriptor=function toDescriptor(e){var r=t.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var i;r.field.push(i=this._fieldsArray[n].toDescriptor(e));if(this._fieldsArray[n]instanceof c){var s=toDescriptorType(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),u=toDescriptorType(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),d=u===11||u===14?this._fieldsArray[n].resolvedType&&shortname(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:undefined;r.nestedType.push(t.DescriptorProto.create({name:i.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:u,typeName:d})],options:t.MessageOptions.create({mapEntry:true})}))}}for(n=0;n<this.oneofsArray.length;++n)r.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n){if(this._nestedArray[n]instanceof l)r.field.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof a)r.nestedType.push(this._nestedArray[n].toDescriptor(e));else if(this._nestedArray[n]instanceof o)r.enumType.push(this._nestedArray[n].toDescriptor())}if(this.extensions)for(n=0;n<this.extensions.length;++n)r.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)if(typeof this.reserved[n]==="string")r.reservedName.push(this.reserved[n]);else r.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));r.options=toDescriptorOptions(this.options,t.MessageOptions);return r};var p=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function fromDescriptor(e,r){if(typeof e.length==="number")e=t.DescriptorProto.decode(e);if(typeof e.number!=="number")throw Error("missing field id");var n;if(e.typeName&&e.typeName.length)n=e.typeName;else n=fromDescriptorType(e.type);var i;switch(e.label){case 1:i=undefined;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var s=e.extendee;if(e.extendee!==undefined){s=s.length?s:undefined}var o=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);o.options=fromDescriptorOptions(e.options,t.FieldOptions);if(e.defaultValue&&e.defaultValue.length){var a=e.defaultValue;switch(a){case"true":case"TRUE":a=true;break;case"false":case"FALSE":a=false;break;default:var c=p.exec(a);if(c)a=parseInt(a);break}o.setOption("default",a)}if(packableDescriptorType(e.type)){if(r==="proto3"){if(e.options&&!e.options.packed)o.setOption("packed",false)}else if(!(e.options&&e.options.packed))o.setOption("packed",false)}return o};l.prototype.toDescriptor=function toDescriptor(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map){r.type=11;r.typeName=n.util.ucFirst(this.name);r.label=3}else{switch(r.type=toDescriptorType(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?shortname(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1;break}}r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend;if(this.partOf)if((r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");if(this.options){r.options=toDescriptorOptions(this.options,t.FieldOptions);if(this.options["default"]!=null)r.defaultValue=String(this.options["default"])}if(e==="proto3"){if(!this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=false}else if(this.packed)(r.options||(r.options=t.FieldOptions.create())).packed=true;return r};var m=0;o.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.EnumDescriptorProto.decode(e);var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new o(e.name&&e.name.length?e.name:"Enum"+m++,r,fromDescriptorOptions(e.options,t.EnumOptions))};o.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:toDescriptorOptions(this.options,t.EnumOptions)})};var g=0;u.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.OneofDescriptorProto.decode(e);return new u(e.name&&e.name.length?e.name:"oneof"+g++)};u.prototype.toDescriptor=function toDescriptor(){return t.OneofDescriptorProto.create({name:this.name})};var y=0;d.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.ServiceDescriptorProto.decode(e);var r=new d(e.name&&e.name.length?e.name:"Service"+y++,fromDescriptorOptions(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(f.fromDescriptor(e.method[n]));return r};d.prototype.toDescriptor=function toDescriptor(){var e=[];for(var r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:toDescriptorOptions(this.options,t.ServiceOptions)})};var v=0;f.fromDescriptor=function fromDescriptor(e){if(typeof e.length==="number")e=t.MethodDescriptorProto.decode(e);return new f(e.name&&e.name.length?e.name:"Method"+v++,"rpc",e.inputType,e.outputType,Boolean(e.clientStreaming),Boolean(e.serverStreaming),fromDescriptorOptions(e.options,t.MethodOptions))};f.prototype.toDescriptor=function toDescriptor(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:toDescriptorOptions(this.options,t.MethodOptions)})};function fromDescriptorType(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function packableDescriptorType(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return true}return false}function toDescriptorType(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof o)return 14;if(t instanceof a)return t.group?10:11;throw Error("illegal type: "+e)}function fromDescriptorOptions(e,t){if(!e)return undefined;var r=[];for(var i=0,s,a,l;i<t.fieldsArray.length;++i)if((a=(s=t._fieldsArray[i]).name)!=="uninterpretedOption")if(e.hasOwnProperty(a)){l=e[a];if(s.resolvedType instanceof o&&typeof l==="number"&&s.resolvedType.valuesById[l]!==undefined)l=s.resolvedType.valuesById[l];r.push(underScore(a),l)}return r.length?n.util.toObject(r):undefined}function toDescriptorOptions(e,t){if(!e)return undefined;var r=[];for(var i=0,s=Object.keys(e),o,a;i<s.length;++i){a=e[o=s[i]];if(o==="default")continue;var l=t.fields[o];if(!l&&!(l=t.fields[o=n.util.camelCase(o)]))continue;r.push(o,a)}return r.length?t.fromObject(n.util.toObject(r)):undefined}function shortname(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),o=0,a=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)while(o<r.length&&a<l&&r[o]===n[a]){var c=t.lookup(r[o++],true);if(c!==null&&c!==t)break;++a}else for(;o<r.length&&a<l&&r[o]===n[a];++o,++a);return n.slice(a).join(".")}function underScore(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,(function(e,t){return"_"+t.toLowerCase()}))}},631:(e,t,r)=>{"use strict";e.exports=r(9947)},6626:e=>{"use strict";e.exports=common;var t=/\/|\./;function common(e,r){if(!t.test(e)){e="google/protobuf/"+e+".proto";r={nested:{google:{nested:{protobuf:{nested:r}}}}}}common[e]=r}common("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var r;common("duration",{Duration:r={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});common("timestamp",{Timestamp:r});common("empty",{Empty:{fields:{}}});common("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});common("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});common("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});common.get=function get(e){return common[e]||null}},1400:(e,t,r)=>{"use strict";var n=t;var i=r(4722),s=r(1028);function genValuePartial_fromObject(e,t,r,n){var s=false;if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var o=t.resolvedType.values,a=Object.keys(o),l=0;l<a.length;++l){if(o[a[l]]===t.typeDefault&&!s){e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n);if(!t.repeated)e("break");s=true}e("case%j:",a[l])("case %i:",o[a[l]])("m%s=%j",n,o[a[l]])("break")}e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n)}else{var c=false;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":c=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,c)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,c?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n);break}}return e}n.fromObject=function fromObject(e){var t=e.fieldsArray;var r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),a=s.safeProp(o.name);if(o.map){r("if(d%s){",a)('if(typeof d%s!=="object")',a)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",a)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[ks[i]]")("}")("}")}else if(o.repeated){r("if(d%s){",a)("if(!Array.isArray(d%s))",a)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",a)("for(var i=0;i<d%s.length;++i){",a);genValuePartial_fromObject(r,o,n,a+"[i]")("}")("}")}else{if(!(o.resolvedType instanceof i))r("if(d%s!=null){",a);genValuePartial_fromObject(r,o,n,a);if(!(o.resolvedType instanceof i))r("}")}}return r("return m")};function genValuePartial_toObject(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i)e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n);else e("d%s=types[%i].toObject(m%s,o)",n,r,n)}else{var s=false;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=true;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n);break}}return e}n.toObject=function toObject(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}");var n=[],o=[],a=[],l=0;for(;l<t.length;++l)if(!t[l].partOf)(t[l].resolve().repeated?n:t[l].map?o:a).push(t[l]);if(n.length){r("if(o.arrays||o.defaults){");for(l=0;l<n.length;++l)r("d%s=[]",s.safeProp(n[l].name));r("}")}if(o.length){r("if(o.objects||o.defaults){");for(l=0;l<o.length;++l)r("d%s={}",s.safeProp(o[l].name));r("}")}if(a.length){r("if(o.defaults){");for(l=0;l<a.length;++l){var c=a[l],u=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",u,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",u)("}else")("d%s=o.longs===String?%j:%i",u,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var d="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",u,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",u,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",u,u)("}")}else r("d%s=%j",u,c.typeDefault)}r("}")}var f=false;for(l=0;l<t.length;++l){var c=t[l],h=e._fieldsArray.indexOf(c),u=s.safeProp(c.name);if(c.map){if(!f){f=true;r("var ks2")}r("if(m%s&&(ks2=Object.keys(m%s)).length){",u,u)("d%s={}",u)("for(var j=0;j<ks2.length;++j){");genValuePartial_toObject(r,c,h,u+"[ks2[j]]")("}")}else if(c.repeated){r("if(m%s&&m%s.length){",u,u)("d%s=[]",u)("for(var j=0;j<m%s.length;++j){",u);genValuePartial_toObject(r,c,h,u+"[j]")("}")}else{r("if(m%s!=null&&m.hasOwnProperty(%j)){",u,c.name);genValuePartial_toObject(r,c,h,u);if(c.partOf)r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)}r("}")}return r("return d")}},4227:(e,t,r)=>{"use strict";e.exports=decoder;var n=r(4722),i=r(4913),s=r(1028);function missing(e){return"missing required '"+e.name+"'"}function decoder(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter((function(e){return e.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");if(e.group)t("if((t&7)===4)")("break");t("switch(t>>>3){");var r=0;for(;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),a=o.resolvedType instanceof n?"int32":o.type,l="m"+s.safeProp(o.name);t("case %i: {",o.id);if(o.map){t("if(%s===util.emptyObject)",l)("%s={}",l)("var c2 = r.uint32()+r.pos");if(i.defaults[o.keyType]!==undefined)t("k=%j",i.defaults[o.keyType]);else t("k=null");if(i.defaults[a]!==undefined)t("value=%j",i.defaults[a]);else t("value=null");t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:");if(i.basic[a]===undefined)t("value=types[%i].decode(r,r.uint32())",r);else t("value=r.%s()",a);t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}");if(i.long[o.keyType]!==undefined)t('%s[typeof k==="object"?util.longToHash(k):k]=value',l);else t("%s[k]=value",l)}else if(o.repeated){t("if(!(%s&&%s.length))",l,l)("%s=[]",l);if(i.packed[a]!==undefined)t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",l,a)("}else");if(i.basic[a]===undefined)t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",l,r);else t("%s.push(r.%s())",l,a)}else if(i.basic[a]===undefined)t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",l,r);else t("%s=r.%s()",l,a);t("break")("}")}t("default:")("r.skipType(t&7)")("break")("}")("}");for(r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];if(c.required)t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",missing(c))}return t("return m")}},1675:(e,t,r)=>{"use strict";e.exports=encoder;var n=r(4722),i=r(4913),s=r(1028);function genTypePartial(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function encoder(e){var t=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()");var r,o;var a=e.fieldsArray.slice().sort(s.compareFieldsById);for(var r=0;r<a.length;++r){var l=a[r].resolve(),c=e._fieldsArray.indexOf(l),u=l.resolvedType instanceof n?"int32":l.type,d=i.basic[u];o="m"+s.safeProp(l.name);if(l.map){t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",o,l.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",o)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(l.id<<3|2)>>>0,8|i.mapKey[l.keyType],l.keyType);if(d===undefined)t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,o);else t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,u,o);t("}")("}")}else if(l.repeated){t("if(%s!=null&&%s.length){",o,o);if(l.packed&&i.packed[u]!==undefined){t("w.uint32(%i).fork()",(l.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",o)("w.%s(%s[i])",u,o)("w.ldelim()")}else{t("for(var i=0;i<%s.length;++i)",o);if(d===undefined)genTypePartial(t,l,c,o+"[i]");else t("w.uint32(%i).%s(%s[i])",(l.id<<3|d)>>>0,u,o)}t("}")}else{if(l.optional)t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",o,l.name);if(d===undefined)genTypePartial(t,l,c,o);else t("w.uint32(%i).%s(%s)",(l.id<<3|d)>>>0,u,o)}}return t("return w")}},4722:(e,t,r)=>{"use strict";e.exports=Enum;var n=r(9653);((Enum.prototype=Object.create(n.prototype)).constructor=Enum).className="Enum";var i=r(8683),s=r(1028);function Enum(e,t,r,i,s,o){n.call(this,e,r);if(t&&typeof t!=="object")throw TypeError("values must be an object");this.valuesById={};this.values=Object.create(this.valuesById);this.comment=i;this.comments=s||{};this.valuesOptions=o;this.reserved=undefined;if(t)for(var a=Object.keys(t),l=0;l<a.length;++l)if(typeof t[a[l]]==="number")this.valuesById[this.values[a[l]]=t[a[l]]]=a[l]}Enum.fromJSON=function fromJSON(e,t){var r=new Enum(e,t.values,t.options,t.comment,t.comments);r.reserved=t.reserved;return r};Enum.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"comment",t?this.comment:undefined,"comments",t?this.comments:undefined])};Enum.prototype.add=function add(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==undefined)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==undefined){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;if(n){if(this.valuesOptions===undefined)this.valuesOptions={};this.valuesOptions[e]=n||null}this.comments[e]=r||null;return this};Enum.prototype.remove=function remove(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);delete this.valuesById[t];delete this.values[e];delete this.comments[e];if(this.valuesOptions)delete this.valuesOptions[e];return this};Enum.prototype.isReservedId=function isReservedId(e){return i.isReservedId(this.reserved,e)};Enum.prototype.isReservedName=function isReservedName(e){return i.isReservedName(this.reserved,e)}},4605:(e,t,r)=>{"use strict";e.exports=Field;var n=r(9653);((Field.prototype=Object.create(n.prototype)).constructor=Field).className="Field";var i=r(4722),s=r(4913),o=r(1028);var a;var l=/^required|optional|repeated$/;Field.fromJSON=function fromJSON(e,t){return new Field(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)};function Field(e,t,r,i,a,c,u){if(o.isObject(i)){u=a;c=i;i=a=undefined}else if(o.isObject(a)){u=c;c=a;a=undefined}n.call(this,e,c);if(!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(i!==undefined&&!l.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(a!==undefined&&!o.isString(a))throw TypeError("extend must be a string");if(i==="proto3_optional"){i="optional"}this.rule=i&&i!=="optional"?i:undefined;this.type=r;this.id=t;this.extend=a||undefined;this.required=i==="required";this.optional=!this.required;this.repeated=i==="repeated";this.map=false;this.message=null;this.partOf=null;this.typeDefault=null;this.defaultValue=null;this.long=o.Long?s.long[r]!==undefined:false;this.bytes=r==="bytes";this.resolvedType=null;this.extensionField=null;this.declaringField=null;this._packed=null;this.comment=u}Object.defineProperty(Field.prototype,"packed",{get:function(){if(this._packed===null)this._packed=this.getOption("packed")!==false;return this._packed}});Field.prototype.setOption=function setOption(e,t,r){if(e==="packed")this._packed=null;return n.prototype.setOption.call(this,e,t,r)};Field.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return o.toObject(["rule",this.rule!=="optional"&&this.rule||undefined,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};Field.prototype.resolve=function resolve(){if(this.resolved)return this;if((this.typeDefault=s.defaults[this.type])===undefined){this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type);if(this.resolvedType instanceof a)this.typeDefault=null;else this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]}else if(this.options&&this.options.proto3_optional){this.typeDefault=null}if(this.options&&this.options["default"]!=null){this.typeDefault=this.options["default"];if(this.resolvedType instanceof i&&typeof this.typeDefault==="string")this.typeDefault=this.resolvedType.values[this.typeDefault]}if(this.options){if(this.options.packed===true||this.options.packed!==undefined&&this.resolvedType&&!(this.resolvedType instanceof i))delete this.options.packed;if(!Object.keys(this.options).length)this.options=undefined}if(this.long){this.typeDefault=o.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u");if(Object.freeze)Object.freeze(this.typeDefault)}else if(this.bytes&&typeof this.typeDefault==="string"){var e;if(o.base64.test(this.typeDefault))o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0);else o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0);this.typeDefault=e}if(this.map)this.defaultValue=o.emptyObject;else if(this.repeated)this.defaultValue=o.emptyArray;else this.defaultValue=this.typeDefault;if(this.parent instanceof a)this.parent.ctor.prototype[this.name]=this.defaultValue;return n.prototype.resolve.call(this)};Field.d=function decorateField(e,t,r,n){if(typeof t==="function")t=o.decorateType(t).name;else if(t&&typeof t==="object")t=o.decorateEnum(t).name;return function fieldDecorator(i,s){o.decorateType(i.constructor).add(new Field(s,e,t,r,{default:n}))}};Field._configure=function configure(e){a=e}},3530:(e,t,r)=>{"use strict";var n=e.exports=r(2122);n.build="light";function load(e,t,r){if(typeof t==="function"){r=t;t=new n.Root}else if(!t)t=new n.Root;return t.load(e,r)}n.load=load;function loadSync(e,t){if(!t)t=new n.Root;return t.loadSync(e)}n.loadSync=loadSync;n.encoder=r(1675);n.decoder=r(4227);n.verifier=r(482);n.converter=r(1400);n.ReflectionObject=r(9653);n.Namespace=r(8683);n.Root=r(8380);n.Enum=r(4722);n.Type=r(1322);n.Field=r(4605);n.OneOf=r(2110);n.MapField=r(8839);n.Service=r(3732);n.Method=r(1399);n.Message=r(6639);n.wrappers=r(2549);n.types=r(4913);n.util=r(1028);n.ReflectionObject._configure(n.Root);n.Namespace._configure(n.Type,n.Service,n.Enum);n.Root._configure(n.Type);n.Field._configure(n.Type)},2122:(e,t,r)=>{"use strict";var n=t;n.build="minimal";n.Writer=r(2194);n.BufferWriter=r(7080);n.Reader=r(9115);n.BufferReader=r(9461);n.util=r(1348);n.rpc=r(950);n.roots=r(8786);n.configure=configure;function configure(){n.util._configure();n.Writer._configure(n.BufferWriter);n.Reader._configure(n.BufferReader)}configure()},9947:(e,t,r)=>{"use strict";var n=e.exports=r(3530);n.build="full";n.tokenize=r(6088);n.parse=r(4621);n.common=r(6626);n.Root._configure(n.Type,n.parse,n.common)},8839:(e,t,r)=>{"use strict";e.exports=MapField;var n=r(4605);((MapField.prototype=Object.create(n.prototype)).constructor=MapField).className="MapField";var i=r(4913),s=r(1028);function MapField(e,t,r,i,o,a){n.call(this,e,t,i,undefined,undefined,o,a);if(!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r;this.resolvedKeyType=null;this.map=true}MapField.fromJSON=function fromJSON(e,t){return new MapField(e,t.id,t.keyType,t.type,t.options,t.comment)};MapField.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:undefined])};MapField.prototype.resolve=function resolve(){if(this.resolved)return this;if(i.mapKey[this.keyType]===undefined)throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)};MapField.d=function decorateMapField(e,t,r){if(typeof r==="function")r=s.decorateType(r).name;else if(r&&typeof r==="object")r=s.decorateEnum(r).name;return function mapFieldDecorator(n,i){s.decorateType(n.constructor).add(new MapField(i,e,t,r))}}},6639:(e,t,r)=>{"use strict";e.exports=Message;var n=r(1348);function Message(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}Message.create=function create(e){return this.$type.create(e)};Message.encode=function encode(e,t){return this.$type.encode(e,t)};Message.encodeDelimited=function encodeDelimited(e,t){return this.$type.encodeDelimited(e,t)};Message.decode=function decode(e){return this.$type.decode(e)};Message.decodeDelimited=function decodeDelimited(e){return this.$type.decodeDelimited(e)};Message.verify=function verify(e){return this.$type.verify(e)};Message.fromObject=function fromObject(e){return this.$type.fromObject(e)};Message.toObject=function toObject(e,t){return this.$type.toObject(e,t)};Message.prototype.toJSON=function toJSON(){return this.$type.toObject(this,n.toJSONOptions)}},1399:(e,t,r)=>{"use strict";e.exports=Method;var n=r(9653);((Method.prototype=Object.create(n.prototype)).constructor=Method).className="Method";var i=r(1028);function Method(e,t,r,s,o,a,l,c,u){if(i.isObject(o)){l=o;o=a=undefined}else if(i.isObject(a)){l=a;a=undefined}if(!(t===undefined||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l);this.type=t||"rpc";this.requestType=r;this.requestStream=o?true:undefined;this.responseType=s;this.responseStream=a?true:undefined;this.resolvedRequestType=null;this.resolvedResponseType=null;this.comment=c;this.parsedOptions=u}Method.fromJSON=function fromJSON(e,t){return new Method(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};Method.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return i.toObject(["type",this.type!=="rpc"&&this.type||undefined,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:undefined,"parsedOptions",this.parsedOptions])};Method.prototype.resolve=function resolve(){if(this.resolved)return this;this.resolvedRequestType=this.parent.lookupType(this.requestType);this.resolvedResponseType=this.parent.lookupType(this.responseType);return n.prototype.resolve.call(this)}},8683:(e,t,r)=>{"use strict";e.exports=Namespace;var n=r(9653);((Namespace.prototype=Object.create(n.prototype)).constructor=Namespace).className="Namespace";var i=r(4605),s=r(1028),o=r(2110);var a,l,c;Namespace.fromJSON=function fromJSON(e,t){return new Namespace(e,t.options).addJSON(t.nested)};function arrayToJSON(e,t){if(!(e&&e.length))return undefined;var r={};for(var n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}Namespace.arrayToJSON=arrayToJSON;Namespace.isReservedId=function isReservedId(e,t){if(e)for(var r=0;r<e.length;++r)if(typeof e[r]!=="string"&&e[r][0]<=t&&e[r][1]>t)return true;return false};Namespace.isReservedName=function isReservedName(e,t){if(e)for(var r=0;r<e.length;++r)if(e[r]===t)return true;return false};function Namespace(e,t){n.call(this,e,t);this.nested=undefined;this._nestedArray=null}function clearCache(e){e._nestedArray=null;return e}Object.defineProperty(Namespace.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=s.toArray(this.nested))}});Namespace.prototype.toJSON=function toJSON(e){return s.toObject(["options",this.options,"nested",arrayToJSON(this.nestedArray,e)])};Namespace.prototype.addJSON=function addJSON(e){var t=this;if(e){for(var r=Object.keys(e),n=0,s;n<r.length;++n){s=e[r[n]];t.add((s.fields!==undefined?a.fromJSON:s.values!==undefined?c.fromJSON:s.methods!==undefined?l.fromJSON:s.id!==undefined?i.fromJSON:Namespace.fromJSON)(r[n],s))}}return this};Namespace.prototype.get=function get(e){return this.nested&&this.nested[e]||null};Namespace.prototype.getEnum=function getEnum(e){if(this.nested&&this.nested[e]instanceof c)return this.nested[e].values;throw Error("no such enum: "+e)};Namespace.prototype.add=function add(e){if(!(e instanceof i&&e.extend!==undefined||e instanceof a||e instanceof o||e instanceof c||e instanceof l||e instanceof Namespace))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t){if(t instanceof Namespace&&e instanceof Namespace&&!(t instanceof a||t instanceof l)){var r=t.nestedArray;for(var n=0;n<r.length;++n)e.add(r[n]);this.remove(t);if(!this.nested)this.nested={};e.setOptions(t.options,true)}else throw Error("duplicate name '"+e.name+"' in "+this)}}this.nested[e.name]=e;e.onAdd(this);return clearCache(this)};Namespace.prototype.remove=function remove(e){if(!(e instanceof n))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);delete this.nested[e.name];if(!Object.keys(this.nested).length)this.nested=undefined;e.onRemove(this);return clearCache(this)};Namespace.prototype.define=function define(e,t){if(s.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");var r=this;while(e.length>0){var n=e.shift();if(r.nested&&r.nested[n]){r=r.nested[n];if(!(r instanceof Namespace))throw Error("path conflicts with non-namespace objects")}else r.add(r=new Namespace(n))}if(t)r.addJSON(t);return r};Namespace.prototype.resolveAll=function resolveAll(){var e=this.nestedArray,t=0;while(t<e.length)if(e[t]instanceof Namespace)e[t++].resolveAll();else e[t++].resolve();return this.resolve()};Namespace.prototype.lookup=function lookup(e,t,r){if(typeof t==="boolean"){r=t;t=undefined}else if(t&&!Array.isArray(t))t=[t];if(s.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;if(e[0]==="")return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(e.length===1){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof Namespace&&(n=n.lookup(e.slice(1),t,true)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof Namespace&&(n=this._nestedArray[i].lookup(e,t,true)))return n;if(this.parent===null||r)return null;return this.parent.lookup(e,t)};Namespace.prototype.lookupType=function lookupType(e){var t=this.lookup(e,[a]);if(!t)throw Error("no such type: "+e);return t};Namespace.prototype.lookupEnum=function lookupEnum(e){var t=this.lookup(e,[c]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupTypeOrEnum=function lookupTypeOrEnum(e){var t=this.lookup(e,[a,c]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};Namespace.prototype.lookupService=function lookupService(e){var t=this.lookup(e,[l]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};Namespace._configure=function(e,t,r){a=e;l=t;c=r}},9653:(e,t,r)=>{"use strict";e.exports=ReflectionObject;ReflectionObject.className="ReflectionObject";var n=r(1028);var i;function ReflectionObject(e,t){if(!n.isString(e))throw TypeError("name must be a string");if(t&&!n.isObject(t))throw TypeError("options must be an object");this.options=t;this.parsedOptions=null;this.name=e;this.parent=null;this.resolved=false;this.comment=null;this.filename=null}Object.defineProperties(ReflectionObject.prototype,{root:{get:function(){var e=this;while(e.parent!==null)e=e.parent;return e}},fullName:{get:function(){var e=[this.name],t=this.parent;while(t){e.unshift(t.name);t=t.parent}return e.join(".")}}});ReflectionObject.prototype.toJSON=function toJSON(){throw Error()};ReflectionObject.prototype.onAdd=function onAdd(e){if(this.parent&&this.parent!==e)this.parent.remove(this);this.parent=e;this.resolved=false;var t=e.root;if(t instanceof i)t._handleAdd(this)};ReflectionObject.prototype.onRemove=function onRemove(e){var t=e.root;if(t instanceof i)t._handleRemove(this);this.parent=null;this.resolved=false};ReflectionObject.prototype.resolve=function resolve(){if(this.resolved)return this;if(this.root instanceof i)this.resolved=true;return this};ReflectionObject.prototype.getOption=function getOption(e){if(this.options)return this.options[e];return undefined};ReflectionObject.prototype.setOption=function setOption(e,t,r){if(!r||!this.options||this.options[e]===undefined)(this.options||(this.options={}))[e]=t;return this};ReflectionObject.prototype.setParsedOption=function setParsedOption(e,t,r){if(!this.parsedOptions){this.parsedOptions=[]}var i=this.parsedOptions;if(r){var s=i.find((function(t){return Object.prototype.hasOwnProperty.call(t,e)}));if(s){var o=s[e];n.setProperty(o,r,t)}else{s={};s[e]=n.setProperty({},r,t);i.push(s)}}else{var a={};a[e]=t;i.push(a)}return this};ReflectionObject.prototype.setOptions=function setOptions(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this};ReflectionObject.prototype.toString=function toString(){var e=this.constructor.className,t=this.fullName;if(t.length)return e+" "+t;return e};ReflectionObject._configure=function(e){i=e}},2110:(e,t,r)=>{"use strict";e.exports=OneOf;var n=r(9653);((OneOf.prototype=Object.create(n.prototype)).constructor=OneOf).className="OneOf";var i=r(4605),s=r(1028);function OneOf(e,t,r,i){if(!Array.isArray(t)){r=t;t=undefined}n.call(this,e,r);if(!(t===undefined||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[];this.fieldsArray=[];this.comment=i}OneOf.fromJSON=function fromJSON(e,t){return new OneOf(e,t.oneof,t.options,t.comment)};OneOf.prototype.toJSON=function toJSON(e){var t=e?Boolean(e.keepComments):false;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:undefined])};function addFieldsToParent(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)if(!e.fieldsArray[t].parent)e.parent.add(e.fieldsArray[t])}OneOf.prototype.add=function add(e){if(!(e instanceof i))throw TypeError("field must be a Field");if(e.parent&&e.parent!==this.parent)e.parent.remove(e);this.oneof.push(e.name);this.fieldsArray.push(e);e.partOf=this;addFieldsToParent(this);return this};OneOf.prototype.remove=function remove(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);this.fieldsArray.splice(t,1);t=this.oneof.indexOf(e.name);if(t>-1)this.oneof.splice(t,1);e.partOf=null;return this};OneOf.prototype.onAdd=function onAdd(e){n.prototype.onAdd.call(this,e);var t=this;for(var r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);if(i&&!i.partOf){i.partOf=t;t.fieldsArray.push(i)}}addFieldsToParent(this)};OneOf.prototype.onRemove=function onRemove(e){for(var t=0,r;t<this.fieldsArray.length;++t)if((r=this.fieldsArray[t]).parent)r.parent.remove(r);n.prototype.onRemove.call(this,e)};OneOf.d=function decorateOneOf(){var e=new Array(arguments.length),t=0;while(t<arguments.length)e[t]=arguments[t++];return function oneOfDecorator(t,r){s.decorateType(t.constructor).add(new OneOf(r,e));Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},4621:(e,t,r)=>{"use strict";e.exports=parse;parse.filename=null;parse.defaults={keepCase:false};var n=r(6088),i=r(8380),s=r(1322),o=r(4605),a=r(8839),l=r(2110),c=r(4722),u=r(3732),d=r(1399),f=r(4913),h=r(1028);var p=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,_=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,E=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function parse(e,t,r){if(!(t instanceof i)){r=t;t=new i}if(!r)r=parse.defaults;var O=r.preferTrailingComment||false;var C=n(e,r.alternateCommentMode||false),R=C.next,A=C.push,w=C.peek,P=C.skip,N=C.cmnt;var I=true,M,k,D,x,L=false;var j=t;var B=r.keepCase?function(e){return e}:h.camelCase;function illegal(e,t,r){var n=parse.filename;if(!r)parse.filename=null;return Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+C.line+")")}function readString(){var e=[],t;do{if((t=R())!=='"'&&t!=="'")throw illegal(t);e.push(R());P(t);t=w()}while(t==='"'||t==="'");return e.join("")}function readValue(e){var t=R();switch(t){case"'":case'"':A(t);return readString();case"true":case"TRUE":return true;case"false":case"FALSE":return false}try{return parseNumber(t,true)}catch(r){if(e&&T.test(t))return t;throw illegal(t,"value")}}function readRanges(e,t){var r,n;do{if(t&&((r=w())==='"'||r==="'"))e.push(readString());else e.push([n=parseId(R()),P("to",true)?parseId(R()):n])}while(P(",",true));P(";")}function parseNumber(e,t){var r=1;if(e.charAt(0)==="-"){r=-1;e=e.substring(1)}switch(e){case"inf":case"INF":case"Inf":return r*Infinity;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(p.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw illegal(e,"number",t)}function parseId(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&e.charAt(0)==="-")throw illegal(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw illegal(e,"id")}function parsePackage(){if(M!==undefined)throw illegal("package");M=R();if(!T.test(M))throw illegal(M,"name");j=j.define(M);P(";")}function parseImport(){var e=w();var t;switch(e){case"weak":t=D||(D=[]);R();break;case"public":R();default:t=k||(k=[]);break}e=readString();P(";");t.push(e)}function parseSyntax(){P("=");x=readString();L=x==="proto3";if(!L&&x!=="proto2")throw illegal(x,"syntax");P(";")}function parseCommon(e,t){switch(t){case"option":parseOption(e,t);P(";");return true;case"message":parseType(e,t);return true;case"enum":parseEnum(e,t);return true;case"service":parseService(e,t);return true;case"extend":parseExtension(e,t);return true}return false}function ifBlock(e,t,r){var n=C.line;if(e){if(typeof e.comment!=="string"){e.comment=N()}e.filename=parse.filename}if(P("{",true)){var i;while((i=R())!=="}")t(i);P(";",true)}else{if(r)r();P(";");if(e&&(typeof e.comment!=="string"||O))e.comment=N(n)||e.comment}}function parseType(e,t){if(!_.test(t=R()))throw illegal(t,"type name");var r=new s(t);ifBlock(r,(function parseType_block(e){if(parseCommon(r,e))return;switch(e){case"map":parseMapField(r,e);break;case"required":case"repeated":parseField(r,e);break;case"optional":if(L){parseField(r,"proto3_optional")}else{parseField(r,"optional")}break;case"oneof":parseOneOf(r,e);break;case"extensions":readRanges(r.extensions||(r.extensions=[]));break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:if(!L||!T.test(e))throw illegal(e);A(e);parseField(r,"optional");break}}));e.add(r)}function parseField(e,t,r){var n=R();if(n==="group"){parseGroup(e,t);return}if(!T.test(n))throw illegal(n,"type");var i=R();if(!_.test(i))throw illegal(i,"name");i=B(i);P("=");var s=new o(i,parseId(R()),n,t,r);ifBlock(s,(function parseField_block(e){if(e==="option"){parseOption(s,e);P(";")}else throw illegal(e)}),(function parseField_line(){parseInlineOptions(s)}));if(t==="proto3_optional"){var a=new l("_"+i);s.setOption("proto3_optional",true);a.add(s);e.add(a)}else{e.add(s)}if(!L&&s.repeated&&(f.packed[n]!==undefined||f.basic[n]===undefined))s.setOption("packed",false,true)}function parseGroup(e,t){var r=R();if(!_.test(r))throw illegal(r,"name");var n=h.lcFirst(r);if(r===n)r=h.ucFirst(r);P("=");var i=parseId(R());var a=new s(r);a.group=true;var l=new o(n,i,r,t);l.filename=parse.filename;ifBlock(a,(function parseGroup_block(e){switch(e){case"option":parseOption(a,e);P(";");break;case"required":case"repeated":parseField(a,e);break;case"optional":if(L){parseField(a,"proto3_optional")}else{parseField(a,"optional")}break;case"message":parseType(a,e);break;case"enum":parseEnum(a,e);break;default:throw illegal(e)}}));e.add(a).add(l)}function parseMapField(e){P("<");var t=R();if(f.mapKey[t]===undefined)throw illegal(t,"type");P(",");var r=R();if(!T.test(r))throw illegal(r,"type");P(">");var n=R();if(!_.test(n))throw illegal(n,"name");P("=");var i=new a(B(n),parseId(R()),t,r);ifBlock(i,(function parseMapField_block(e){if(e==="option"){parseOption(i,e);P(";")}else throw illegal(e)}),(function parseMapField_line(){parseInlineOptions(i)}));e.add(i)}function parseOneOf(e,t){if(!_.test(t=R()))throw illegal(t,"name");var r=new l(B(t));ifBlock(r,(function parseOneOf_block(e){if(e==="option"){parseOption(r,e);P(";")}else{A(e);parseField(r,"optional")}}));e.add(r)}function parseEnum(e,t){if(!_.test(t=R()))throw illegal(t,"name");var r=new c(t);ifBlock(r,(function parseEnum_block(e){switch(e){case"option":parseOption(r,e);P(";");break;case"reserved":readRanges(r.reserved||(r.reserved=[]),true);break;default:parseEnumValue(r,e)}}));e.add(r)}function parseEnumValue(e,t){if(!_.test(t))throw illegal(t,"name");P("=");var r=parseId(R(),true),n={options:undefined};n.setOption=function(e,t){if(this.options===undefined)this.options={};this.options[e]=t};ifBlock(n,(function parseEnumValue_block(e){if(e==="option"){parseOption(n,e);P(";")}else throw illegal(e)}),(function parseEnumValue_line(){parseInlineOptions(n)}));e.add(t,r,n.comment,n.options)}function parseOption(e,t){var r=P("(",true);if(!T.test(t=R()))throw illegal(t,"name");var n=t;var i=n;var s;if(r){P(")");n="("+n+")";i=n;t=w();if(E.test(t)){s=t.slice(1);n+=t;R()}}P("=");var o=parseOptionValue(e,n);setParsedOption(e,i,o,s)}function parseOptionValue(e,t){if(P("{",true)){var r={};while(!P("}",true)){if(!_.test(F=R())){throw illegal(F,"name")}var n;var i=F;P(":",true);if(w()==="{")n=parseOptionValue(e,t+"."+F);else if(w()==="["){n=[];var s;if(P("[",true)){do{s=readValue(true);n.push(s)}while(P(",",true));P("]");if(typeof s!=="undefined"){setOption(e,t+"."+F,s)}}}else{n=readValue(true);setOption(e,t+"."+F,n)}var o=r[i];if(o)n=[].concat(o).concat(n);r[i]=n;P(",",true);P(";",true)}return r}var a=readValue(true);setOption(e,t,a);return a}function setOption(e,t,r){if(e.setOption)e.setOption(t,r)}function setParsedOption(e,t,r,n){if(e.setParsedOption)e.setParsedOption(t,r,n)}function parseInlineOptions(e){if(P("[",true)){do{parseOption(e,"option")}while(P(",",true));P("]")}return e}function parseService(e,t){if(!_.test(t=R()))throw illegal(t,"service name");var r=new u(t);ifBlock(r,(function parseService_block(e){if(parseCommon(r,e))return;if(e==="rpc")parseMethod(r,e);else throw illegal(e)}));e.add(r)}function parseMethod(e,t){var r=N();var n=t;if(!_.test(t=R()))throw illegal(t,"name");var i=t,s,o,a,l;P("(");if(P("stream",true))o=true;if(!T.test(t=R()))throw illegal(t);s=t;P(")");P("returns");P("(");if(P("stream",true))l=true;if(!T.test(t=R()))throw illegal(t);a=t;P(")");var c=new d(i,n,s,a,o,l);c.comment=r;ifBlock(c,(function parseMethod_block(e){if(e==="option"){parseOption(c,e);P(";")}else throw illegal(e)}));e.add(c)}function parseExtension(e,t){if(!T.test(t=R()))throw illegal(t,"reference");var r=t;ifBlock(null,(function parseExtension_block(t){switch(t){case"required":case"repeated":parseField(e,t,r);break;case"optional":if(L){parseField(e,"proto3_optional",r)}else{parseField(e,"optional",r)}break;default:if(!L||!T.test(t))throw illegal(t);A(t);parseField(e,"optional",r);break}}))}var F;while((F=R())!==null){switch(F){case"package":if(!I)throw illegal(F);parsePackage();break;case"import":if(!I)throw illegal(F);parseImport();break;case"syntax":if(!I)throw illegal(F);parseSyntax();break;case"option":parseOption(j,F);P(";");break;default:if(parseCommon(j,F)){I=false;continue}throw illegal(F)}}parse.filename=null;return{package:M,imports:k,weakImports:D,syntax:x,root:t}}},9115:(e,t,r)=>{"use strict";e.exports=Reader;var n=r(1348);var i;var s=n.LongBits,o=n.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader(e){this.buf=e;this.pos=0;this.len=e.length}var a=typeof Uint8Array!=="undefined"?function create_typed_array(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader(e);throw Error("illegal buffer")}:function create_array(e){if(Array.isArray(e))return new Reader(e);throw Error("illegal buffer")};var l=function create(){return n.Buffer?function create_buffer_setup(e){return(Reader.create=function create_buffer(e){return n.Buffer.isBuffer(e)?new i(e):a(e)})(e)}:a};Reader.create=l();Reader.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice;Reader.prototype.uint32=function read_uint32_setup(){var e=4294967295;return function read_uint32(){e=(this.buf[this.pos]&127)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<7)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<14)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&127)<<21)>>>0;if(this.buf[this.pos++]<128)return e;e=(e|(this.buf[this.pos]&15)<<28)>>>0;if(this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len){this.pos=this.len;throw indexOutOfRange(this,10)}return e}}();Reader.prototype.int32=function read_int32(){return this.uint32()|0};Reader.prototype.sint32=function read_sint32(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var e=new s(0,0);var t=0;if(this.len-this.pos>4){for(;t<4;++t){e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0;e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0;if(this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0;if(this.buf[this.pos++]<128)return e}e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0;return e}if(this.len-this.pos>4){for(;t<5;++t){e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}else{for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0;if(this.buf[this.pos++]<128)return e}}throw Error("invalid varint encoding")}Reader.prototype.bool=function read_bool(){return this.uint32()!==0};function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Reader.prototype.fixed32=function read_fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader.prototype.sfixed32=function read_sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new s(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.prototype.float=function read_float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=n.float.readFloatLE(this.buf,this.pos);this.pos+=4;return e};Reader.prototype.double=function read_double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);this.pos+=8;return e};Reader.prototype.bytes=function read_bytes(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);this.pos+=e;if(Array.isArray(this.buf))return this.buf.slice(t,r);return t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)};Reader.prototype.string=function read_string(){var e=this.bytes();return o.read(e,0,e.length)};Reader.prototype.skip=function skip(e){if(typeof e==="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else{do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(this.buf[this.pos++]&128)}return this};Reader.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:while((e=this.uint32()&7)!==4){this.skipType(e)}break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader._configure=function(e){i=e;Reader.create=l();i._configure();var t=n.Long?"toLong":"toNumber";n.merge(Reader.prototype,{int64:function read_int64(){return readLongVarint.call(this)[t](false)},uint64:function read_uint64(){return readLongVarint.call(this)[t](true)},sint64:function read_sint64(){return readLongVarint.call(this).zzDecode()[t](false)},fixed64:function read_fixed64(){return readFixed64.call(this)[t](true)},sfixed64:function read_sfixed64(){return readFixed64.call(this)[t](false)}})}},9461:(e,t,r)=>{"use strict";e.exports=BufferReader;var n=r(9115);(BufferReader.prototype=Object.create(n.prototype)).constructor=BufferReader;var i=r(1348);function BufferReader(e){n.call(this,e)}BufferReader._configure=function(){if(i.Buffer)BufferReader.prototype._slice=i.Buffer.prototype.slice};BufferReader.prototype.string=function read_string_buffer(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure()},8380:(e,t,r)=>{"use strict";e.exports=Root;var n=r(8683);((Root.prototype=Object.create(n.prototype)).constructor=Root).className="Root";var i=r(4605),s=r(4722),o=r(2110),a=r(1028);var l,c,u;function Root(e){n.call(this,"",e);this.deferred=[];this.files=[]}Root.fromJSON=function fromJSON(e,t){if(!t)t=new Root;if(e.options)t.setOptions(e.options);return t.addJSON(e.nested)};Root.prototype.resolvePath=a.path.resolve;Root.prototype.fetch=a.fetch;function SYNC(){}Root.prototype.load=function load(e,t,r){if(typeof t==="function"){r=t;t=undefined}var n=this;if(!r)return a.asPromise(load,n,e,t);var i=r===SYNC;function finish(e,t){if(!r)return;var n=r;r=null;if(i)throw e;n(e,t)}function getBundledFileName(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in u)return r}return null}function process(e,r){try{if(a.isString(r)&&r.charAt(0)==="{")r=JSON.parse(r);if(!a.isString(r))n.setOptions(r.options).addJSON(r.nested);else{c.filename=e;var o=c(r,n,t),l,u=0;if(o.imports)for(;u<o.imports.length;++u)if(l=getBundledFileName(o.imports[u])||n.resolvePath(e,o.imports[u]))fetch(l);if(o.weakImports)for(u=0;u<o.weakImports.length;++u)if(l=getBundledFileName(o.weakImports[u])||n.resolvePath(e,o.weakImports[u]))fetch(l,true)}}catch(e){finish(e)}if(!i&&!s)finish(null,n)}function fetch(e,t){if(n.files.indexOf(e)>-1)return;n.files.push(e);if(e in u){if(i)process(e,u[e]);else{++s;setTimeout((function(){--s;process(e,u[e])}))}return}if(i){var o;try{o=a.fs.readFileSync(e).toString("utf8")}catch(e){if(!t)finish(e);return}process(e,o)}else{++s;n.fetch(e,(function(i,o){--s;if(!r)return;if(i){if(!t)finish(i);else if(!s)finish(null,n);return}process(e,o)}))}}var s=0;if(a.isString(e))e=[e];for(var o=0,l;o<e.length;++o)if(l=n.resolvePath("",e[o]))fetch(l);if(i)return n;if(!s)finish(null,n);return undefined};Root.prototype.loadSync=function loadSync(e,t){if(!a.isNode)throw Error("not supported");return this.load(e,t,SYNC)};Root.prototype.resolveAll=function resolveAll(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(e){return"'extend "+e.extend+"' in "+e.parent.fullName})).join(", "));return n.prototype.resolveAll.call(this)};var d=/^[A-Z]/;function tryHandleExtension(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new i(t.fullName,t.id,t.type,t.rule,undefined,t.options);n.declaringField=t;t.extensionField=n;r.add(n);return true}return false}Root.prototype._handleAdd=function _handleAdd(e){if(e instanceof i){if(e.extend!==undefined&&!e.extensionField)if(!tryHandleExtension(this,e))this.deferred.push(e)}else if(e instanceof s){if(d.test(e.name))e.parent[e.name]=e.values}else if(!(e instanceof o)){if(e instanceof l)for(var t=0;t<this.deferred.length;)if(tryHandleExtension(this,this.deferred[t]))this.deferred.splice(t,1);else++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);if(d.test(e.name))e.parent[e.name]=e}};Root.prototype._handleRemove=function _handleRemove(e){if(e instanceof i){if(e.extend!==undefined){if(e.extensionField){e.extensionField.parent.remove(e.extensionField);e.extensionField=null}else{var t=this.deferred.indexOf(e);if(t>-1)this.deferred.splice(t,1)}}}else if(e instanceof s){if(d.test(e.name))delete e.parent[e.name]}else if(e instanceof n){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);if(d.test(e.name))delete e.parent[e.name]}};Root._configure=function(e,t,r){l=e;c=t;u=r}},8786:e=>{"use strict";e.exports={}},950:(e,t,r)=>{"use strict";var n=t;n.Service=r(5332)},5332:(e,t,r)=>{"use strict";e.exports=Service;var n=r(1348);(Service.prototype=Object.create(n.EventEmitter.prototype)).constructor=Service;function Service(e,t,r){if(typeof e!=="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this);this.rpcImpl=e;this.requestDelimited=Boolean(t);this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function rpcCall(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return n.asPromise(rpcCall,o,e,t,r,i);if(!o.rpcImpl){setTimeout((function(){s(Error("already ended"))}),0);return undefined}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function rpcCallback(t,n){if(t){o.emit("error",t,e);return s(t)}if(n===null){o.end(true);return undefined}if(!(n instanceof r)){try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){o.emit("error",t,e);return s(t)}}o.emit("data",n,e);return s(null,n)}))}catch(t){o.emit("error",t,e);setTimeout((function(){s(t)}),0);return undefined}};Service.prototype.end=function end(e){if(this.rpcImpl){if(!e)this.rpcImpl(null,null,null);this.rpcImpl=null;this.emit("end").off()}return this}},3732:(e,t,r)=>{"use strict";e.exports=Service;var n=r(8683);((Service.prototype=Object.create(n.prototype)).constructor=Service).className="Service";var i=r(1399),s=r(1028),o=r(950);function Service(e,t){n.call(this,e,t);this.methods={};this._methodsArray=null}Service.fromJSON=function fromJSON(e,t){var r=new Service(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));if(t.nested)r.addJSON(t.nested);r.comment=t.comment;return r};Service.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return s.toObject(["options",t&&t.options||undefined,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Object.defineProperty(Service.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}});function clearCache(e){e._methodsArray=null;return e}Service.prototype.get=function get(e){return this.methods[e]||n.prototype.get.call(this,e)};Service.prototype.resolveAll=function resolveAll(){var e=this.methodsArray;for(var t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)};Service.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof i){this.methods[e.name]=e;e.parent=this;return clearCache(this)}return n.prototype.add.call(this,e)};Service.prototype.remove=function remove(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.methods[e.name];e.parent=null;return clearCache(this)}return n.prototype.remove.call(this,e)};Service.prototype.create=function create(e,t,r){var n=new o.Service(e,t,r);for(var i=0,a;i<this.methodsArray.length;++i){var l=s.lcFirst((a=this._methodsArray[i]).resolve().name).replace(/[^$\w_]/g,"");n[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:a,q:a.resolvedRequestType.ctor,s:a.resolvedResponseType.ctor})}return n}},6088:e=>{"use strict";e.exports=tokenize;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g;var i=/^ *[*/]+ */,s=/^\s*\*?\/*/,o=/\n/g,a=/\s/,l=/\\(.?)/g;var c={0:"\0",r:"\r",n:"\n",t:"\t"};function unescape(e){return e.replace(l,(function(e,t){switch(t){case"\\":case"":return t;default:return c[t]||""}}))}tokenize.unescape=unescape;function tokenize(e,l){e=e.toString();var c=0,u=e.length,d=1,f=0,h={};var p=[];var m=null;function illegal(e){return Error("illegal "+e+" (line "+d+")")}function readString(){var t=m==="'"?n:r;t.lastIndex=c-1;var i=t.exec(e);if(!i)throw illegal("string");c=t.lastIndex;push(m);m=null;return unescape(i[1])}function charAt(t){return e.charAt(t)}function setComment(t,r,n){var a={type:e.charAt(t++),lineEmpty:false,leading:n};var c;if(l){c=2}else{c=3}var u=t-c,p;do{if(--u<0||(p=e.charAt(u))==="\n"){a.lineEmpty=true;break}}while(p===" "||p==="\t");var m=e.substring(t,r).split(o);for(var g=0;g<m.length;++g)m[g]=m[g].replace(l?s:i,"").trim();a.text=m.join("\n").trim();h[d]=a;f=d}function isDoubleSlashCommentLine(t){var r=findEndOfLine(t);var n=e.substring(t,r);var i=/^\s*\/{1,2}/.test(n);return i}function findEndOfLine(e){var t=e;while(t<u&&charAt(t)!=="\n"){t++}return t}function next(){if(p.length>0)return p.shift();if(m)return readString();var r,n,i,s,o,f=c===0;do{if(c===u)return null;r=false;while(a.test(i=charAt(c))){if(i==="\n"){f=true;++d}if(++c===u)return null}if(charAt(c)==="/"){if(++c===u){throw illegal("comment")}if(charAt(c)==="/"){if(!l){o=charAt(s=c+1)==="/";while(charAt(++c)!=="\n"){if(c===u){return null}}++c;if(o){setComment(s,c-1,f);f=true}++d;r=true}else{s=c;o=false;if(isDoubleSlashCommentLine(c)){o=true;do{c=findEndOfLine(c);if(c===u){break}c++;if(!f){break}}while(isDoubleSlashCommentLine(c))}else{c=Math.min(u,findEndOfLine(c)+1)}if(o){setComment(s,c,f);f=true}d++;r=true}}else if((i=charAt(c))==="*"){s=c+1;o=l||charAt(s)==="*";do{if(i==="\n"){++d}if(++c===u){throw illegal("comment")}n=i;i=charAt(c)}while(n!=="*"||i!=="/");++c;if(o){setComment(s,c-2,f);f=true}r=true}else{return"/"}}}while(r);var h=c;t.lastIndex=0;var g=t.test(charAt(h++));if(!g)while(h<u&&!t.test(charAt(h)))++h;var y=e.substring(c,c=h);if(y==='"'||y==="'")m=y;return y}function push(e){p.push(e)}function peek(){if(!p.length){var e=next();if(e===null)return null;push(e)}return p[0]}function skip(e,t){var r=peek(),n=r===e;if(n){next();return true}if(!t)throw illegal("token '"+r+"', '"+e+"' expected");return false}function cmnt(e){var t=null;var r;if(e===undefined){r=h[d-1];delete h[d-1];if(r&&(l||r.type==="*"||r.lineEmpty)){t=r.leading?r.text:null}}else{if(f<e){peek()}r=h[e];delete h[e];if(r&&!r.lineEmpty&&(l||r.type==="/")){t=r.leading?null:r.text}}return t}return Object.defineProperty({next:next,peek:peek,push:push,skip:skip,cmnt:cmnt},"line",{get:function(){return d}})}},1322:(e,t,r)=>{"use strict";e.exports=Type;var n=r(8683);((Type.prototype=Object.create(n.prototype)).constructor=Type).className="Type";var i=r(4722),s=r(2110),o=r(4605),a=r(8839),l=r(3732),c=r(6639),u=r(9115),d=r(2194),f=r(1028),h=r(1675),p=r(4227),m=r(482),g=r(1400),y=r(2549);function Type(e,t){n.call(this,e,t);this.fields={};this.oneofs=undefined;this.extensions=undefined;this.reserved=undefined;this.group=undefined;this._fieldsById=null;this._fieldsArray=null;this._oneofsArray=null;this._ctor=null}Object.defineProperties(Type.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=f.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=f.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Type.generateConstructor(this)())},set:function(e){var t=e.prototype;if(!(t instanceof c)){(e.prototype=new c).constructor=e;f.merge(e.prototype,t)}e.$type=e.prototype.$type=this;f.merge(e,c,true);this._ctor=e;var r=0;for(;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:f.oneOfGetter(this._oneofsArray[r].oneof),set:f.oneOfSetter(this._oneofsArray[r].oneof)};if(r)Object.defineProperties(e.prototype,n)}}});Type.generateConstructor=function generateConstructor(e){var t=f.codegen(["p"],e.name);for(var r=0,n;r<e.fieldsArray.length;++r)if((n=e._fieldsArray[r]).map)t("this%s={}",f.safeProp(n.name));else if(n.repeated)t("this%s=[]",f.safeProp(n.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function clearCache(e){e._fieldsById=e._fieldsArray=e._oneofsArray=null;delete e.encode;delete e.decode;delete e.verify;return e}Type.fromJSON=function fromJSON(e,t){var r=new Type(e,t.options);r.extensions=t.extensions;r.reserved=t.reserved;var c=Object.keys(t.fields),u=0;for(;u<c.length;++u)r.add((typeof t.fields[c[u]].keyType!=="undefined"?a.fromJSON:o.fromJSON)(c[u],t.fields[c[u]]));if(t.oneofs)for(c=Object.keys(t.oneofs),u=0;u<c.length;++u)r.add(s.fromJSON(c[u],t.oneofs[c[u]]));if(t.nested)for(c=Object.keys(t.nested),u=0;u<c.length;++u){var d=t.nested[c[u]];r.add((d.id!==undefined?o.fromJSON:d.fields!==undefined?Type.fromJSON:d.values!==undefined?i.fromJSON:d.methods!==undefined?l.fromJSON:n.fromJSON)(c[u],d))}if(t.extensions&&t.extensions.length)r.extensions=t.extensions;if(t.reserved&&t.reserved.length)r.reserved=t.reserved;if(t.group)r.group=true;if(t.comment)r.comment=t.comment;return r};Type.prototype.toJSON=function toJSON(e){var t=n.prototype.toJSON.call(this,e);var r=e?Boolean(e.keepComments):false;return f.toObject(["options",t&&t.options||undefined,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter((function(e){return!e.declaringField})),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:undefined,"reserved",this.reserved&&this.reserved.length?this.reserved:undefined,"group",this.group||undefined,"nested",t&&t.nested||undefined,"comment",r?this.comment:undefined])};Type.prototype.resolveAll=function resolveAll(){var e=this.fieldsArray,t=0;while(t<e.length)e[t++].resolve();var r=this.oneofsArray;t=0;while(t<r.length)r[t++].resolve();return n.prototype.resolveAll.call(this)};Type.prototype.get=function get(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};Type.prototype.add=function add(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof o&&e.extend===undefined){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);if(e.parent)e.parent.remove(e);this.fields[e.name]=e;e.message=this;e.onAdd(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs)this.oneofs={};this.oneofs[e.name]=e;e.onAdd(this);return clearCache(this)}return n.prototype.add.call(this,e)};Type.prototype.remove=function remove(e){if(e instanceof o&&e.extend===undefined){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.fields[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);delete this.oneofs[e.name];e.parent=null;e.onRemove(this);return clearCache(this)}return n.prototype.remove.call(this,e)};Type.prototype.isReservedId=function isReservedId(e){return n.isReservedId(this.reserved,e)};Type.prototype.isReservedName=function isReservedName(e){return n.isReservedName(this.reserved,e)};Type.prototype.create=function create(e){return new this.ctor(e)};Type.prototype.setup=function setup(){var e=this.fullName,t=[];for(var r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=h(this)({Writer:d,types:t,util:f});this.decode=p(this)({Reader:u,types:t,util:f});this.verify=m(this)({types:t,util:f});this.fromObject=g.fromObject(this)({types:t,util:f});this.toObject=g.toObject(this)({types:t,util:f});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject;this.fromObject=n.fromObject.bind(i);i.toObject=this.toObject;this.toObject=n.toObject.bind(i)}return this};Type.prototype.encode=function encode_setup(e,t){return this.setup().encode(e,t)};Type.prototype.encodeDelimited=function encodeDelimited(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};Type.prototype.decode=function decode_setup(e,t){return this.setup().decode(e,t)};Type.prototype.decodeDelimited=function decodeDelimited(e){if(!(e instanceof u))e=u.create(e);return this.decode(e,e.uint32())};Type.prototype.verify=function verify_setup(e){return this.setup().verify(e)};Type.prototype.fromObject=function fromObject(e){return this.setup().fromObject(e)};Type.prototype.toObject=function toObject(e,t){return this.setup().toObject(e,t)};Type.d=function decorateType(e){return function typeDecorator(t){f.decorateType(t,e)}}},4913:(e,t,r)=>{"use strict";var n=t;var i=r(1028);var s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function bake(e,t){var r=0,n={};t|=0;while(r<e.length)n[s[r+t]]=e[r++];return n}n.basic=bake([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);n.defaults=bake([0,0,0,0,0,0,0,0,0,0,0,0,false,"",i.emptyArray,null]);n.long=bake([0,0,0,1,1],7);n.mapKey=bake([0,0,0,5,5,0,0,0,1,1,0,2],2);n.packed=bake([1,5,0,0,0,5,5,0,0,0,1,1,0])},1028:(e,t,r)=>{"use strict";var n=e.exports=r(1348);var i=r(8786);var s,o;n.codegen=r(9748);n.fetch=r(530);n.path=r(2770);n.fs=n.inquire("fs");n.toArray=function toArray(e){if(e){var t=Object.keys(e),r=new Array(t.length),n=0;while(n<t.length)r[n]=e[t[n++]];return r}return[]};n.toObject=function toObject(e){var t={},r=0;while(r<e.length){var n=e[r++],i=e[r++];if(i!==undefined)t[n]=i}return t};var a=/\\/g,l=/"/g;n.isReserved=function isReserved(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};n.safeProp=function safeProp(e){if(!/^[$\w_]+$/.test(e)||n.isReserved(e))return'["'+e.replace(a,"\\\\").replace(l,'\\"')+'"]';return"."+e};n.ucFirst=function ucFirst(e){return e.charAt(0).toUpperCase()+e.substring(1)};var c=/_([a-z])/g;n.camelCase=function camelCase(e){return e.substring(0,1)+e.substring(1).replace(c,(function(e,t){return t.toUpperCase()}))};n.compareFieldsById=function compareFieldsById(e,t){return e.id-t.id};n.decorateType=function decorateType(e,t){if(e.$type){if(t&&e.$type.name!==t){n.decorateRoot.remove(e.$type);e.$type.name=t;n.decorateRoot.add(e.$type)}return e.$type}if(!s)s=r(1322);var i=new s(t||e.name);n.decorateRoot.add(i);i.ctor=e;Object.defineProperty(e,"$type",{value:i,enumerable:false});Object.defineProperty(e.prototype,"$type",{value:i,enumerable:false});return i};var u=0;n.decorateEnum=function decorateEnum(e){if(e.$type)return e.$type;if(!o)o=r(4722);var t=new o("Enum"+u++,e);n.decorateRoot.add(t);Object.defineProperty(e,"$type",{value:t,enumerable:false});return t};n.setProperty=function setProperty(e,t,r){function setProp(e,t,r){var n=t.shift();if(n==="__proto__"){return e}if(t.length>0){e[n]=setProp(e[n]||{},t,r)}else{var i=e[n];if(i)r=[].concat(i).concat(r);e[n]=r}return e}if(typeof e!=="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");t=t.split(".");return setProp(e,t,r)};Object.defineProperty(n,"decorateRoot",{get:function(){return i["decorated"]||(i["decorated"]=new(r(8380)))}})},6924:(e,t,r)=>{"use strict";e.exports=LongBits;var n=r(1348);function LongBits(e,t){this.lo=e>>>0;this.hi=t>>>0}var i=LongBits.zero=new LongBits(0,0);i.toNumber=function(){return 0};i.zzEncode=i.zzDecode=function(){return this};i.length=function(){return 1};var s=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function fromNumber(e){if(e===0)return i;var t=e<0;if(t)e=-e;var r=e>>>0,n=(e-r)/4294967296>>>0;if(t){n=~n>>>0;r=~r>>>0;if(++r>4294967295){r=0;if(++n>4294967295)n=0}}return new LongBits(r,n)};LongBits.from=function from(e){if(typeof e==="number")return LongBits.fromNumber(e);if(n.isString(e)){if(n.Long)e=n.Long.fromString(e);else return LongBits.fromNumber(parseInt(e,10))}return e.low||e.high?new LongBits(e.low>>>0,e.high>>>0):i};LongBits.prototype.toNumber=function toNumber(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;if(!t)r=r+1>>>0;return-(t+r*4294967296)}return this.lo+this.hi*4294967296};LongBits.prototype.toLong=function toLong(e){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(e)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(e)}};var o=String.prototype.charCodeAt;LongBits.fromHash=function fromHash(e){if(e===s)return i;return new LongBits((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)};LongBits.prototype.toHash=function toHash(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};LongBits.prototype.zzEncode=function zzEncode(){var e=this.hi>>31;this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0;this.lo=(this.lo<<1^e)>>>0;return this};LongBits.prototype.zzDecode=function zzDecode(){var e=-(this.lo&1);this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0;this.hi=(this.hi>>>1^e)>>>0;return this};LongBits.prototype.length=function length(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},1348:function(e,t,r){"use strict";var n=t;n.asPromise=r(6499);n.base64=r(4250);n.EventEmitter=r(400);n.float=r(3046);n.inquire=r(2830);n.utf8=r(5247);n.pool=r(9044);n.LongBits=r(6924);n.isNode=Boolean(typeof global!=="undefined"&&global&&global.process&&global.process.versions&&global.process.versions.node);n.global=n.isNode&&global||typeof window!=="undefined"&&window||typeof self!=="undefined"&&self||this;n.emptyArray=Object.freeze?Object.freeze([]):[];n.emptyObject=Object.freeze?Object.freeze({}):{};n.isInteger=Number.isInteger||function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e};n.isString=function isString(e){return typeof e==="string"||e instanceof String};n.isObject=function isObject(e){return e&&typeof e==="object"};n.isset=n.isSet=function isSet(e,t){var r=e[t];if(r!=null&&e.hasOwnProperty(t))return typeof r!=="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0;return false};n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}();n._Buffer_from=null;n._Buffer_allocUnsafe=null;n.newBuffer=function newBuffer(e){return typeof e==="number"?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):typeof Uint8Array==="undefined"?e:new Uint8Array(e)};n.Array=typeof Uint8Array!=="undefined"?Uint8Array:Array;n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long");n.key2Re=/^true|false|0|1$/;n.key32Re=/^-?(?:0|[1-9][0-9]*)$/;n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;n.longToHash=function longToHash(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash};n.longFromHash=function longFromHash(e,t){var r=n.LongBits.fromHash(e);if(n.Long)return n.Long.fromBits(r.lo,r.hi,t);return r.toNumber(Boolean(t))};function merge(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)if(e[n[i]]===undefined||!r)e[n[i]]=t[n[i]];return e}n.merge=merge;n.lcFirst=function lcFirst(e){return e.charAt(0).toLowerCase()+e.substring(1)};function newError(e){function CustomError(e,t){if(!(this instanceof CustomError))return new CustomError(e,t);Object.defineProperty(this,"message",{get:function(){return e}});if(Error.captureStackTrace)Error.captureStackTrace(this,CustomError);else Object.defineProperty(this,"stack",{value:(new Error).stack||""});if(t)merge(this,t)}CustomError.prototype=Object.create(Error.prototype,{constructor:{value:CustomError,writable:true,enumerable:false,configurable:true},name:{get(){return e},set:undefined,enumerable:false,configurable:true},toString:{value(){return this.name+": "+this.message},writable:true,enumerable:false,configurable:true}});return CustomError}n.newError=newError;n.ProtocolError=newError("ProtocolError");n.oneOfGetter=function getOneOf(e){var t={};for(var r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(t[e[r]]===1&&this[e[r]]!==undefined&&this[e[r]]!==null)return e[r]}};n.oneOfSetter=function setOneOf(e){return function(t){for(var r=0;r<e.length;++r)if(e[r]!==t)delete this[e[r]]}};n.toJSONOptions={longs:String,enums:String,bytes:String,json:true};n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function Buffer_from(t,r){return new e(t,r)};n._Buffer_allocUnsafe=e.allocUnsafe||function Buffer_allocUnsafe(t){return new e(t)}}},482:(e,t,r)=>{"use strict";e.exports=verifier;var n=r(4722),i=r(1028);function invalid(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function genVerifyValue(e,t,r,i){if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",invalid(t,"enum value"));for(var s=Object.keys(t.resolvedType.values),o=0;o<s.length;++o)e("case %i:",t.resolvedType.values[s[o]]);e("break")("}")}else{e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}")}}else{switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",invalid(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",invalid(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",invalid(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",invalid(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",invalid(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",invalid(t,"buffer"));break}}return e}function genVerifyKey(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",invalid(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",invalid(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",invalid(t,"boolean key"));break}return e}function verifier(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected");var r=e.oneofsArray,n={};if(r.length)t("var p={}");for(var s=0;s<e.fieldsArray.length;++s){var o=e._fieldsArray[s].resolve(),a="m"+i.safeProp(o.name);if(o.optional)t("if(%s!=null&&m.hasOwnProperty(%j)){",a,o.name);if(o.map){t("if(!util.isObject(%s))",a)("return%j",invalid(o,"object"))("var k=Object.keys(%s)",a)("for(var i=0;i<k.length;++i){");genVerifyKey(t,o,"k[i]");genVerifyValue(t,o,s,a+"[k[i]]")("}")}else if(o.repeated){t("if(!Array.isArray(%s))",a)("return%j",invalid(o,"array"))("for(var i=0;i<%s.length;++i){",a);genVerifyValue(t,o,s,a+"[i]")("}")}else{if(o.partOf){var l=i.safeProp(o.partOf.name);if(n[o.partOf.name]===1)t("if(p%s===1)",l)("return%j",o.partOf.name+": multiple values");n[o.partOf.name]=1;t("p%s=1",l)}genVerifyValue(t,o,s,a)}if(o.optional)t("}")}return t("return null")}},2549:(e,t,r)=>{"use strict";var n=t;var i=r(6639);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1);var r=this.lookup(t);if(r){var n=e["@type"].charAt(0)==="."?e["@type"].slice(1):e["@type"];if(n.indexOf("/")===-1){n="/"+n}return this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/";var n="";var s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1);n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var o=this.lookup(s);if(o)e=o.decode(e.value)}if(!(e instanceof this.ctor)&&e instanceof i){var a=e.$type.toObject(e,t);var l=e.$type.fullName[0]==="."?e.$type.fullName.slice(1):e.$type.fullName;if(n===""){n=r}s=n+l;a["@type"]=s;return a}return this.toObject(e,t)}}},2194:(e,t,r)=>{"use strict";e.exports=Writer;var n=r(1348);var i;var s=n.LongBits,o=n.base64,a=n.utf8;function Op(e,t,r){this.fn=e;this.len=t;this.next=undefined;this.val=r}function noop(){}function State(e){this.head=e.head;this.tail=e.tail;this.len=e.len;this.next=e.states}function Writer(){this.len=0;this.head=new Op(noop,0,0);this.tail=this.head;this.states=null}var l=function create(){return n.Buffer?function create_buffer_setup(){return(Writer.create=function create_buffer(){return new i})()}:function create_array(){return new Writer}};Writer.create=l();Writer.alloc=function alloc(e){return new n.Array(e)};if(n.Array!==Array)Writer.alloc=n.pool(Writer.alloc,n.Array.prototype.subarray);Writer.prototype._push=function push(e,t,r){this.tail=this.tail.next=new Op(e,t,r);this.len+=t;return this};function writeByte(e,t,r){t[r]=e&255}function writeVarint32(e,t,r){while(e>127){t[r++]=e&127|128;e>>>=7}t[r]=e}function VarintOp(e,t){this.len=e;this.next=undefined;this.val=t}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer.prototype.uint32=function write_uint32(e){this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len;return this};Writer.prototype.int32=function write_int32(e){return e<0?this._push(writeVarint64,10,s.fromNumber(e)):this.uint32(e)};Writer.prototype.sint32=function write_sint32(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(e,t,r){while(e.hi){t[r++]=e.lo&127|128;e.lo=(e.lo>>>7|e.hi<<25)>>>0;e.hi>>>=7}while(e.lo>127){t[r++]=e.lo&127|128;e.lo=e.lo>>>7}t[r++]=e.lo}Writer.prototype.uint64=function write_uint64(e){var t=s.from(e);return this._push(writeVarint64,t.length(),t)};Writer.prototype.int64=Writer.prototype.uint64;Writer.prototype.sint64=function write_sint64(e){var t=s.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer.prototype.bool=function write_bool(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(e,t,r){t[r]=e&255;t[r+1]=e>>>8&255;t[r+2]=e>>>16&255;t[r+3]=e>>>24}Writer.prototype.fixed32=function write_fixed32(e){return this._push(writeFixed32,4,e>>>0)};Writer.prototype.sfixed32=Writer.prototype.fixed32;Writer.prototype.fixed64=function write_fixed64(e){var t=s.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer.prototype.sfixed64=Writer.prototype.fixed64;Writer.prototype.float=function write_float(e){return this._push(n.float.writeFloatLE,4,e)};Writer.prototype.double=function write_double(e){return this._push(n.float.writeDoubleLE,8,e)};var c=n.Array.prototype.set?function writeBytes_set(e,t,r){t.set(e,r)}:function writeBytes_for(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer.prototype.bytes=function write_bytes(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(n.isString(e)){var r=Writer.alloc(t=o.length(e));o.decode(e,r,0);e=r}return this.uint32(t)._push(c,t,e)};Writer.prototype.string=function write_string(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(writeByte,1,0)};Writer.prototype.fork=function fork(){this.states=new State(this);this.head=this.tail=new Op(noop,0,0);this.len=0;return this};Writer.prototype.reset=function reset(){if(this.states){this.head=this.states.head;this.tail=this.states.tail;this.len=this.states.len;this.states=this.states.next}else{this.head=this.tail=new Op(noop,0,0);this.len=0}return this};Writer.prototype.ldelim=function ldelim(){var e=this.head,t=this.tail,r=this.len;this.reset().uint32(r);if(r){this.tail.next=e.next;this.tail=t;this.len+=r}return this};Writer.prototype.finish=function finish(){var e=this.head.next,t=this.constructor.alloc(this.len),r=0;while(e){e.fn(e.val,t,r);r+=e.len;e=e.next}return t};Writer._configure=function(e){i=e;Writer.create=l();i._configure()}},7080:(e,t,r)=>{"use strict";e.exports=BufferWriter;var n=r(2194);(BufferWriter.prototype=Object.create(n.prototype)).constructor=BufferWriter;var i=r(1348);function BufferWriter(){n.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=i._Buffer_allocUnsafe;BufferWriter.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&i.Buffer.prototype.set.name==="set"?function writeBytesBuffer_set(e,t,r){t.set(e,r)}:function writeBytesBuffer_copy(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}};BufferWriter.prototype.bytes=function write_bytes_buffer(e){if(i.isString(e))e=i._Buffer_from(e,"base64");var t=e.length>>>0;this.uint32(t);if(t)this._push(BufferWriter.writeBytesBuffer,t,e);return this};function writeStringBuffer(e,t,r){if(e.length<40)i.utf8.write(e,t,r);else if(t.utf8Write)t.utf8Write(e,r);else t.write(e,r)}BufferWriter.prototype.string=function write_string_buffer(e){var t=i.Buffer.byteLength(e);this.uint32(t);if(t)this._push(writeStringBuffer,t,e);return this};BufferWriter._configure()},9523:e=>{"use strict";e.exports=require("dns")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},8720:e=>{"use strict";e.exports=require("next/dist/compiled/@opentelemetry/api")},8314:e=>{"use strict";e.exports=require("next/dist/compiled/@opentelemetry/resources")},3190:e=>{"use strict";e.exports=require("next/dist/compiled/@opentelemetry/semantic-conventions")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},538:e=>{"use strict";e.exports={i8:"1.7.0"}},4401:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},7270:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},7492:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},6129:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},8189:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},2903:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},6770:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},2472:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var r=__webpack_module_cache__[e]={exports:{}};var n=true;try{__webpack_modules__[e].call(r.exports,r,r.exports,__nccwpck_require__);n=false}finally{if(n)delete __webpack_module_cache__[e]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__=__nccwpck_require__(3126);module.exports=__webpack_exports__})();